(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[6],{"/MAO":function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/MKj"),s=o("TSYQ"),r=o.n(s),l=o("Ye/N"),c=o("n6mq");function d({handleFollowClick:e,isFollowing:t,isSelf:o}){const n=t?l.a._("Unfollow"):l.a._("Follow");return o?i.a.createElement(c.d,{inline:!0,disabled:!0,text:l.a._("That's you!","Text describing that the person's avatar is you")}):i.a.createElement(c.d,{color:t?"gray":"red",inline:!0,onClick:e,text:n})}var u=o("3gA6"),p=o("xdpg");class g extends n.Component{constructor(...e){var t,o,i;super(...e),i=()=>{const{fullName:e,imageSrc:t}=this.props;return t?n.createElement("img",{alt:e,src:t,title:Object(p.i)(l.a._("More from {{ fullName }}"),{fullName:e})}):n.createElement("span",{className:"icon"},e[0].toUpperCase())},(o="getContent")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}render(){return n.createElement("div",null,this.getContent())}}var h=o("ZVOf"),m=o("U4JR");t.a=Object(a.connect)(null,(function(e){return{follow:t=>e(Object(h.a)(t)),unfollow:t=>e(Object(h.b)(t))}}))((function({className:e,followedByMe:t=!1,isSelf:o,logData:a,showName:s=!1,showFollow:l=!1,size:p="small",subtitle:_="",title:b,user:w={},viewType:f="thumb"}){const[E,k]=Object(n.useState)(w.explicitly_followed_by_me||!1),{full_name:y,username:S}=w,O=w.image_key||w.image_medium_url||w.image_small_url;return i.a.createElement("div",{className:r()("Module","User","hasText","thumb",p,e)},i.a.createElement(c.c,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1},i.a.createElement(c.c,{flex:"grow",paddingX:1},i.a.createElement(u.b,{className:"profileSource",to:`/${S}/`},i.a.createElement("div",{className:"thumbImageWrapper"},i.a.createElement(g,{fullName:y,imageSrc:O})),b&&i.a.createElement("h3",{className:"title"},b),s&&i.a.createElement("h4",{className:"fullname"},y),_&&i.a.createElement("div",{className:"subtitle"},_))),l&&i.a.createElement(c.c,{paddingX:1},i.a.createElement(d,{handleFollowClick:()=>{E?(Object(h.b)(w.id),k(!1)):(Object(h.a)(w.id),k(!0)),a&&Object(m.a)(101,a)},isFollowing:E,isSelf:Boolean(o)}))))}))},"0/lC":function(e,t,o){function n(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const o=[];let n,i;for(n=0;n<=t.length;n+=1)o[n]=[n];for(i=0;i<=e.length;i+=1)o[0][i]=i;for(n=1;n<=t.length;n+=1)for(i=1;i<=e.length;i+=1)t.charAt(n-1)===e.charAt(i-1)?o[n][i]=o[n-1][i-1]:o[n][i]=Math.min(o[n-1][i-1]+1,Math.min(o[n][i-1]+1,o[n-1][i]+1));return o[t.length][e.length]}o.d(t,"a",(function(){return n}))},"1kvE":function(e,t,o){o.d(t,"a",(function(){return i}));var n=o("BlMG");const i=(e,t,o)=>{Object(n.c)(`unauth.magic_link_login.${e}`,{has_email_data:!!t,has_password_data:!!o})}},"2hay":function(e,t,o){o.d(t,"a",(function(){return a})),o.d(t,"e",(function(){return s})),o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return l})),o.d(t,"f",(function(){return c})),o.d(t,"b",(function(){return d}));var n=o("37no");const i=["picture.type(large)","id","first_name","last_name","email","gender","birthday"],a=["public_profile","email","user_likes","user_birthday","user_friends"],s=e=>{return Object(n.c)(`//connect.facebook.net/${(e=>{let t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US"}return t.startsWith("es")&&(t="es_LA"),t.startsWith("ar")&&(t="ar_AR"),t})(e)}/sdk.js`,n.a.FACEBOOK).then(()=>{window.FB.init({appId:"274266067164",status:!0,xfbml:!0,version:"v2.7"})})},r=()=>new Promise(e=>{window.FB.getLoginStatus(e)}),l=(e,t={},o)=>new Promise((n,a)=>{if("connected"===e.status){const{authResponse:{userID:a,accessToken:s}}=e,r={facebook_id:a,facebook_token:s,facebook_autologin:t.autologin||!1},l=`/me?fields=${i.join(",")}`;o&&o("login_status.connected"),window.FB.api(l,e=>{n({creds:r,data:{...e,...r,...e.picture&&!e.picture.data.is_silhouette?{image_url:e.picture.data.url}:{}}})})}else{const t=e.status||"unknown";o&&o(`login_status.${t}`),a({status:t})}}),c=(e,t)=>{const o=e.data;e.isTrusted&&"string"==typeof o&&0===o.indexOf("_FB_")&&-1!==o.indexOf("type=login_button_dialog_open")&&t&&t("facebook_connect.login_button_dialog_open")},d=e=>new Promise((t,o)=>{window.FB.api("/me/permissions",n=>{const i=n.data;if(i){const o=i.find(t=>t.permission===e&&"granted"===t.status);return t({hasPerm:!!o})}return o(Error("Failed to call facebook to get permission"))})})},"37no":function(e,t,o){o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return l})),o.d(t,"c",(function(){return c}));var n=o("7w6Q");const i=20,a=100,s=.01,r=Object.freeze({OTHER:0,FACEBOOK:1,GPLUS_ONE:2});function l(e){return new Promise((t,o)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const n=document.createElement("script");n.src=e,n.async=!0,n.addEventListener("load",t),n.addEventListener("error",o),document.getElementsByTagName("head")[0].appendChild(n)})}function c(e,t=r.OTHER,o=!1){const l=o?"web":"mweb";return new Promise((o,c)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if(t===r.GPLUS_ONE)if(window.gapi)o();else{const t=setInterval(()=>{window.gapi||e===i?(clearInterval(t),o()):(e+=1,n.a.increment(`${l}.loadScript.gplus_one.tries_${e}`,s))},a)}else if(t===r.FACEBOOK)if(window.FB)o();else{const t=setInterval(()=>{window.FB||e===i?(clearInterval(t),o()):(e+=1,n.a.increment(`${l}.loadScript.facebook.tries_${e}`,s))},a)}else o()}else{const t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",o),t.addEventListener("error",c),document.getElementsByTagName("head")[0].appendChild(t)}})}},"4NbJ":function(e,t,o){o.d(t,"a",(function(){return p})),o.d(t,"e",(function(){return g})),o.d(t,"b",(function(){return h})),o.d(t,"c",(function(){return m})),o.d(t,"d",(function(){return _})),o.d(t,"f",(function(){return b}));var n=o("bKKl"),i=o("37no");const a="postmessage",s="profile email",r="694505692171-31closf3bcmlt59aeulg2j81ej68j6hk.apps.googleusercontent.com",l="com.pinterest",c="offline",d="single_host_origin",u=()=>Object(i.c)("https://apis.google.com/js/client:platform.js",i.a.GPLUS_ONE);function p(e){const t={scope:s,client_id:r,app_package_name:l,access_type:c,cookie_policy:d},o=function(t){e&&e(t)};return new Promise((e,n)=>{u().then(()=>{o("google_script_load"),window.gapi.auth2?(o("google_script_init_onuse"),window.gapi.auth2.init(t).then(t=>{o("google_init_success"),e(t)},({error:e})=>{o("google_init_error"),n(`init_onuse_${e}`)})):(o("google_script_init_exists"),window.gapi.load("auth2",{callback:()=>{o("google_auth2_load_complete"),window.gapi.auth2.init(t).then(t=>{o("google_init_success"),e(t)},({error:e})=>{o("google_init_error"),n(`init_exists_${e}`)})},onerror:({error:e})=>{o("google_auth2_script_load_error"),n(e)},timeout:15e3,ontimeout:()=>{o("google_auth2_script_load_timeout"),n("timeout")}}))})})}function g(e,t){return function(e,t){return new Promise((o,i)=>{Object(n.b)()?i():(t("init_google_button_v4"),t("google_button_init"),p(t).then(()=>{t("google_sdk_load"),window.gapi.signin.render(e,{scope:s,clientid:r,apppackagename:l,redirecturi:a,accesstype:c,cookiepolicy:d,callback:e=>{t("callback_response");const n=e.status,i=n.signed_in?{data:{gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at,gplus_autologin:!0},signupOptions:{gplus_code:e.code,gplus_id_token:e.id_token,gplus_redirect_uri:a}}:{};n.signed_in?t("google_auth_data_found"):t("gplus_user_not_logged_in"),o(i)}})},e=>{t("google_auth2_sdk_init_error"),i(e)}))})}(e,t)}function h(e,t){return function(e,t,o){return new Promise((i,s)=>{t&&Object(n.b)()?s():u().then(()=>{window.gapi.signin.render(e,{scope:o,clientid:r,apppackagename:l,redirecturi:a,accesstype:c,cookiepolicy:d,callback:e=>{const o=e.status,n=o.signed_in?{data:{gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at,gplus_autologin:t||!1},signupOptions:{gplus_code:e.code,gplus_id_token:e.id_token,gplus_redirect_uri:a}}:{};(o.signed_in||t)&&i(n)}})})})}(e,t,s)}function m(e,t,o,i=!1){return function(e,t,o,i=!1){return new Promise((r,l)=>{i&&Object(n.b)()?l():(o("google_button_init"),p(o).then(()=>{o("google_sdk_load"),t.signin2.render(e,{scope:s,onsuccess:e=>{o("google_button_success");const t=e.getAuthResponse(!0),n={data:{gplus_id_token:t.id_token,gplus_access_token:t.access_token,gplus_expires_at:t.expires_at,gplus_autologin:i||!1},signupOptions:{gplus_code:"",gplus_id_token:t.id_token,gplus_redirect_uri:a}};r(n)},onfailure:()=>{o("google_button_failure"),l("gapi_signin2_render_error")}})},e=>{o("google_auth2_sdk_init_error"),l(e)}))})}(e,t,o,i)}function _(e,t,o=!1){return function(e,t,o=!1){return new Promise((e,i)=>{o&&Object(n.b)()?i():(t("google_button_init"),p(t).then(n=>{t("google_sdk_load");const a=n.currentUser.get();a&&a.Zi||i("gplus_user_not_found");const s=a.getAuthResponse(!0);if(s){t("google_auth_data_found");const n={data:{gplus_id_token:s.id_token,gplus_access_token:s.access_token,gplus_expires_at:s.expires_at,gplus_autologin:o||!1}};e(n)}i("gplus_user_not_logged_in")},e=>{t("google_auth2_sdk_init_error"),i(e)}))})}(0,t,o)}function b(e,t){return new Promise((e,o)=>{Object(n.b)()?o():(t("google_button_init"),function(e){const t={scope:s,client_id:r,app_package_name:l,access_type:c,cookie_policy:d};return new Promise((o,n)=>{e("google_script_fetch"),Object(i.c)("https://apis.google.com/js/platform.js",i.a.GPLUS_ONE).then(()=>{e("google_script_load"),window.gapi.load("auth2",{callback:()=>{e("google_auth2_load");const i=window.gapi.auth2.init(t);i.then(()=>{e("google_init_success"),o(i)},({error:t})=>{e("google_init_error"),n(`init_exists_${t}`)})},onerror:({error:t})=>{e("google_auth2_script_load_error"),n(t)},timeout:15e3,ontimeout:()=>{e("google_auth2_script_load_timeout"),n("timeout")}})})})}(t).then(n=>{t("google_sdk_load");const i=n.currentUser.get();i&&i.Zi||o("gplus_user_not_found");const a=i.getAuthResponse(!0);if(a){t("google_auth_data_found");const o={data:{gplus_id_token:a.id_token,gplus_access_token:a.access_token,gplus_expires_at:a.expires_at,gplus_autologin:!0}};e(o)}t("google_auth_data_not_found"),o("gplus_user_not_logged_in")},e=>{t("google_auth2_sdk_init_error"),o(e)}))})}},"7KqT":function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/MKj"),s=o("kL1e"),r=o("JW66"),l=o("h4v/"),c=o("Ye/N"),d=o("x/Ro"),u=o("8rCP"),p=o("17x9"),g=o.n(p),h=o("DtEZ"),m=o("eOdZ"),_=o("inSI"),b=o("kmwA"),w=o("H3gn"),f=o("i7x9"),E=o("BlMG"),k=o("liz/"),y=o("a0jO"),S=o("fArA"),O=o("3NaU"),x=(o("KGCn"),o("IRjL")),C=o("U4JR"),v=o("1kvE"),L=o("dtw8"),R=o("a2Qh"),T=o("N9+J"),A=o("D8pe"),I=o("NSVK"),j=o("jsIX");function B(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const P=b.a.settings.PASSWORD_RESET_URL,F="loginmodal",N="email",M="6LeZIo0UAAAAAKFpimHio-ff_ddIT8f_QzpXG0_1",W={alternativeSeparatorContainer:{marginBottom:"9px"},emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:y.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},passwordLinkContainer:{float:"left",marginBottom:"12px",marginTop:"8px"},forgotPassword:{color:"#333333",fontSize:"14px",fontWeight:"bold"},loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"},verticalCenter:{display:"flex",flexDirection:"column",justifyContent:"center"}},D=e=>i.a.createElement(O.a,null,({tokenV3:t,refreshToken:o})=>i.a.createElement(U,{...e,recaptchaTokenV3:t,refreshRecaptchaTokenV3:o}));D.defaultProps={container:"unknown",isAccountSwitch:!1,isPersonalizedLoginFlyout:!1,shouldPreventRegister:!1};class U extends n.Component{constructor(e,t){super(e,t),B(this,"onLoginWithVoluntarilyDeactivated",e=>{this.setState({googleValidationError:e.message})}),B(this,"onLoginWithSuspended",()=>{const{loadingIndicatorCallback:e}=this.props;e&&e(!1),this.setState({accountRecoveryModalType:R.a[r.a.POLICY_VIOLATION_USER],loading:!1})}),B(this,"onloadCallback",()=>{try{window.recaptchaIdOne=window.grecaptcha.render("recaptcha_placeholder_1",{sitekey:M,callback:"verifyCaptcha"})}catch(e){}try{window.recaptchaIdTwo=window.grecaptcha.render("recaptcha_placeholder_2",{sitekey:M,callback:"verifyCaptcha"})}catch(e){}}),B(this,"inDisableAccountKitPhoneNumberLoginExp",()=>{const{requestContext:{seoUnauthExperiments:e}}=this.props;return(e.v2ActivateExperiment("web_unauth_disable_accountkit_phonenumber_login")||"").startsWith("enabled")}),B(this,"emailValidators",()=>{if(this.inDisableAccountKitPhoneNumberLoginExp()){const e=c.a._("You missed a spot! Don't forget to add your email."),t=c.a._("Hmm...that doesn't look like an email address.");return[Object(j.i)({message:e}),Object(j.c)({message:t})]}{const e=c.a._("You missed a spot! Don't forget to add your email or phone number."),t=c.a._("Hmm...that doesn't look like an email address or phone number.");return[Object(j.i)({message:e}),Object(j.c)({message:t})]}}),B(this,"handleButtonClick",(e,t)=>{Object(E.a)("unauth.login.button.clicked");const{viewer:o}=this.props;let n,i=!1;if(this.inDisableAccountKitPhoneNumberLoginExp())i=!0;else{u.a.runPhoneValidators(this.props.email,this.context.locale,this._loginFacebookAccountKit.bind(this))&&(i=!0)}if(o.isAuth?Object(C.a)(101,{element:30,login_state:o.isLimitedLogin?2:1,signup_login_method:1}):Object(C.a)(101,{element:30,signup_login_method:1}),this.setState({facebookValidationError:null,googleValidationError:null}),i)if(n=Object(_.a)(this.props.email,this.emailValidators()))this.setState({emailValidationError:n}),Object(E.a)(`unauth.login.error.CLIENT_ERROR.malformemail.${F}`);else{this.setState({emailValidationError:null}),n=Object(_.a)(this.props.password,this.passwordValidators);const e=Object(_.a)(this.props.password,this.asciiValidators);n?(this.setState({passwordValidationError:n}),Object(E.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${F}`)):e?(this.setState({passwordValidationError:e}),Object(E.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${F}`),Object(E.a)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${F}`)):(this.setState({passwordValidationError:null}),this.loginUser(N,void 0,t))}}),B(this,"preventRegister",e=>{e===T.a?this.updateAccountRecoveryModal(I.b.PREVENT_FACEBOOK_REGISTER):e===A.a&&this.updateAccountRecoveryModal(I.b.PREVENT_GOOGLE_REGISTER),this.props.triggerAccountRecoveryMode&&this.props.triggerAccountRecoveryMode(e)}),B(this,"updateAccountRecoveryModal",e=>this.setState({accountRecoveryModalType:e})),B(this,"handleLoginFailure",(e,t,o)=>{const{clearPassword:n,loadingIndicatorCallback:i,viewer:a}=this.props,s=this.getAuxDataLoginMethod(e);Object(E.a)(`unauth.login.error.LOGIN_FAILURE.${e}`),a.isAuth?Object(C.a)(7535,{login_state:a.isLimitedLogin?2:1,signup_login_method:s}):Object(C.a)(7535,{signup_login_method:s}),i(!1),this.props.refreshRecaptchaTokenV3&&this.props.refreshRecaptchaTokenV3();const l=t.http_status===r.a.RESPONSE_CODE_TOO_MANY_REQUESTS?r.a.RESPONSE_CODE_TOO_MANY_REQUESTS:t.api_error_code;if(l===r.a.LOGIN_MFA_REQUIRED)return void I.c.handleLoginMfa(o,t.data,this.props.onLoginWithMfa);if(l===r.a.RESPONSE_CODE_TOO_MANY_REQUESTS&&t.api_error_code===r.a.API_EVENT_BLOCKED_ERROR&&t.message&&"!"!==t.message[t.message.length-1]&&!I.c.isExceedRecaptchaLocalLimit()){if(document.getElementById("recaptcha-jssdk"))this.onloadCallback();else{const e=document.createElement("script");e.id="recaptcha-jssdk",e.src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit";const t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}return void this.setState({passwordValidationError:c.a._("Oops! You logged in too quickly. Please try again with the reCAPTCHA.","Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha"),loading:!1})}const d=I.c.getLoginErrorState(t,"login",this.props.email,f.a,this.updateAccountRecoveryModal);d?(this.setState({accountRecoveryModalType:R.a[l],...d,loading:!1}),n&&d.passwordValidationError&&n()):(c.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(x.a)(c.a._("Sorry! Something went wrong on our end.")),this.setState({loading:!1}))}),B(this,"verifyCaptcha",()=>{const e=window.grecaptcha.getResponse(window.recaptchaIdOne)||window.grecaptcha.getResponse(window.recaptchaIdTwo);I.c.updateRecaptchaTimeStamp(),this.handleButtonClick(void 0,e),I.c.isExceedRecaptchaLocalLimit()||(void 0!==window.recaptchaIdOne&&window.grecaptcha.reset(window.recaptchaIdOne),void 0!==window.recaptchaIdTwo&&window.grecaptcha.reset(window.recaptchaIdTwo))}),B(this,"_loginFacebookAccountKit",e=>{if(u.a.validateResponse(e)){const t={phone_number:this.props.email,fb_auth_code:e.code};Object(E.a)("unauth_phone_only_login_attempt"),this.loginUser(T.a,t)}else this.setState({emailValidationError:c.a._("Enter your email or phone number to try again."),loading:!1})}),B(this,"handleEmailChange",e=>{this.props.onEmailChange&&this.props.onEmailChange(e)}),B(this,"handlePasswordChange",e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.onPasswordChange&&this.props.onPasswordChange(e)}),B(this,"handleBlur",()=>{this.setState({facebookValidationError:null,googleValidationError:null})}),B(this,"handleMagicLinkClick",()=>{this.setState({magicLinkLoading:!0});const e=Object(_.a)(this.props.email,this.emailValidators());if(e)this.setState({emailValidationError:e,magicLinkLoading:!1});else{this.setState({emailValidationError:null}),m.a.create("UserLoginPasswordlessResource",{username_or_email:this.props.email,is_magic_link:!0}).callCreate().then(()=>{Object(v.a)("link_send_success",this.props.email,this.props.password),this.setState({magicLinkLoading:!1}),this.props.toggleMagicLinkConfirmation(!0)},e=>{let t;Object(v.a)("link_send_failure",this.props.email,this.props.password),t=e.message?c.a._("The email you entered does not belong to any account.","Error message shown when login email does not exist."):c.a._("Sorry! Something went wrong on our end.","error message on login modal telling users we had a problem with their request"),this.setState({emailValidationError:t,magicLinkLoading:!1})})}}),B(this,"handleExistingEmail",e=>{this.setState({isExistingEmail:e})}),B(this,"renderSocialButtons",()=>{const{disablePostSignupNextUrl:e,hideFacebookButton:t,hideGoogleButton:o,isAccountSwitch:n,isPersonalizedLoginFlyout:a,loadingIndicatorCallback:s,nextUrlParam:r,onLoginWithMfa:l,onSocialConnectVerified:d,shouldPreventRegister:u,onFBPhoneOnlyConnectVerified:p}=this.props,g=!t&&i.a.createElement(T.b,{buttonText:c.a._("Continue with Facebook"),container:this.props.container,disablePostSignupNextUrl:e,isAccountSwitch:n,loadingIndicatorCallback:s,nextUrlParam:r,onSocialConnectVerified:d,onFBPhoneOnlyConnectVerified:p,onLoginWithMfa:l,onLoginWithSuspended:this.onLoginWithSuspended,tooltip:this.state.facebookValidationError,useGestaltTooltip:!0,preventRegister:u?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal}),h=!o&&i.a.createElement(A.b,{container:this.props.container,disablePostSignupNextUrl:e,isAccountSwitch:n,nextUrlParam:r,onLoginWithMfa:l,onLoginWithSuspended:this.onLoginWithSuspended,onSocialConnectVerified:d,tooltip:this.state.googleValidationError,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,preventRegister:u?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal}),m=!t&&!o?"8px":"0px";let _=W.socialButtonSeparator,b=W.socialButtonContainer;return a&&(_={...W.socialButtonSeparator,height:m},b={...W.socialButtonContainer,marginTop:"9px"}),i.a.createElement("div",{style:b},g,i.a.createElement("div",{style:_}),h)}),B(this,"renderPasswordResetLink",()=>{const{email:e,viewer:t}=this.props,{isExistingEmail:o,passwordValidationError:n}=this.state;return n&&i.a.isValidElement(n)?null:i.a.createElement("div",{style:W.passwordLinkContainer},i.a.createElement("a",{style:W.forgotPassword,href:P+(e?`?q=${e}`:""),onClick:()=>{o&&Object(E.a)("unauth_web.login_modal.forgot_password_with_existing_email"),Object(E.a)("login_modal_forget_account"),t.isAuth?Object(C.a)(101,{element:10881,login_state:t.isLimitedLogin?2:1}):Object(C.a)(101,{element:10881})}},c.a._("Forgot your password?","Desktop login modal link for users to recover their account")))}),B(this,"renderRegisterForm",()=>{const{email:e,hideEmailField:t,inputStyleOverrides:o,isAccountSwitch:n,loginButtonTextOverride:a,magicLinkGroup:s,password:r}=this.props,l=a||c.a._("Log in");return i.a.createElement(h.a,{buttonText:l,disableEmailLogin:this.props.disableEmailLogin,email:e,emailText:c.a._("Email","Placeholder text for email field"),emailValidationError:this.state.emailValidationError,handleExistingEmail:this.handleExistingEmail,handleMagicLinkClick:this.handleMagicLinkClick,hideEmailField:t,hidePasswordField:this.props.hidePasswordField,hideFacebookButton:this.props.hideFacebookButton,hideGoogleButton:this.props.hideGoogleButton,inputStyleOverrides:o,loading:this.state.loading&&!n,magicLinkLoading:this.state.magicLinkLoading,magicLinkGroup:s,onButtonClick:this.handleButtonClick,onEmailBlur:this.handleBlur.bind(this),onEmailChange:this.handleEmailChange.bind(this),onPasswordChange:this.handlePasswordChange,password:r,passwordText:c.a._("Password"),passwordValidationError:this.state.passwordValidationError,renderPasswordResetLink:this.renderPasswordResetLink})}),B(this,"renderOriginalForm",()=>{const{hideFacebookButton:e,hideGoogleButton:t,hidePasswordField:o}=this.props,n=!(o||t&&e);return i.a.createElement(i.a.Fragment,null,this.renderRegisterForm(),n&&i.a.createElement(s.a,null),this.renderSocialButtons())}),B(this,"renderButtons",()=>this.renderOriginalForm()),this.state={accountRecoveryModalType:null,emailValidationError:e.emailValidationError||null,passwordValidationError:e.passwordValidationError||null,facebookValidationError:null,googleValidationError:null,loading:!1,magicLinkLoading:!1,passwordFieldVisible:!1,isExistingEmail:!1,isStopRequest:!1};const o=c.a._("Passwords can only include alphabet letters, numbers, and common punctuation characters.","Only ASCII characters are allowed for password"),n=c.a._("The password you entered is incorrect.");this.passwordValidators=[Object(j.g)({shortPassStr:n,badPassStyle:n,samePasswordStr:n,blackPassStr:n})],this.asciiValidators=[Object(j.b)({message:o})]}componentDidMount(){I.c.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&!this.props.isAccountSwitch&&(this.props.showResponseMessageModal?this.props.showResponseMessageModal(!1):I.c.handleRedirect(this.props.nextUrlParam)),this.inDisableAccountKitPhoneNumberLoginExp()||u.a.setupPhoneAuth(this.context.locale),window.onloadCallback=this.onloadCallback,window.verifyCaptcha=this.verifyCaptcha,void 0===window.recaptchaCount?window.recaptchaCount=1:window.recaptchaCount+=1}UNSAFE_componentWillReceiveProps(e){const t=e.emailValidationError,o=e.passwordValidationError;let n={};t!==this.props.emailValidationError?n={emailValidationError:t}:o!==this.props.passwordValidationError&&(n={passwordValidationError:o}),this.setState(n)}componentWillUnmount(){void 0!==window.recaptchaCount&&(window.recaptchaCount-=1)}getAuxDataLoginMethod(e){return e===T.a?2:e===A.a?3:e===N?1:""}loginUser(e,t,o){const{container:n,isAccountSwitch:i,showResponseMessageModal:a,viewer:s}=this.props;this.setState({loading:!0}),this.props.loadingIndicatorCallback(!0);const r=t||{username_or_email:this.props.email,password:this.props.password},c={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType},u=this.getAuxDataLoginMethod(e);s.isAuth?Object(C.a)(7534,{login_state:s.isLimitedLogin?2:1,signup_login_method:u}):Object(C.a)(7534,{signup_login_method:u}),i&&l.a.getInstance().pauseImpressionsAndFlush(),Object(d.a)(r,c,this.props.requestContext.seoUnauthExperiments,i,o,this.props.recaptchaTokenV3||"default").then((e={})=>{s.isAuth?Object(C.a)(7536,{login_state:s.isLimitedLogin?2:1,signup_login_method:u}):Object(C.a)(7536,{signup_login_method:u}),I.c.storeLoginCredentialsToBrowser(r);let t=this.props.nextUrlParam||I.c.defaultLoginRedirectUrl();if(i&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const o=e.resource_response.data.user;Object(k.b)(o,"email",n),t="/"+o.username}else I.c.storeLoginCredentialsToBrowser(r);a?a(!1):I.c.handleRedirect(t)},t=>this.handleLoginFailure(e,t,r))}render(){const{email:e}=this.props;return i.a.createElement("div",{style:W.loginContainer},i.a.createElement(R.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:e,onLoginWithMfa:this.props.onLoginWithMfa}),this.renderButtons(),!this.props.hideTermsOfService&&i.a.createElement(w.a,{dark:!0}))}}U.contextTypes={isAuthenticated:g.a.bool.isRequired,locale:g.a.string.isRequired,loginState:g.a.number,userAgent:g.a.shape({isMobile:g.a.bool.isRequired}).isRequired,hybridTier:g.a.string,pageType:g.a.string},t.a=Object(S.compose)(Object(a.connect)(e=>({viewer:e.viewer})),L.withRouter)(D)},"8rCP":function(e,t,o){var n=o("Ev07"),i=(o("Ye/N"),o("inSI")),a=o("kmwA"),s=o("BlMG"),r=o("jsIX");const l={PhoneNumberAsYouTypeParser:null,csrf:Math.floor(0xffffffffffff*Math.random()).toString(16),phoneNumberValidators:[Object(r.i)(),Object(r.h)()],setupPhoneAuth:e=>{const t=l.csrf;window.AccountKit_OnInteractive=function(){Object(s.a)("web_unauth.fb_accountkit.init_attempt"),AccountKit.init({appId:a.a.settings.FACEBOOK_API_KEY,state:t,version:"v1.1",fbAppEventsEnabled:!0})},Object(s.a)("web_unauth.fb_accountkit.fetch_attempt"),((t,o,i)=>{const a=t.getElementsByTagName(o)[0];if(t.getElementById(i))return;const s=t.createElement(o);s.id=i,s.src="https://sdk.accountkit.com/"+n.a.getLocaleString(e)+"/sdk.js",a.parentNode.insertBefore(s,a)})(document,"script","accountkit-jssdk"),(()=>Promise.all([o.e(88),o.e("PhoneNumberAsYouTypeParserCommon")]).then(o.bind(null,"AXBq")))().then(e=>{l.PhoneNumberAsYouTypeParser=e.default})},runPhoneValidators:(e,t,o)=>{const n=Object(i.a)(e,l.phoneNumberValidators);if(!n)try{const n=l._extractCountryCode(t),i=new l.PhoneNumberAsYouTypeParser(n);i.input(e),Object(s.a)("web_unauth.fb_accountkit.login_attempt"),AccountKit.login("PHONE",{countryCode:l._extractPhoneCountryCode(i),phoneNumber:l._extractPhoneNumber(i)},o)}catch(a){return!0}return n},validateResponse:e=>e&&"PARTIALLY_AUTHENTICATED"===e.status&&e.state===l.csrf,_extractCountryCode:e=>e.slice(-2).toUpperCase()||"US",_extractPhoneCountryCode:e=>e.country_phone_code?"+"+e.country_phone_code:e.country&&e.country_metadata.length>0?"+"+e.country_metadata[0]:"+1",_extractPhoneNumber:e=>e.national_number};t.a=l},D8pe:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/MKj"),s=o("pz/u"),r=o("JW66"),l=o("fZ0m"),c=o("Ye/N"),d=o("x/Ro"),u=o("NSVK"),p=o("17x9"),g=o.n(p),h=o("kmwA"),m=o("zUH3"),_=o("BlMG"),b=o("DrcS"),w=o("7w6Q"),f=o("n6mq");function E(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const k="google_auth_id_token",y="google_auth_first_name",S={container:{__style:{backgroundColor:"white",borderRadius:"8px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:1}},msWebview:{height:"100%",width:"100%"}},O=()=>"undefined"!=typeof window?`${window.location.origin}/connect/gplus/`:"";var x=class extends n.Component{constructor(...e){super(...e),E(this,"state",{googleSignWebviewSource:O()}),E(this,"handleMsWebViewScriptNotify",e=>{if("success"===e.value){const{onDismiss:e,onSignInCallback:t}=this.props,o=window.localStorage.getItem(k),n=window.localStorage.getItem(y);window.localStorage.removeItem(k),window.localStorage.removeItem(y),w.a.increment("windows.google.connect.handleMsWebViewScriptNotify.success"),t({access_token:"",code:"",expires_at:"",id_token:o,status:{signed_in:!0},first_name:n},!1,window.gapi,"windows"),e()}else"failure"===e.value&&(w.a.increment("windows.google.connect.handleMsWebViewScriptNotify.failure"),this.props.onError())}),E(this,"msWebViewRef",e=>{e&&e.addEventListener("MSWebViewScriptNotify",this.handleMsWebViewScriptNotify)})}render(){const{onDismiss:e}=this.props,{googleSignWebviewSource:t}=this.state;return i.a.createElement(f.c,{display:"flex",position:"fixed",dangerouslySetInlineStyle:S.container,direction:"column",height:"800px",padding:1,width:"500px"},i.a.createElement(f.c,{alignItems:"end",display:"flex",height:"35px",justifyContent:"end"},i.a.createElement(f.o,{accessibilityLabel:c.a._("Cancel Google Sign-In","Accessibility label for Google Sign-In Dialog bog"),onClick:e,icon:"cancel"})),i.a.createElement(f.c,{flex:"grow"},i.a.createElement("x-ms-webview",{style:S.msWebview,ref:this.msWebViewRef,src:t})))}},C=o("HU19"),v=o("liz/"),L=o("fArA"),R=o("a0jO"),T=o("4NbJ"),A=o("IRjL"),I=o("/5zs"),j=o("U4JR"),B=o("dtw8"),P=o("VL22"),F=o("pLLR");function N(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return U}));const M={button:{padding:"1px",marginRight:"0px",textAlign:"left",backgroundClip:"padding-box",display:"block",transition:"opacity .2s linear",position:"relative",outline:"none",width:"100%",marginTop:"0px",height:"40px",borderRadius:"4px"},icon:{borderRadius:"2px",display:"inline-block",height:"24px",marginLeft:"12px",textAlign:"center",width:"24px"},iconContainer:{position:"relative",margin:"auto",marginTop:"2px"},text:{display:"inline-block",fontFamily:R.b,position:"absolute",textAlign:"center",top:"50%",fontSize:"16px",transform:"translateY(-50%) translateX(-37px)",verticalAlign:"top",WebkitFontSmoothing:"auto",width:"100%"},tooltip:{top:"12px",left:"100%",position:"absolute"}},W="postmessage",D="profile email",U="google",V="signin_render",G="signin_auth2",q=()=>"undefined"!=typeof window&&void 0!==window.Windows;class z extends n.Component{constructor(...e){super(...e),N(this,"state",{showGoogleSigninWebview:!1,inGoogleButtonColorChangeExp:!1}),N(this,"onSignInCallback",(e,t,o,n=V)=>{const i={gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at};if(e.status.signed_in)Object(_.a)(`unauth_web.google_connect.success.${n}`),this.login(i).then((e={})=>{if(this.props.isAccountSwitch&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const t=e.resource_response.data.user;Object(v.b)(t,U,this.props.container)}t&&(Object(_.a)("autologin.google"),Object(_.a)("autologin.google_connect_button")),this.onLoginSuccess()},t=>{if(t.api_error_code===r.a.LOGIN_VOLUNTARILY_DEACTIVATED_USER)this.props.onLoginWithVoluntarilyDeactivated&&this.props.onLoginWithVoluntarilyDeactivated(t);else if(t.api_error_code===r.a.LOGIN_MFA_REQUIRED)this.props.onLoginWithMfa&&this.props.onLoginWithMfa(i,t.data);else if(t.api_error_code===r.a.LOGIN_USER_NOT_FOUND){if(this.props.preventRegister)return void this.props.preventRegister(U);this.onLoginError(t,e,o)}else t&&t.api_error_code&&Object(_.a)(`google_connect_button.failed_login.${t.api_error_code}.${n}`),t.api_error_code===r.a.POLICY_VIOLATION_USER&&this.props.onLoginWithSuspended?this.props.onLoginWithSuspended():Object(A.a)(c.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc."))});else{const t=e?e.error:"unknown";Object(_.a)(`unauth_web.google_connect.failure.${String(t)}.${n}`)}}),N(this,"onLoginSuccess",()=>{const{showResponseMessageModal:e}=this.props;e?e(!1):u.c.handleRedirect(this.props.nextUrlParam||window.location.pathname)}),N(this,"shouldRequireAge",()=>{const{country:e}=this.context,{requestContext:t}=this.props;if(Object(P.e)(e)||Object(P.d)(e))return!0;const o=Object(P.c)(e)&&new I.c(t,"web_age_collection_expansion_markets").enabled(),n=new I.c(t,"web_age_collection_expansion_row").enabled();return o||n}),N(this,"handleGoogleConnectButtonClick",()=>{l.a.get(e=>{Object(T.a)(e=>Object(_.a)(`unauth_web.google_connect.init.${e}`)).then(t=>{q()&&this.setState({showGoogleSigninWebview:!0}),Object(C.a)(this.props.requestContext)&&(Object(_.a)(`unauth_web.google_connect.init.${G}`),t.signIn({scope:D}).then(t=>{Object(_.a)(`unauth_web.google_connect.success.${G}`);const o={...t.getAuthResponse(),code:"",status:{signed_in:!0}};this.onSignInCallback(o,!1,e,G)},({error:e})=>{Object(_.a)(`unauth_web.google_connect.failure.${String(e)}.${G}`)}))},e=>{Object(_.a)("unauth_web.google_connect.error.auth2_sdk_init_error")}).catch(e=>{Object(_.a)(`unauth_web.gapi_auth2_load.error.${e||"unknown"}`),Object(A.a)(c.a._("Sorry, you need to select an account if you want to log in with Google.","error message when user failed to login/signup because they did not complete the Google step."))})})}),N(this,"handleOnDimisssWindowsPWAWebview",()=>{this.setState({showGoogleSigninWebview:!1})}),N(this,"handleOnErrorWindowsPWAWebview",()=>{this.setState({showGoogleSigninWebview:!1}),Object(A.a)(c.a._("Sorry, there was an error signing in with Google.","error message when user failed to login/signup using Google sign-in."))}),N(this,"handleSignupSuccess",()=>{const{disablePostSignupNextUrl:e,nextUrlParam:t,showResponseMessageModal:o}=this.props;this.contextLogSignupLoginEvent(7487),o?o(!0):u.c.handleSignupRedirect(t,e)}),N(this,"handleSignupFailure",()=>{this.contextLogSignupLoginEvent(7488)}),N(this,"renderTooltip",e=>e?i.a.createElement("div",{style:M.tooltip},i.a.createElement(m.a,{message:e})):null)}componentDidMount(){"undefined"!=typeof window&&(window.googleOnSignInCallbacks?window.googleOnSignInCallbacks.push(this.onSignInCallback):window.googleOnSignInCallbacks=[this.onSignInCallback]),this.readyForConnect=!1,this.autoLogin=!1,q()||l.a.get(e=>{this._googleCallback(e)}),window.googleConnectButtonContainer=this.props.container?this.props.container:"",this.setState({inGoogleButtonColorChangeExp:new I.c(this.props.requestContext,"mweb_web_unauth_google_button_color_change").enabled()})}componentWillUnmount(){if("undefined"!=typeof window&&window.googleOnSignInCallbacks){const e=window.googleOnSignInCallbacks.indexOf(this.onSignInCallback);e>=0&&window.googleOnSignInCallbacks.splice(e,1)}delete window.googleConnectButtonContainer}onLoginError(e,t,o){const{onSocialConnectVerified:n,requestContext:i,showSignupWelcomeLoadingFn:a,showResponseMessageModal:s}=this.props,r={gplus_code:t.code,gplus_id_token:t.id_token,gplus_redirect_uri:W,...void 0!==t.first_name?{gplus_first_name:t.first_name}:{}},l={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};if(n&&this.shouldRequireAge())return void n(P.a.GOOGLE,{},{...r,...l});const c=new I.c(i,"web_unauth_gplus_welcome_v2").enabled();i.experiments.flush(),!s&&a&&c&&a(!0),b.a.register({...r,...l,recapToken:null}).then(this.handleSignupSuccess,this.handleSignupFailure)}_googleCallback(e){Object(C.a)(this.props.requestContext)||e.signin.render(this.googleButton,{scope:D,clientid:h.a.settings.GPLUS_CLIENT_ID,apppackagename:h.a.settings.GPLUS_APP_PACKAGE_NAME,redirecturi:W,accesstype:"offline",cookiepolicy:"single_host_origin",callback:function(t){this.readyForConnect&&window.googleOnSignInCallbacks&&window.googleOnSignInCallbacks[window.googleOnSignInCallbacks.length-1]&&window.googleOnSignInCallbacks[window.googleOnSignInCallbacks.length-1](t,this.autoLogin,e),this.readyForConnect=!0,this.autoLogin=!1}.bind(this)})}contextLogSignupLoginEvent(e){const{viewer:t}=this.props;t.isAuth?Object(j.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:3}):Object(j.a)(e,{signup_login_method:3})}login(e){const t={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};return Object(d.a)(e,t,this.props.requestContext.seoUnauthExperiments,this.props.isAccountSwitch)}logo(e){return i.a.createElement("svg",{height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),i.a.createElement("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),i.a.createElement("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),i.a.createElement("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),i.a.createElement("path",{d:"M20 20h472v472H20V20z"})))}render(){const{buttonText:e,inline:t,styleOverrides:o}=this.props,{showGoogleSigninWebview:n,inGoogleButtonColorChangeExp:a}=this.state;let r=M.button;t&&(r={...r,width:"48%",display:"inline-block"}),o&&o.button&&(r={...r,...o.button});const l={...M.icon,...o&&o.icon||{}},d={...M.text,...o&&o.text||{}},u=e||c.a._("Continue with Google");return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{id:"googleConnectButton",buttonRef:e=>{this.googleButton=e},className:"GoogleConnectButton",onClick:this.handleGoogleConnectButtonClick,styleOverrides:{backgroundColor:a?"#EFEFEF":"#4285f4",...r},type:"button"},i.a.createElement("div",{style:{backgroundColor:a?"transparent":"#fff",...l}},i.a.createElement("div",{style:M.iconContainer},this.logo(20))),i.a.createElement("span",{style:{color:a?"#333333":"#fff",...d}},u),this.renderTooltip(this.props.tooltip)),n&&q()&&i.a.createElement(x,{onDismiss:this.handleOnDimisssWindowsPWAWebview,onError:this.handleOnErrorWindowsPWAWebview,onSignInCallback:this.onSignInCallback}))}}N(z,"defaultProps",{inline:!1});z.contextTypes={country:g.a.string,hybridTier:g.a.string,pageType:g.a.string};t.b=Object(L.compose)(F.e,Object(a.connect)(e=>({viewer:e.viewer})),B.withRouter)(z)},DrcS:function(e,t,o){var n=o("gxu6"),i=o("dg5e"),a=o("JW66"),s=o("+NLT"),r=o("m2Wt"),l=o("h4v/");var c=o("zpPL");var d=o("Ye/N"),u=o("E+oP"),p=o.n(u),g=o("7LcF"),h=o("eOdZ"),m=o("eqAH"),_=o("pDoi"),b=o("kmwA"),w=o("BlMG"),f=o("zwad"),E=o("mBfy"),k=o("fAMq"),y=o("VL22"),S=o("CzMn"),O=o("53sj");const x=g.a.getLogger("AuthHandshake"),C=g.a.getLogger("UserRegistration");let v=0;const L=(e,t)=>{Object(w.a)(`web_cross_domain_register.${e}.${Object(y.b)(t)}`)},R={register(e){const t={...e},o=_.b.localStorage.getItem("visitedPages");o&&(t.visited_pages=JSON.stringify(o));const n=_.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin");if(n){const e=[];for(const t of n)t.is_shared_pin&&e.push({ts:t.ts,path:t.path,first_pin_image_signature:t.image_signature,is_shared:!0});e&&(t.visited_pages=JSON.stringify(e.concat(o||[])))}if(t.user_behavior_data=Object(S.b)(),R.shouldPerformCrossDomainRegister(t)){if(-1!==b.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(s.a.instance.origin))return Object(w.a)("unauth_cross_domain_register_debugging_counter"),R.crossDomainRegister(t)}return R.getResource(t).callCreate().then(R.onRegisterSuccess.bind(null,t),R.onRegisterError.bind(null,t))},crossDomainRegister:e=>(L("attempt",e),i.default.registerUser(e).then(t=>{R.onRegisterSuccess(e,t);const o=t.data||"";if(o)return L("success_with_token",e),i.default.exchangeTokenAndSetSession(o,!0).then(t=>{L("success_token_exchanged",e),x.debug("Cross domain register successful")},t=>{throw L("success_token_not_exchanged",e),x.error("Failed to set session for current user; "+t.message),t});{L("success_without_token",e),x.error("No custom access token in cross domain register response");const t=d.a._("We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue.");throw new Error(t)}},t=>{L("failure",e),x.error("Failed to register new user; "+t.message),R.onRegisterError(e,t)})),onRegisterSuccess:(e,t)=>(Object(O.a)("signup"),n.c("galae"),n.c("fbalae"),C.debug("Login, successful",t),Object(m.a)(),n.b("ujr","1"),R.trackRegister(e),t),onRegisterError(e,t){if(t.api_error_code===a.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(Object(w.a)("multi_step_set_age_restrict_cookie"),n.b("r_r","1",87600),n.b("_pinterest_pfob","disabled")),(p()(t.api_error_code)||[a.a.API_SERVER_ERROR,a.a.API_REQUEST_TIMEOUT].includes(t.api_error_code))&&v<3)return Object(w.a)(`unauth_web.signup_retry_error.${String(t.api_error_code)}.${String(e.container)}`),v+=1,R.register(e);throw t},trackRegister(e){let t;switch(e.container){case"home_page":t=r.a.fromEventType(1750),Object(w.a)("signup_home_page");break;case"mweb_homepage":t=r.a.fromEventType(1750),Object(w.a)("signup_mweb_home_page");break;case"plain_signup_modal":t=r.a.fromEventType(1751),Object(w.a)("signup_plain_modal");break;case"closeup_signup_modal":t=r.a.fromEventType(1752),Object(w.a)("signup_closeup_modal");break;case"widescreen_signup_modal":t=r.a.fromEventType(1753),Object(w.a)("signup_widescreen_modal");break;case"pinit_button_landing":t=r.a.fromEventType(1755),Object(w.a)("signup_pinit_button_landing");break;case"inspired_banner":Object(w.a)("signup_inspired_banner");break;case"category_jump_banner":Object(w.a)("signup_category_jump_banner");break;case"send_pin_banner":t=r.a.fromEventType(1756),Object(w.a)("send_pin_banner");break;default:t=r.a.fromEventType(1754),Object(w.a)("signup_unknown_placement")}const o=e.container||"container_unknown";Object(w.a)("signup.container."+o);const n=e.signupSource||"signupSource_unknown";Object(w.a)("signup.source."+n),t&&l.a.getInstance().addEvent(t);const i=document.referrer;let a;a=i?i.indexOf("/t.co/")>-1?"twitter":i.indexOf("google.")>-1?"google":i.indexOf("bing.")>-1?"bing":i.indexOf("facebook.")>-1?"facebook":"other":"direct",Object(w.a)("signup_referrer."+a);const d=f.a.getQueryStringParams().referrer||function(){const e=c.a.instance.getState().ui.mainComponent.initial;return e?e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase():null}();Object(w.a)("signup_referrer_module."+String(d));const u=s.a.instance.user_agent_platform;"ios"===u?Object(w.a)("signup_mweb.iphone_web"):"ipad"===u?Object(w.a)("signup_mweb.ipad_web"):"android"===u&&Object(w.a)("signup_mweb.android_web");const p=e.hybridTier||"tier_unknown",g=e.page||"page_unknown",h=Object(y.b)(e);Object(w.a)(`web_signup.${h}.success.${g}.${o}.${a}.${p}`)},getResource:e=>h.a.create("UserRegisterResource",e),attemptFacebookRegistration:(e,t=!1)=>R.verifyFacebookEmailExists(t).then(o=>{if(!o.email&&!t)return Promise.reject({error:new Error("Email required to sign up."),socialConnectData:o});const n=R.buildFacebookRegistrationResourceOptions(o);return R.register({...n,...e})}),verifyFacebookEmailExists:e=>R.fetchFacebookUserData().then(t=>t.email||e?Promise.resolve(t):Promise.reject({error:new Error("Email required to sign up."),socialConnectData:t})),buildFacebookRegistrationResourceOptions:e=>({first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.image_url,facebook_id:e.id,facebook_token:e.access_token||"",birthday:String(Object(k.d)(e.birthday||""))}),fetchFacebookUserData:()=>(()=>Promise.resolve().then(o.bind(null,"UTsl")))().then(({default:e})=>new Promise((t,o)=>{e.ensureInit(e=>{e.getLoginStatus(n=>{if(!n.authResponse)return o(new Error("not authed"));const i="/me?fields="+["picture.type(large)","id","first_name","last_name","email","gender","birthday"].join(",");e.api(i,e=>!e||e.error?o(new Error("FB.api errored: "+e.error)):(e.picture&&e.picture.data&&e.picture.data.url&&!e.picture.data.is_silhouette&&(e.image_url=e.picture.data.url),t(e)))},!0)},E.default)})),shouldPerformCrossDomainRegister:e=>!(e.facebook_id||e.gplus_code||e.gplus_id_token||e.google_open_id_token)&&!!e.email};t.a=R},DtEZ:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("i8i4"),s=o("pz/u"),r=["gmail.com","hotmail.com","hotmail.com.ar","yahoo.com.ar","live.com.ar","outlook.com","live.com","bigpond.com","yahoo.com","icloud.com","yahoo.com.au","yahoo.com.br","bol.com.br","yahoo.ca","hotmail.ca","web.de","gmx.de","t-online.de","hotmail.de","hotmail.es","yahoo.es","hotmail.fr","orange.fr","yahoo.fr","live.fr","free.fr","laposte.net","wanadoo.fr","outlook.fr","hotmail.co.uk","rediffmail.com","yahoo.co.in","yahoo.in","libero.it","hotmail.it","alice.it","yahoo.co.jp","ezweb.ne.jp","docomo.ne.jp","i.softbank.jp","softbank.ne.jp","live.com.mx","outlook.es","aol.com","outlook.com","comcast.net"],l=o("/MKj");const c="gmail.com",d="yahoo.com",u="hotmail.com",p={AR:[c,u,"yahoo.com.ar"],AU:[c,u,"bigpond.com"],BR:[c,u,"yahoo.com.br"],CA:[c,u,d],DE:[c,"web.de","gmx.de"],ES:[c,u,"hotmail.es"],FR:[c,"hotmail.fr","orange.fr"],GB:[c,"hotmail.co.uk","hotmail.com"],IN:[c,d,"rediffmail.com"],IT:[c,"libero.it","hotmail.it"],JP:[c,"yahoo.co.jp","ezweb.ne.jp"],MX:[c,u,"outlook.com"],US:[c,u,d],DEFAULT:[c,u,d]};var g=o("n6mq");const h={emailSuggestionDropdown:{border:"1px solid rgb(181, 181, 181)",zIndex:1}};var m=Object(l.connect)(({viewer:e})=>({country:e.country||""}))(e=>{const{country:t,email:o,emailFieldElement:n,handleEmailSuggestionClick:a,showUsername:s}=e,r=function(e){return e&&e.toUpperCase()in p?p[e.toUpperCase()]:p.DEFAULT}(t);let l=window.innerWidth-32;return n&&(l=n.getBoundingClientRect().width),i.a.createElement(g.c,{color:"white",dangerouslySetInlineStyle:{__style:h.emailSuggestionDropdown},direction:"column",display:"flex",position:"absolute",width:l},r.map(e=>{const t=(o||"").concat(e),n=s?t:e;return i.a.createElement(g.c,{key:n},i.a.createElement("div",{role:"button",onMouseDown:()=>{a(t)},tabIndex:0},i.a.createElement(g.c,{paddingX:3,paddingY:2},i.a.createElement(g.K,null,n))))}))}),_=o("Ye/N"),b=o("0/lC"),w=o("mt4P"),f=o("BlMG"),E=o("XCz/"),k=o("vvax"),y=o("1kvE"),S=o("pLLR");function O(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const x={captcha:{marginTop:"16px",transform:"scale(0.88)",transformOrigin:"0 0"},signupButton:{width:"100%"},wrapperVisible:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",display:"flex",opacity:1,alignItems:"center",justifyContent:"space-between",height:"100%"},wrapperHidden:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",pointerEvents:"none",display:"none",opacity:0}};t.a=Object(S.e)(class extends n.Component{constructor(...e){super(...e),O(this,"state",{domainError:"",emailFieldElement:null,newEmail:"",showAgeInput:this.props.showAgeInput,showEmailDomainSuggestions:!1}),O(this,"updateEmail",()=>{const{onEmailChange:e,onTypoSuggestionClick:t}=this.props;this.state.newEmail&&(e({target:{value:this.state.newEmail}}),t(),Object(f.a)("unauth.email_domain_typo_suggestion.clicked"))}),O(this,"getEmailFieldElement",()=>{const e=Object(a.findDOMNode)(this.emailTextFieldRef);return e&&e instanceof HTMLElement?e.querySelector("input"):null}),O(this,"handleEmailChange",e=>{const{onEmailChange:t}=this.props,{showEmailDomainSuggestions:o}=this.state;if(t&&t(e),e&&e.target&&e.target.value)if(o)this.setState({showEmailDomainSuggestions:!1});else if(e.target.value.endsWith("@")){const e=this.getEmailFieldElement();this.setState({showEmailDomainSuggestions:!0,emailFieldElement:e})}}),O(this,"handleEmailSuggestionClick",e=>{const{onEmailChange:t}=this.props;Object(f.a)("web_unauth_email_suggestions.signup_modal.click"),this.setState({showEmailDomainSuggestions:!1}),t({target:{value:e}})}),O(this,"handleEmailBlur",()=>{const{checkEmailExistsWithCompletion:e,email:t,handleExistingEmail:o,isSignupForm:n,onEmailBlur:i}=this.props,{showAgeInput:a,showEmailDomainSuggestions:s}=this.state;i&&i(),s&&this.setState({showEmailDomainSuggestions:!1}),t&&t.length>0&&e&&e(t,()=>{n&&Object(f.a)("web.unauth.signup.email_entered"),n&&a&&this.setState({showAgeInput:!1}),o&&o(!0)},()=>{n&&!a&&this.setState({showAgeInput:!0}),o&&o(!1)});const l=t&&-1!==t.indexOf("@")?t.split("@"):[];if(t&&t!==this.state.newEmail||this.setState({domainError:""}),t&&l&&t.length<60){if(2===l.length){const e=l[1],t=e&&-1!==e.indexOf(".")?e.split("."):[];if(t.length>=2&&"gmail"===t[0])if("com"!==t.slice(1).join(".")){const e=l[0]+"@gmail.com";this.setEmailTypoSuggestion(e)}else this.setState({domainError:""})}const e=l[1]&&r.includes(l[1])?null:l[1]&&r.map(e=>{const t=Object(b.a)(e,l[1]);return 2===t||1===t?e:null}).filter(e=>"string"==typeof e);if(e&&e.length){const t=e[0]?`${l[0]}@${e[0]}`:"";this.setEmailTypoSuggestion(t)}}}),O(this,"renderDefaultLoginButton",(e,t)=>{const{email:o,buttonText:i,buttonTextLabel:a,password:r}=this.props;return n.createElement("div",{"data-test-id":"registerFormSubmitButton",onClick:t?()=>Object(y.a)(`login_click_${e?"disabled":"enabled"}`,o,r):()=>{}},n.createElement(s.a,{accessibilityLabel:a,className:"red SignupButton",disabled:e,styleOverrides:x.signupButton,type:"submit"},n.createElement("div",null,i)))}),O(this,"renderMagicLinkButton",e=>{const{buttonTextLabel:t,email:o,handleMagicLinkClick:i,magicLinkLoading:a,password:r}=this.props;return n.createElement("div",{onClick:()=>Object(y.a)(`passwordless_click_${e?"disabled":"enabled"}`,o,r)},n.createElement(s.a,{accessibilityLabel:t,className:"red SignupButton",disabled:e,loading:a,styleOverrides:x.signupButton,onClick:i},n.createElement(g.c,null,_.a._("Log in without password","text on button allowing users to get an email to login"))))})}static getDerivedStateFromProps(e,t){return e.email===t.newEmail?{domainError:"",newEmail:""}:null}setEmailTypoSuggestion(e){const t=Object(k.b)(_.a._("Did you mean {{ newEmail }}?"),{newEmail:n.createElement(g.K,{color:"red",inline:!0,key:"err_text",size:"sm",weight:"bold"},e)});this.setState({domainError:t,newEmail:e}),this.props.email===e?this.setState({domainError:""}):Object(f.a)("unauth.email_domain_typo_suggestion.shown")}renderLoginButtons(){const{email:e,magicLinkGroup:t}=this.props,o=this.props.disableEmailLogin||!1,i=""!==this.props.password,a=this.renderDefaultLoginButton(o||!i,!0),s=this.renderMagicLinkButton(i||""===e);return t&&t.startsWith("enabled_login_primary")?n.createElement(g.c,null,a,s):t&&t.startsWith("enabled_magic_link_primary")?n.createElement(g.c,null,s,a):t&&t.startsWith("enabled_inactive_login")?a:this.renderDefaultLoginButton(o)}render(){const{age:e,ageValidationError:t,disableEmailLogin:o,email:i,emailFieldHasError:a,emailLabel:s,emailText:r,emailValidationError:l,hideEmailField:c,hideFacebookButton:d,hideGoogleButton:u,hidePasswordField:p,inputStyleOverrides:h,onAgeBlur:b,onAgeChange:f,onButtonClick:k,onPasswordChange:y,password:S,passwordFieldVisible:O,passwordText:C,passwordValidationError:v,renderPasswordResetLink:L,suppressFocus:R}=this.props,{emailFieldElement:T,showEmailDomainSuggestions:A}=this.state;let I=x.wrapperVisible;!1===O&&(I=x.wrapperHidden);let j=l;return j||!p&&!o||(d||u?!d&&u?j=_.a._("Your account is connected to Facebook - use the Facebook button to log in","Customized desktop login for users with Facebook"):d&&!u&&(j=_.a._("Your account is connected to Google - use the Google button to log in","Customized desktop login for users with Google")):j=_.a._("Your account is connected to Facebook and Google - use the buttons to log in","Customized desktop login for users with FB and Google")),n.createElement("form",{"data-test-id":"registerForm",method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),k(e)}},!c&&n.createElement(g.c,{"data-test-id":"emailInputField"},n.createElement(w.a,{accessibilityLabel:s,autoComplete:"username",fieldsetStyleOverrides:{marginBottom:"7px"},focused:!R,hasError:!A&&(!!l||a),domainError:!A&&this.state.domainError,id:"email",inputStyleOverrides:h,name:"id",onBlur:this.handleEmailBlur,onChange:this.handleEmailChange,placeholder:r,ref:e=>{this.emailTextFieldRef=e},tooltip:!A&&j,type:"email",value:i,updateEmail:this.state.domainError?this.updateEmail:null,useExperimentalTextfield:!0,useGestalt:!0})),!c&&A&&n.createElement(E.a,{name:"web_unauth_email_suggestions"},({group:e})=>["enabled","enabled_username","employees"].includes(e)&&n.createElement(n.Fragment,null,n.createElement(m,{email:i,emailFieldElement:T,handleEmailSuggestionClick:this.handleEmailSuggestionClick,showUsername:"enabled_username"===e}))),!p&&n.createElement(n.Fragment,null,n.createElement(g.c,{"data-test-id":"passwordInputField"},n.createElement(w.a,{autoComplete:"new-password",disabled:o,hasError:!!v,id:"password",inputStyleOverrides:{...h,...I},name:"password",onChange:y,placeholder:C,tooltip:v,type:"password",value:S,useExperimentalTextfield:!1,useGestalt:!0})),L?L():null),!p&&this.state.showAgeInput?n.createElement(g.c,{"data-test-id":"ageInputField"},n.createElement(w.a,{accessibilityLabel:"age",autoComplete:"off",dataTestId:"ageInputField",fieldsetStyleOverrides:{marginTop:"4px"},hasError:!!t,id:"age",inputStyleOverrides:{...h},name:"age",onBlur:b,onChange:f,placeholder:_.a._("Age"),tooltip:t,type:"text",value:e,useExperimentalTextfield:!0,useGestalt:!0})):null,window.recaptchaCount>0?n.createElement("div",{id:`recaptcha_placeholder_${window.recaptchaCount}`,className:"g-recaptcha",style:x.captcha}):null,!p&&this.renderLoginButtons())}})},F3od:function(e,t,o){var n=o("q1tI"),i=o("Q0dO"),a=o("n6mq");t.a=class extends n.Component{render(){const{description:e,error:t,id:o,label:s,required:r=!1,onLabelTouch:l,...c}=this.props;return n.createElement(i.a,{description:e,error:t,id:o,label:s,required:r,onLabelTouch:l},n.createElement(a.M,{...c,hasError:!!t,id:o,ref:e=>{this.textfield=e?e.textfield:null}}))}}},H3gn:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("xdpg"),s=o("Ye/N"),r=o("17x9"),l=o.n(r),c=o("kmwA");const d={tosContainer:{marginTop:"16px"},tosCommon:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear"},tosLarge:{color:"#333",fontSize:"12px",lineHeight:"12px"},tosDark:{color:"#8e8e8e",width:"224px"},tosLight:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"}};function u(e,t){const o=c.a.settings.EU_COUNTRIES;let n={...d.tosCommon,...d.tosDark};e.dark||(n={...d.tosCommon,...d.tosLight});let r,l=e.noContainer?{}:d.tosContainer;return e.dynamicTopMargin&&(l={...l,marginTop:"3%"}),e.disableWordBreak&&(l={...l,hyphens:"none"}),e.large&&(n={...n,...d.tosLarge}),r=o.indexOf(t.country)>-1?a.c(s.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}">Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}">Privacy Policy</a> and <a href="{{ cookie_url }}"> Cookie use</a>.'),{tos_url:c.a.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:c.a.settings.ABOUT_PRIVACY_PLAIN_URL,cookie_url:c.a.settings.ABOUT_COOKIE_URL}):a.c(s.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}" target="_blank" >Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}" target="_blank">Privacy Policy</a>'),{tos_url:c.a.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:c.a.settings.ABOUT_PRIVACY_PLAIN_URL}),i.a.createElement("div",{style:l},i.a.createElement("span",{className:e.dark?"":"TermsOfService__light",style:n},i.a.createElement("span",{dangerouslySetInnerHTML:{__html:r}})))}u.contextTypes={country:l.a.string.isRequired},t.a=u},IRjL:function(e,t,o){o.d(t,"a",(function(){return n}));const n=(e,t)=>{(e=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("handleErrorMessage",!0,!0,e),window.dispatchEvent(t)})({message:e,href:t})}},"LSg/":function(e,t,o){var n=o("sgOq"),i=o("eOdZ"),a=o("U4JR");t.a=({usernameOrEmail:e,logOptions:t,callBack:o,ErrorCallback:s})=>{t&&Object(a.a)(n.a.requestEnd,t),i.a.create("UserResetPasswordResource",{username_or_email:e}).callCreate({showError:!1}).then(e=>{t&&Object(a.a)(n.a.request,t),o&&o()},e=>{s&&s(e)})}},"N9+J":function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/MKj"),s=o("pz/u"),r=o("JW66"),l=o("Ev07"),c=o("hQGS"),d=o("Ye/N"),u=o("x/Ro"),p=o("NSVK"),g=o("17x9"),h=o.n(g),m=o("TN0d"),_=o("/MAO"),b=o("IRjL"),w=o("BlMG");const f=()=>Promise.resolve().then(o.bind(null,"UTsl"));class E{connect(e,t){if(Object(w.d)(`unauth_web.social_connect.${e}`),window.addEventListener("message",e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&this.complete(e.data)}),t.rerequest_facebook_email)f().then(({default:e})=>{e.ensureInit(e=>{e.login(e=>{const o=e.authResponse;let n,i;o&&((n=o.grantedScopes)&&(n=n.split(",")),i=o.userID);const a=n.indexOf("email")>-1,s={id:i};"connected"===e.status&&a?t.success(s):t.error(s),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},_.a)});else{const o=this.getWindowOptions(),n=window.open("/connect/"+e+"/","",o);if(!n)return Object(b.a)(d.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});const i=setInterval(()=>{n.closed&&(clearInterval(i),this.handleComplete({network:e,error_message:"Window closed."}))},1e3);m.a.instance.subscribe("site","socialConnectCompleted",(e,o,n)=>{clearInterval(i),n.error_message?t.error(n):t.success(n),"complete"in t&&t.complete()})}}getWindowOptions(){const e=screen.width,t=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=580,height=400,left="+Math.round((e-580)/2)+",top="+(t>400?Math.round((t-400)/2):0)}complete(e){this.handleComplete(e)}handleComplete(e){if("facebook"===e.network){const t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}m.a.instance.publish("site","socialConnectCompleted",e)}}var k=o("kmwA"),y=o("zUH3"),S=o("DrcS"),O=o("liz/"),x=o("fArA"),C=o("a0jO"),v=o("n6mq"),L=o("fAMq"),R=o("U4JR"),T=o("dtw8"),A=o("2hay"),I=o("VL22"),j=o("pLLR"),B=o("37no"),P=o("/5zs");function F(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return M}));const N={button:{backgroundClip:"padding-box",backgroundColor:"#1877F2",borderRadius:"8px",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%"},container:{position:"relative"},tooltip:{top:"12px",left:"100%",position:"absolute"},text:{color:"#fff",display:"inline-block",fontFamily:C.b,fontSize:"15px",fontWeight:"bold",letterSpacing:"normal",lineHeight:"16px",paddingLeft:"4px",paddingTop:"1px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},fbProfileButton:{height:"40px",textAlign:"left"}},M="facebook",W=18,D=100;class U extends n.Component{constructor(...e){super(...e),F(this,"getContainerName",()=>{let e;return window.fbConnectButtonContainerStack&&window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]&&(e=window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]),e}),F(this,"inAgeCollectionExpsNoActivation",e=>{const{requestContext:t}=this.props,o=new P.b(t,"web_age_collection_expansion_markets"),n=Object(I.c)(e)&&(o.checkWithNoActivation("enabled")||o.checkWithNoActivation("control")||o.checkWithNoActivation("employees")),i=new P.b(t,"web_age_collection_expansion_row"),a=i.checkWithNoActivation("enabled")||i.checkWithNoActivation("control")||i.checkWithNoActivation("employees");return n||a}),F(this,"inAgeCollectionEnabled",e=>{const{requestContext:t}=this.props,o=new P.c(t,"web_age_collection_expansion_markets"),n=Object(I.c)(e)&&o.enabled(),i=new P.c(t,"web_age_collection_expansion_row").enabled();return t.experiments.flush(),n||i}),F(this,"profilePicButtonConnectSuccess",e=>{const{container:t,handlePostSuccessConnect:o,isAccountSwitch:n,loadingIndicatorCallback:i,onLoginWithMfa:a,onLoginWithSuspended:s,preventRegister:l,requestContext:{seoUnauthExperiments:c},isBusiness:p=!1}=this.props;i&&i(!0);const g={facebook_id:e.userID,facebook_token:e.accessToken},h={container:this.getContainerName(),hybridTier:this.context.hybridTier,page:this.context.pageType,is_business:p};Object(u.a)(g,h,c,n).then((e={})=>{if(n&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const o=e.resource_response.data.user;Object(O.b)(o,M,t)}Object(w.d)("login.facebook"),this.contextLogSignupLoginEvent(7536),this.navigateAfterLogin(),o&&o()},e=>{if(this.contextLogSignupLoginEvent(7535),e.api_error_code===r.a.LOGIN_MFA_REQUIRED)i&&i(!1),Object(w.d)("login.facebook"),a&&a(g,e.data);else if(e.api_error_code===r.a.LOGIN_USER_NOT_FOUND||e.api_error_code===r.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(l)return void l(M);this.profilePicButtonRegisterWithFacebook(e,g,h)}else e&&e.api_error_code&&Object(w.a)(`facebook_button.failed_login_${e.api_error_code}`),e&&e.api_error_code===r.a.POLICY_VIOLATION_USER&&s?s():Object(b.a)(d.a._("Sorry, we can't log you in."))}),this.contextLogSignupLoginEvent(7534)}),F(this,"statusChangeCallback",e=>{let t="";"connected"===e.status?(Object(w.a)("web.facebook_connect_button.login_status.connected"),this.profilePicButtonConnectSuccess(e.authResponse),t="success"):"not_authorized"===e.status?(Object(w.a)("web.facebook_connect_button.cancel.not_authorized"),Object(b.a)(d.a.commonStrings.connectError),t="not_authorized"):(Object(w.a)("web.facebook_connect_button.cancel.unknown"),Object(b.a)(d.a.commonStrings.connectError),t="other_error");const{handlePostConnectClick:o}=this.props;o&&o(t)}),F(this,"handleConnectClick",()=>{Object(w.a)("fallback_facebook_button.click");const e=new E;return Object(w.d)("login.facebook_connect.attempt"),e.connect(I.a.FACEBOOK,{success:e=>{this.onFacebookConnectSuccess(e)},error:e=>{e.alertedUpstream||Object(b.a)(d.a.commonStrings.connectError)},rerequest_facebook_email:this.rerequestFacebookEmail}),!1}),F(this,"profilePicButtonRegisterWithFacebook",(e,t,o)=>{const{country:n}=this.context,{disablePostSignupNextUrl:i,loadingIndicatorCallback:a,nextUrlParam:s,onFBPhoneOnlyConnectVerified:r,onFBEmailDeniedPerm:l,onSocialConnectVerified:c,requestContext:u,showSignupWelcomeLoadingFn:g,showResponseMessageModal:h}=this.props,m=()=>{a&&a(!1),e?(this.contextLogSignupLoginEvent(7488),Object(b.a)(d.a._("Email required for registration."))):this.navigate("/join/register/facebook/")},_=e=>{if(r&&e.socialConnectData&&!e.socialConnectData.email){const n=Object.assign({},t,o);r(I.a.FACEBOOK,e.socialConnectData,n)}else e.socialConnectData&&!e.socialConnectData.email?Object(A.b)("email").then(({hasPerm:e})=>{!e&&l?l():m()},m):m()},w=e=>{this.contextLogSignupLoginEvent(7487);const{showResponseMessageModal:t}=this.props;t?t(!0):p.c.handleSignupRedirect(s,i)},f=this.inAgeCollectionExpsNoActivation(n),E=Object(I.e)(n)||Object(I.d)(n);c&&(E||f)?S.a.verifyFacebookEmailExists().then(e=>{if(!e.email)return void S.a.attemptFacebookRegistration({...t,...o}).then(w,_);const i=!E&&!e.birthday&&this.inAgeCollectionEnabled(n);if(E||i)if(E&&e.birthday&&Object(L.f)(e.birthday,W)){const e=new P.c(u,"web_unauth_fb_welcome_v2").enabled();u.experiments.flush(),!h&&g&&e&&g(!0),S.a.attemptFacebookRegistration(Object.assign({},t,o)).then(w,_),this.contextLogSignupLoginEvent(7537)}else{a&&a(!1);const n=Object.assign({},t,o);c(I.a.FACEBOOK,e,n)}else S.a.attemptFacebookRegistration({...t,...o}).then(w,_)},_):S.a.attemptFacebookRegistration({...t,...o}).then(w,_)}),F(this,"registerWithFacebook",(e,t,o)=>{const{country:n}=this.context,{disablePostSignupNextUrl:i,nextUrlParam:a,onSocialConnectVerified:s,onFBPhoneOnlyConnectVerified:r}=this.props,l=n=>{if(this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),r&&n.socialConnectData&&!n.socialConnectData.email){const e=Object.assign({},o,t);r(I.a.FACEBOOK,n.socialConnectData,e)}else e?(this.contextLogSignupLoginEvent(7488),this.rerequestFacebookEmail=!0,Object(b.a)(d.a._("Email required for registration."))):this.navigate("/join/register/facebook/")};s&&Object(I.e)(n)?S.a.verifyFacebookEmailExists().then(e=>{s(I.a.FACEBOOK,e,t)},l):(S.a.attemptFacebookRegistration(t).then(()=>{this.contextLogSignupLoginEvent(7487);const{showResponseMessageModal:e}=this.props;e?e(!0):p.c.handleSignupRedirect(a||window.location.pathname,i)},l),this.contextLogSignupLoginEvent(7537))}),F(this,"navigateAfterLogin",()=>{const{showResponseMessageModal:e}=this.props;e?e(!0):p.c.handleRedirect(this.props.nextUrlParam||window.location.pathname)}),F(this,"renderTooltip",e=>e?this.props.useGestaltTooltip?i.a.createElement(c.a,{anchor:this._fallbackButton,message:e}):i.a.createElement("div",{style:N.tooltip},i.a.createElement(y.a,{message:e})):null)}handleMessageEvent(e){Object(A.f)(e,e=>Object(w.a)(`unauth_web.${e}`))}componentDidMount(){"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=this.checkLoginState,window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1,window.addEventListener("message",this.handleMessageEvent,!1));const{userAgent:e}=this.context;if("ios"!==e.platform&&"ipad"!==e.platform)setTimeout(()=>{window.__branchRedirectToStore||!window.__branchPinterestStarted?this.initializeFB():window.onbeforeunload=()=>{window.__branchRedirectToStore&&this.initializeFB()}},50);else if(1!==window.fb_init&&2!==window.fb_init)this.initializeFB();else if(2===window.fb_init&&window.FB.XFBML)window.FB.XFBML.parse();else{const e=setInterval(()=>{2===window.fb_init&&window.FB.XFBML&&(window.FB.XFBML.parse(),clearInterval(e))},D)}this.props.isRerequest&&(this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.props.showSignupWelcomeLoadingFn&&this.props.showSignupWelcomeLoadingFn(!1))}componentDidUpdate(){window.nextUrlParam=this.props.nextUrlParam}componentWillUnmount(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){const e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam),window.removeEventListener("message",this.handleMessageEvent)}}onFacebookConnectSuccess(e){const{preventRegister:t,container:o,isBusiness:n=!1,requestContext:{seoUnauthExperiments:i}}=this.props;Object(w.d)("login.facebook_connect.success");const a={facebook_id:e.id,facebook_token:e.access_token},s={container:o,hybridTier:this.context.hybridTier,page:this.context.pageType,is_business:n};Object(u.a)(a,s,i).then(()=>{Object(w.d)("login.facebook"),this.contextLogSignupLoginEvent(7536),this.navigateAfterLogin()},e=>{if(this.contextLogSignupLoginEvent(7535),e.api_error_code===r.a.LOGIN_MFA_REQUIRED)Object(w.d)("login.facebook"),this.props.onLoginWithMfa&&this.props.onLoginWithMfa(a,e.data);else if(e.api_error_code===r.a.LOGIN_USER_NOT_FOUND||e.api_error_code===r.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(t)return void t(M);this.registerWithFacebook(e,s,a)}else e&&e.api_error_code&&Object(w.a)(`facebook_button.failed_login_${e.api_error_code}`),e.api_error_code===r.a.POLICY_VIOLATION_USER&&this.props.onLoginWithSuspended?this.props.onLoginWithSuspended():Object(b.a)(d.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc."))}),this.contextLogSignupLoginEvent(7534)}initializeFB(){const{requestContext:e,requestContext:{seoUnauthExperiments:t}}=this.props;if(null!==this.profilePicButton){const o=(t.v2ActivateExperiment("web_external_script_loader_with_wait")||"").startsWith("enabled");void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():o?Object(B.c)("//connect.facebook.net/"+l.a.getLocaleString(e.locale)+"/sdk.js",B.a.FACEBOOK,!0).then(()=>{window.FB.init({appId:k.a.settings.FACEBOOK_API_KEY,status:!0,xfbml:!0,version:"v2.7"})}):(window.fbAsyncInit=function(){window.FB.init({appId:k.a.settings.FACEBOOK_API_KEY,status:!0,xfbml:!0,version:"v2.7"})},((t,o,n)=>{const i=t.getElementsByTagName(o)[0];if(t.getElementById(n))return;const a=t.createElement(o);a.id=n,a.src="//connect.facebook.net/"+l.a.getLocaleString(e.locale)+"/sdk.js",i.parentNode&&i.parentNode.insertBefore(a,i)})(document,"script","facebook-jssdk"))}}checkLoginState(){window.FB.getLoginStatus((function(e){this.statusChangeCallback(e)}))}contextLogSignupLoginEvent(e){const{viewer:t}=this.props;t.isAuth?Object(R.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:2}):Object(R.a)(e,{signup_login_method:2})}login(e){const{requestContext:{seoUnauthExperiments:t}}=this.props;return Object(u.a)(e,{container:"fbconnectbtn"},t).then(()=>{this.navigateAfterLogin()})}renderProfilePicButtonWithFallback(){const{type:e,isRerequest:t,showFallback:o,styleOverrides:n}=this.props,a='<div class="fb-login-button" '+`data-scope="${A.a.join(",")}" `+'onlogin="checkLoginState"'+`data-button-type="${"login"===e?"login_with":"continue_with"}" `+`data-use-continue-as="${"login"===e?"false":"true"}" `+'data-width="268px"data-size="large"></div>',r='<div class="fb-login-button" '+`data-scope="${A.a.join(",")}" `+'onlogin="checkLoginState"'+`data-button-type="${"login"===e?"login_with":"continue_with"}" `+`data-use-continue-as="${"login"===e?"false":"true"}" `+'data-width="268px"data-auth-type="rerequest"data-size="large"></div>',{buttonText:l,inline:c}=this.props;let u=N.button;c&&(u={...u,width:"48%",display:"inline-block"}),o&&(u={...u,position:"relative"}),n&&n.button&&(u={...u,...n.button});const p={...N.text,...n&&n.text||{}},g=N.fbProfileButton;return i.a.createElement("div",{ref:e=>{this._fallbackButton=e}},i.a.createElement(s.a,{className:"FacebookConnectButton",onClick:this.handleConnectClick,styleOverrides:u,type:"button"},i.a.createElement(v.n,{accessibilityLabel:d.a._("facebook","accessible label for facebook icon"),color:"white",icon:"facebook",inline:!0,size:24}),i.a.createElement("span",{style:p},l)),!o&&i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t?r:a},ref:e=>{this.profilePicButton=e},style:g}))}render(){const{styleOverrides:e}=this.props,t={...N.container,...e&&e.container||{}};return i.a.createElement("div",{style:t},this.renderProfilePicButtonWithFallback(),this.renderTooltip(this.props.tooltip))}}F(U,"contextTypes",{country:h.a.string,userAgent:h.a.shape({browserName:h.a.string.isRequired,platform:h.a.string.isRequired,raw:h.a.string.isRequired}).isRequired,hybridTier:h.a.string,pageType:h.a.string}),F(U,"defaultProps",{inline:!1,showFallback:!1});t.b=Object(x.compose)(j.e,Object(a.connect)(e=>({viewer:e.viewer})),T.withRouter)(U)},Q0dO:function(e,t,o){var n=o("q1tI"),i=o("n6mq");t.a=({children:e,description:t,error:o,id:a,label:s,required:r,onLabelTouch:l})=>n.createElement(i.c,null,n.createElement(i.c,{marginBottom:1},n.createElement(i.q,{htmlFor:a},n.createElement(i.K,{color:o?"red":"darkGray"},s,r&&n.createElement(i.K,{color:"red",inline:!0,weight:"bold"},n.createElement("span",{"aria-hidden":"true"},"*"))))),e,(!!o||!!t)&&n.createElement(i.q,{htmlFor:a},n.createElement(i.c,{marginTop:1},l?n.createElement(i.P,{onTouch:l},n.createElement(i.K,{color:o?"red":"darkGray",size:"sm"},o||t)):n.createElement(i.K,{color:o?"red":"darkGray",size:"sm"},o||t))))},YGR8:function(e,t,o){o.d(t,"a",(function(){return r}));var n=o("q1tI"),i=o.n(n),a=o("Ye/N"),s=o("n6mq");const r=()=>i.a.createElement(s.t,{inline:!0,href:"https://help.pinterest.com/login-request?what_do_you_need_help_with=Getting+into+my+account&tell_more_account_access=Appeal+account+suspension"},a.a._("get in touch with us","link text shown to redirect to help.pinterest.com for appealing a suspension"))},Yhte:function(e,t,o){o.d(t,"a",(function(){return d}));var n=o("q1tI"),i=o("dP5U"),a=o("Ye/N"),s=o("TiQD"),r=o("vvax"),l=o("YGR8"),c=o("n6mq");function d({onClose:e}){const t=a.a._("Your account is suspended for violating our community guidelines. We previously sent you an email explaining why and how to appeal. If you have questions, {{ help_link }}."),o=a.a._("Your account is suspended for violating our community guidelines. If you have questions, {{ help_link }}."),d=t||o;return n.createElement(s.b,{accessibilityCloseLabel:a.a._("close","accessible label for button to close modal"),accessibilityModalLabel:a.a._("Login disabled for suspended account","Modal accessibility label for when a user tries to login with a suspended account"),heading:a.a._("Your account has been suspended","Modal heading for user who have attempted to login with a suspended account"),onDismiss:e,role:"alertdialog",size:"md"},n.createElement(c.c,{paddingX:6,marginBottom:4},n.createElement(c.c,{marginBottom:4},n.createElement(c.K,{inline:!0,leading:"tall"},Object(r.b)(d,{help_link:n.createElement(l.a,{key:"suspended user help_link"})}))),n.createElement(c.c,{marginTop:4},n.createElement(i.a,{color:"red",onClick:e,overrideText:a.a._("Got it","Acknowledge suspended account modal message")}))))}},a2Qh:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("JW66"),s=o("iFas"),r=o("Ye/N"),l=o("dP5U"),c=o("TiQD"),d=o("LSg/"),u=o("n6mq");function p(e){const t=r.a._("Reset password","Request a password reset email");return i.a.createElement(u.d,{accessibilityLabel:t,color:e.color||"red",inline:e.inline,onClick:()=>{Object(d.a)({usernameOrEmail:e.email,callBack:e.callBack})},text:e.overrideText||t})}var g=o("vvax");function h({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityCloseLabel:r.a._("close","accessible label for button to close modal"),accessibilityModalLabel:r.a._("Login with Facebook or Google?","Modal accessibility label for when a user has failed login three times"),heading:r.a._("Looks like you’re having trouble logging in","Modal heading for user who have attempted to login three times"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,null,n.createElement(u.K,null,Object(g.b)(r.a._("We sent an email to {{ email }} to help you get back in.",""),{email:n.createElement(u.K,{inline:!0,key:"emailAddress",weight:"bold"},e)})),n.createElement(u.c,{paddingY:3},n.createElement(p,{inline:!0,color:"gray",email:e,callBack:o,overrideText:r.a._("Resend email","Button to allow the user to request a password reset email")}))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,r.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login"))),i,n.createElement(u.c,{marginTop:4},n.createElement(l.a,{onClick:t}))))}function m({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityCloseLabel:r.a._("close","accessible label for button to close modal"),accessibilityModalLabel:r.a._("Login limit reached","Modal accessibility label for users who have been login rate limited"),heading:r.a._("Oops! Too fast","Modal heading for user who have been login rate limited"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,{marginBottom:4,width:"100%",overflow:"hidden"},n.createElement(u.K,{inline:!0,leading:"tall"},r.a._("It looks like you’re logging in a lot. Log in with Facebook or Google if you’re connected, or reset your password. Or you can wait 30 minutes and try again.","Statement that the users is login limited"))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,r.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login"))),n.createElement(p,{email:e,callBack:o}),i,n.createElement(u.c,{marginTop:4},n.createElement(l.a,{onClick:t,overrideText:r.a._("I’ll wait","Button text acknowledging login rate limiting")}))))}var _=o("N9+J");function b({email:e,loginWith:t,onClose:o,onPasswordResetSent:i,socialButtons:a}){return n.createElement(c.b,{accessibilityCloseLabel:r.a._("close","accessible label for button to close modal"),accessibilityModalLabel:r.a._("No matching account","Modal accessibility label for account recovery"),heading:r.a._("Oops! Something went wrong","Modal heading"),onDismiss:o,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,{marginBottom:6},t===_.a?n.createElement(u.K,null,r.a._("We couldn’t match your Facebook account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login")):n.createElement(u.K,null,r.a._("We couldn’t match your Google account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login"))),n.createElement(p,{email:e,callBack:i}),n.createElement(u.c,{marginTop:2},n.createElement(l.a,{onClick:o}))))}var w=o("kmwA");const f="?source=account_recovery";function E({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){const a=r.a._("Password reset email sent","Modal label for confirmation of password reset send");return n.createElement(c.b,{accessibilityCloseLabel:r.a._("close","accessible label for button to close modal"),accessibilityModalLabel:a,heading:a,onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.K,{overflow:"normal"},Object(g.b)(r.a._("We sent instructions to pick a new password to {{ email }}.","Statement that a password reset email has been sent to the user"),{email:n.createElement(u.K,{inline:!0,key:"emailAddress",overflow:"normal",weight:"bold"},e)})),n.createElement(u.c,{paddingY:4},n.createElement(p,{inline:!0,color:"gray",email:e,callBack:o,overrideText:r.a._("Resend email","Button to allow the user to request a password reset email")})),n.createElement(u.c,null,n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,Object(g.b)(r.a._("Didn’t get the email? Try these {{ tips }}","Direction to help center if the password reset email failed"),{tips:n.createElement(u.t,{inline:!0,key:"helpCenterLink",target:"blank",href:w.a.settings.HELP_PASSWORD_RESET_URL+f},n.createElement(u.K,{inline:!0,key:"helpCenter",weight:"bold"},r.a._("tips from our Help Center","Link text to go to help center")))}))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,Object(g.b)(r.a._("Not your email address? {{ tryAgain }}","Link to password reset flow for users who make an incorrect password reset request"),{tryAgain:n.createElement(u.t,{inline:!0,key:"passwordResetLink",href:w.a.settings.PASSWORD_RESET_URL},n.createElement(u.K,{inline:!0,key:"tryAgain",weight:"bold"},r.a._("Try another","Link text to enter the password reset flow for a different email address/username")))})))),n.createElement(u.c,null,n.createElement(l.a,{color:"red",onClick:t}))))}function k({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityCloseLabel:r.a._("close","accessible label for button to close modal"),accessibilityModalLabel:r.a._("Recover your account","Modal accessibility label for account recovery"),heading:r.a._("We protected your account","Modal heading for user who need to recover their accounts"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,{marginBottom:4},n.createElement(u.K,{inline:!0,leading:"tall"},r.a._("We noticed some strange activity on your Pinterest account so we reset your password and logged everyone out (including you).","Statement that we detected suspicious activity"))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,r.a._("Reset your password or log in with Facebook or Google to get back into your account","Prompt to take action to reset password or upsell login with Facebook/Google"))),n.createElement(p,{email:e,callBack:o}),i,n.createElement(u.c,{marginTop:4},n.createElement(l.a,{onClick:t}))))}var y=o("Yhte"),S=o("CvCA"),O=o("D8pe"),x=o("NSVK");function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return v})),o.d(t,"b",(function(){return L}));const v={[a.a.API_LIMIT_EXCEEDED_ERROR]:x.b.RATE_LIMITED,[a.a.API_EVENT_BLOCKED_ERROR]:x.b.RATE_LIMITED,[a.a.USER_IN_SAFE_MODE]:x.b.SOFT_BANNED,[a.a.POLICY_VIOLATION_USER]:x.b.SUSPENDED,[a.a.LOGIN_BAD_PASSWORD_ASK_RESET]:x.b.LOGIN_ASSISTANCE,[a.a.LOGIN_HARD_BANNED_USER]:x.b.SOFT_BANNED,[a.a.RESPONSE_CODE_TOO_MANY_REQUESTS]:x.b.RATE_LIMITED};class L extends n.Component{constructor(...e){super(...e),C(this,"state",{showToast:!1}),C(this,"dismissModal",()=>{this.props.updateAccountRecoveryModal(null)}),C(this,"showPasswordResetSent",()=>this.props.updateAccountRecoveryModal(x.b.PASSWORD_RESET_SENT)),C(this,"showLoginWithFailed",e=>{e===_.a?this.props.updateAccountRecoveryModal(x.b.PREVENT_FACEBOOK_REGISTER):e===O.a&&this.props.updateAccountRecoveryModal(x.b.PREVENT_GOOGLE_REGISTER)}),C(this,"toggleToast",()=>this.setState(e=>({showToast:!e.showToast}))),C(this,"renderSocialButtons",()=>n.createElement(u.c,null,n.createElement(_.b,{buttonText:r.a._("Continue with Facebook","Facebook login button text"),container:s.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.props.onLoginWithSuspended,showFallback:!0,preventRegister:this.showLoginWithFailed}),n.createElement(u.c,{marginTop:1},n.createElement(O.b,{container:s.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.props.onLoginWithSuspended,preventRegister:this.showLoginWithFailed,onLoginWithVoluntarilyDeactivated:e=>{this.dismissModal(),this.props.onLoginWithVoluntarilyDeactivated&&this.props.onLoginWithVoluntarilyDeactivated(e)}}))))}render(){const{email:e,modalType:t}=this.props,o={email:e,onClose:this.dismissModal,onPasswordResetSent:this.showPasswordResetSent,socialButtons:this.renderSocialButtons()};switch(t){case x.b.SUSPENDED:return n.createElement(y.a,{onClose:this.dismissModal});case x.b.LOGIN_ASSISTANCE:return n.createElement(h,o);case x.b.RATE_LIMITED:return n.createElement(m,o);case x.b.SOFT_BANNED:return n.createElement(k,o);case x.b.PREVENT_FACEBOOK_REGISTER:return n.createElement(b,{...o,loginWith:_.a});case x.b.PREVENT_GOOGLE_REGISTER:return n.createElement(b,{...o,loginWith:O.a});case x.b.PASSWORD_RESET_SENT:return n.createElement(n.Fragment,null,n.createElement(E,{...o,onPasswordResetSent:this.toggleToast}),this.state.showToast&&n.createElement(u.c,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed"},n.createElement(S.a,{onHide:this.toggleToast,text:r.a._("Email sent!"),duration:3500})));default:return null}}}},dP5U:function(e,t,o){o.d(t,"a",(function(){return r}));var n=o("q1tI"),i=o.n(n),a=o("Ye/N"),s=o("n6mq");function r({color:e,onClick:t,overrideText:o}){const n=o||a.a._("Got it","Acknowledge protected account modal message");return i.a.createElement(s.d,{accessibilityLabel:n,color:e||"gray",onClick:t,text:n})}},hQGS:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=(o("17x9"),o("n6mq"));const s={tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}};t.a=class extends n.Component{constructor(e,t){super(e,t),this.state={tooltipIsOpen:!!e.message}}UNSAFE_componentWillReceiveProps(e){e.message!==this.props.message&&this.setState({tooltipIsOpen:!!e.message})}render(){const{message:e}=this.props;return this.state.tooltipIsOpen?i.a.createElement(a.k,{anchor:this.props.anchor,color:"darkGray",idealDirection:"right",onDismiss:()=>this.setState({tooltipIsOpen:!0}),shouldFocus:!1,size:"md"},i.a.createElement(a.c,{column:12,padding:3},this.props.children?i.a.createElement("span",{style:s.text},this.props.children):i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e},style:s.tooltipText}))):null}}},i7x9:function(e,t,o){var n=o("q1tI"),i=o("JW66"),a=o("Ye/N"),s=o("LSg/"),r=o("4cpq"),l=o("BlMG"),c=o("vvax"),d=o("n6mq");t.a=({api_error_code:e,errorMessage:t,handleTouch:o,source:u,userSearch:p})=>{const g=e=>((e,t,o)=>n.createElement("button",{style:{background:"transparent",border:"none",verticalAlign:"inherit",padding:0},type:"button",onClick:()=>{Object(l.a)("unauth_password_reset_link_tapped"),Object(s.a)({usernameOrEmail:t,callBack:o})}},n.createElement(d.K,{color:"red",inline:!0,key:"err_text",size:"sm",weight:"bold"},e)))(e,p,o),h=(e=>{switch(e){case i.a.API_EVENT_BLOCKED_ERROR:case i.a.API_LIMIT_EXCEEDED_ERROR:case i.a.RESPONSE_CODE_TOO_MANY_REQUESTS:return Object(c.b)(a.a._("You’ve entered a lot of incorrect passwords. To get back into your account, {{ resetPasswordLink }}. Or you can wait 30 minutes and try again.","Error message when login limited"),{resetPasswordLink:g(a.a._("reset your password","Link text for password reset"))});case i.a.LOGIN_HARD_BANNED_USER:case i.a.USER_IN_SAFE_MODE:return Object(c.b)(a.a._("We noticed some strange activity on your account.  {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.","Error message when user is soft banned"),{resetPasswordLink:g(a.a._("Reset your password","Link text for password reset"))});case i.a.INVALID_PASSWORD_GOOGLE_USER:return Object(c.b)(a.a._("Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("set a password.","Link text to set password for user with account with only google auth"))});case i.a.INVALID_PASSWORD_FB_USER:return Object(c.b)(a.a._("Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("set a password.","Link text to set password for user with account with only facebook auth"))});case i.a.INVALID_PASSWORD_ERROR_CODE:return Object(c.b)(a.a._("The password you entered is incorrect. Try again or {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("Reset your password","Link text for password reset"))});default:return[t]}})(e);return n.createElement(r.a,{id:"touchableErrorMessage"},h.map((e,t)=>n.createElement(d.K,{inline:!0,color:"red",size:"sm",key:`err_message_${t}`},e)))}},inSI:function(e,t,o){t.a=(e,t)=>{let o;return t.some(t=>{const n=t(e);return n.errors.length>0&&(o=n.errors[0],!0)}),o}},kL1e:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("Ye/N"),s=o("17x9"),r=o.n(s);const l={alternativesSeparator:{marginBottom:"16px",marginTop:"16px",overflow:"hidden",textAlign:"center",fontSize:"14px",color:"#333",fontWeight:"bold"}};function c({css:e={}},t,o){const n=t.text||a.a._("OR"),s=Object.assign({},l.alternativesSeparator,e);let r="";return t.signupSeparatorContinuous&&(r="AlternativesSeparatorContinuous"),i.a.createElement("p",{className:r,style:s},n)}c.contextTypes={pageType:r.a.string},t.a=c},mt4P:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("F3od"),s=o("hQGS"),r=o("Ye/N"),l=(o("17x9"),o("zUH3")),c=o("a0jO"),d=o("n6mq");function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const p={input:{backgroundColor:"#fff",border:"solid 1px #ccc",WebkitBoxShadow:"none",boxShadow:"none",position:"relative",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",borderRadius:"3px",fontWeight:"bold",padding:"10px",WebkitBoxSizing:"border-box",boxSizing:"border-box",width:"100%",color:"#333",fontSize:"14px"},fieldset:{position:"relative"},errorIcon:{position:"absolute",right:"14px",top:"14px"},tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"},suggestedEmailSpan:{whiteSpace:"nowrap"},suggestedEmailLink:{display:"inline-block",font:"inherit",fontWeight:"bold",fontSize:"14",color:"#fff",cursor:"pointer",textDecoration:"underline",verticalAlign:"top",outline:"none",outlineOffset:"0"},fieldTitle:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",color:"#333",float:"left",fontFamily:c.b,fontSize:"16px",fontStyle:"normal",fontWeight:"bold",margin:"15px 0px 5px 3px"},suggestedEmailTooltip:{width:"match-content"}};class g extends n.Component{constructor(e,t){super(e,t),u(this,"renderErrorIcon",e=>{if(e)return i.a.createElement("div",{className:"InputField__errorIcon",style:p.errorIcon},i.a.createElement(d.n,{accessibilityLabel:r.a._("Remove","Accessible label for error icon"),color:"red",icon:"remove",inline:!0,size:14}))}),u(this,"renderTooltip",(e,t)=>{if(e&&t)return this.props.useGestaltTooltip?i.a.createElement(s.a,{anchor:this._input,message:e}):i.a.createElement(l.a,{message:e})}),u(this,"renderGestaltInputField",()=>{const{autoComplete:e,disabled:t,domainError:o,id:n,inputRef:s,name:r,onBlur:l,onChange:c,onFocus:u,placeholder:p,type:g,updateEmail:h,useExperimentalTextfield:m,value:_}=this.props,b=this.props.hasError||this.props.tooltip?this.props.tooltip:"";return m?i.a.createElement(a.a,{disabled:t,error:o||b,id:n,name:r,onBlur:l,onChange:({event:e,value:t})=>{c(e)},onFocus:u,placeholder:p,ref:e=>{this._gestaltInput=e,s&&s(e)},type:g,onLabelTouch:h,value:_}):i.a.createElement(d.M,{autoComplete:e,disabled:t,errorMessage:b,id:n,name:r,onBlur:l,onChange:({event:e,value:t})=>{c(e)},onFocus:u,placeholder:p,ref:e=>{this._gestaltInput=e,s&&s(e)},type:g,updateEmail:h,value:_})}),this.state={initialFocus:this.props.focused||!1,gainFocus:!1}}componentDidMount(){this.state.initialFocus&&this.focusInput()}UNSAFE_componentWillReceiveProps(e){const{domainError:t,type:o}=this.props;e.hasError&&!1===this.props.hasError?this.setState({gainFocus:!0}):this.setState({gainFocus:!1}),t&&o&&"email"===o&&this.setState({shouldTooltipOpen:!0})}componentDidUpdate(){this.state.gainFocus&&this.focusInput()}focusInput(){this._input&&this._input.focus(),this._gestaltInput&&this._gestaltInput.textfield&&this._gestaltInput.textfield.focus()}renderVanillaTextInputField(e,t){return i.a.createElement("div",null,i.a.createElement("input",{"aria-label":this.props.accessibilityLabel||this.props.placeholder,autoComplete:this.props.autoComplete,className:e,name:this.props.name,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onChange:this.props.onChange,onClick:this.props.onClick,placeholder:this.props.placeholder,ref:e=>{this._input=e,this.props.inputRef&&this.props.inputRef(e)},style:t,type:this.props.type,value:this.props.value}),this.renderErrorIcon(this.props.hasError),this.renderTooltip(this.props.tooltip,this.props.hasError))}render(){let e=p.input;this.props.inputStyleOverrides&&(e={...e,...this.props.inputStyleOverrides});let t=p.fieldset;this.props.fieldsetStyleOverrides&&(t={...t,...this.props.fieldsetStyleOverrides});let o="";return"gray"===this.props.placeholderColor?o="UnauthTextInputField__gray":"darkGray"===this.props.placeholderColor&&(o="UnauthTextInputField__darkGray"),i.a.createElement("fieldset",{className:this.props.classNames,style:t},this.props.inputFieldTitle?i.a.createElement("div",{style:p.fieldTitle},this.props.inputFieldTitle):null,this.props.useGestalt?this.renderGestaltInputField():this.renderVanillaTextInputField(o,e))}}g.defaultProps={autoComplete:"on",hasError:!1},t.a=g},"pz/u":function(e,t,o){var n=o("q1tI"),i=o.n(n),a=(o("17x9"),o("sA4Q"));const s={button:{border:"0px",height:"36px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",outline:"none",WebkitBoxShadow:"none",boxShadow:"none",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center"},buttonRed:{backgroundColor:"#e60023",color:"#fff"},buttonLightGrey:{backgroundColor:"#ebebeb",color:"#444"},buttonDarkGrey:{backgroundColor:"#333",color:"#fff"},buttonWhite:{backgroundColor:"#fff",color:"#444"},buttonWhiteBlueText:{backgroundColor:"#fff",color:"#0074e8"},buttonTransparent:{backgroundColor:"transparent",border:"1px solid #fff",color:"#fff"},disabledButton:{backgroundColor:"#efefef",color:"#8e8e8e"},loadingSpinner:{padding:"0 10px",position:"relative"},noStyles:{background:"none",border:"none",padding:"0",textAlign:"left"}};class r extends n.Component{constructor(e,t){super(e,t),this.state={loadingWidth:null,isMountedClientSide:!1}}componentDidMount(){let e=0;this._buttonRef&&(e=this._buttonRef.getBoundingClientRect().width+parseFloat(this._buttonRef.style.marginLeft)+parseFloat(this._buttonRef.style.marginRight),this.setState({loadingWidth:e})),this.setState({isMountedClientSide:!0})}renderSpinner(){return i.a.createElement("div",{className:"loadingSpinner",style:s.loadingSpinner})}render(){const{loadingWidth:e}=this.state,t=this.props.loading||this.props.numServerRenderedPins>0&&!1===this.state.isMountedClientSide;let o=this.props.className,n={},a=!1;const r=o.split(" ");this.props.disabled?n=s.disabledButton:r.indexOf("red")>-1?n=s.buttonRed:r.indexOf("lightGrey")>-1?n=s.buttonLightGrey:r.indexOf("darkGrey")>-1?n=s.buttonDarkGrey:r.indexOf("white")>-1?n=s.buttonWhite:r.indexOf("blueText")>-1?n=s.buttonWhiteBlueText:r.indexOf("noButtonStyles")>-1?a=!0:(r.indexOf("transparent")>-1||r.indexOf("blueTransparent")>-1)&&(n=s.buttonTransparent);let l=a?{...s.noStyles,...this.props.styleOverrides}:{...s.button,...n,...this.props.styleOverrides};if(t){const t={cursor:"default"};e&&Object.assign(t,{width:e}),l={...l,...t}}else this.props.disabled?l={...l,cursor:"not-allowed"}:o+=" active";return i.a.createElement("button",{"aria-label":this.props.accessibilityLabel,className:o,disabled:this.props.disabled,href:this.props.href,id:this.props.id,onClick:this.props.onClick,ref:this.props.buttonRef||(e=>{this._buttonRef=e}),style:l,type:this.props.type},t?this.renderSpinner():this.props.children)}}r.defaultProps={accessibilityLabel:"",styleOverrides:{},loading:!1,type:"button"},t.a=Object(a.a)(r)},sA4Q:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/5zs"),s=o("pLLR");t.a=function(e){return Object({NODE_ENV:"production"}).JEST_WORKER_ID?e:Object(s.e)(class extends i.a.Component{constructor(e){super(e);const{requestContext:t}=this.props;this.state={inPureCompExp:new a.c(t,"web_unauth_pure_component").enabled()}}shouldComponentUpdate(e,t){return!this.state.inPureCompExp||e.next!==this.props.next}render(){return i.a.createElement(e,this.props)}})}},sgOq:function(e,t,o){t.a={request:51,requestBegin:6935,requestEnd:6936}},zUH3:function(e,t,o){o.d(t,"a",(function(){return l}));var n=o("q1tI"),i=o.n(n),a=o("17x9"),s=o.n(a);const r={invisibleWrapper:{top:"0px",width:"215px"},message:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:"left",maxWidth:"215px",display:"inline-block",float:"left"},suggestionTooltipMessage:{boxShadow:"none",background:"#E2780D",color:"#fff",fontSize:"14px",WebkitBoxShadow:"none"},text:{overflowWrap:"break-word",wordWrap:"break-word"}};function l(e,t){let o="Tooltip_message";e.isSuggestionTooltip&&(o="Tooltip_suggestionMessage");const n={...r.invisibleWrapper,...e.customWrapperStyles},a=e.isSuggestionTooltip?{...r.message,...r.suggestionTooltipMessage}:r.message;return i.a.createElement("div",{className:"Tooltip_wrapper","data-test-id":"tooltip",style:n},i.a.createElement("div",{className:o,style:a},e.children?i.a.createElement("span",{style:r.text},e.children):i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.message},style:r.text})),i.a.createElement("div",null))}l.contextTypes={message:s.a.string}}}]);
//# sourceMappingURL=pjs-6-f4cc00c8ccb838f490b9.mjs.map
