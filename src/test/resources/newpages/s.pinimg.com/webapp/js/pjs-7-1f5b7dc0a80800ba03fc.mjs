(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[7],{"+8U0":function(e,t,i){function n(e){const t=e.split("@")[0];let i="";return i=(i=(i=t.includes(".")?t.replace("."," "):t.includes("_")?t.replace("_"," "):t).replace(/[0-9]/g,"")).replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}i.d(t,"a",(function(){return n}))},"4wVv":function(e,t,i){i.d(t,"a",(function(){return s}));var n=i("q1tI"),a=i.n(n);i("17x9");const o={separator:{borderBottom:"#dedede 1px solid",margin:"5px auto",width:"110px"}};function s({css:e={}}){const t=Object.assign({},o.separator,e);return a.a.createElement("div",{style:t})}},"9b9g":function(e,t,i){i.d(t,"b",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"e",(function(){return r})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return d})),i.d(t,"k",(function(){return c})),i.d(t,"i",(function(){return h})),i.d(t,"g",(function(){return p})),i.d(t,"h",(function(){return g})),i.d(t,"j",(function(){return u})),i.d(t,"a",(function(){return m}));var n=i("WX9e"),a=i("oZBM");const o=398,s=708,r=460,l=560,d=3,c=708,h=398,p=480,g=6,u=500,m=1150;t.l=(e,t,i="",o=!1,s="",r)=>{if(i===n.a.PIN&&s===a.a.tier1&&!r&&t[1000150]&&501018===t[1000150].experience_id){return(e.v2GetGroup("web_unauth_plp_education_video")||"").startsWith("enabled")}return!1}},NUH5:function(e,t,i){var n=i("q1tI"),a=i.n(n),o=i("Ye/N"),s=i("BlMG"),r=i("n6mq");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.PureComponent{constructor(...e){super(...e),l(this,"inputRef",null),l(this,"handleNotNowClick",()=>{Object(s.a)("unauth.fb_phone_only_signup.email_step.not_now_click"),this.props.onNotNowClick&&this.props.onNotNowClick()})}componentDidMount(){this.focusInputField(),Object(s.a)("unauth.fb_phone_only_signup.email_step")}focusInputField(){this.inputRef&&this.inputRef.textfield&&this.inputRef.textfield.focus()}render(){o.a._("We use your email address for account creation and for important security and legal notices.","subtitle to explain the step on email collection form");const{email:e,emailError:t,handleEmailChange:i,handleSubmit:n}=this.props,s=o.a._("Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.","subtitle to explain the step on email collection form");return a.a.createElement(r.c,{marginTop:3},a.a.createElement("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),n()}},a.a.createElement(r.K,{align:"left",overflow:"normal"},s),a.a.createElement(r.c,{marginTop:3}),a.a.createElement(r.c,null,a.a.createElement(r.M,{id:"email",errorMessage:t,onChange:i,placeholder:o.a._("Email address","email placeholder in the email inputfield on email collection form"),ref:e=>{this.inputRef=e},type:"email"})),a.a.createElement(r.c,{marginTop:5}),a.a.createElement(r.d,{color:"red",text:o.a._("Continue","word on the button which to submit user email information"),type:"submit",disabled:!e}),a.a.createElement(r.c,{marginTop:2}),a.a.createElement(r.d,{text:o.a._("Not now","word on not now button to dismiss the collection form"),type:"submit",onClick:this.handleNotNowClick})))}}var c=i("NSVK"),h=i("eOdZ"),p=i("inSI"),g=i("DrcS"),u=i("c50B"),m=i("VL22"),E=i("pLLR");function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const f={container:{margin:"0 auto",width:"268px"}},S={EMAIL:"email"};t.a=Object(E.e)(class extends n.Component{constructor(e){super(e),b(this,"mounted",!1),b(this,"handleEmailChange",({value:e})=>{this.setState({email:e})}),b(this,"showError",(e,t)=>{this.mounted&&t===S.EMAIL&&this.setState({emailError:e})}),b(this,"handleSubmit",()=>{if(Object(s.a)("unauth.fb_phone_only_signup.submit_email"),this.state.email)Object(s.a)("unauth.fb_phone_only_signup.submit_email"),this.attemptEmailSignupOrLogin();else{const e=o.a._("Email is required","email error message");this.setState({emailError:e})}}),b(this,"handleSignupSuccess",()=>{c.c.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0),Object(s.a)("unauth.fb_phone_only_signup.signup_success")}),b(this,"handleSignupFailure",e=>t=>{const i=t.message||o.a._("Oops! Something went wrongâ€¦ Click Continue to try again.","Error during signup during FB email collection step");this.showError(i,e),Object(s.a)("unauth.fb_phone_only_signup.signup_failure")}),b(this,"attemptEmailSignupOrLogin",()=>{const{country:e}=this.props.requestContext,{email:t}=this.state,i=[Object(u.d)({message:o.a._("Hmm... that doesn't look like an email address.","email error message")})],n=Object(p.a)(t,i);if(n)return Object(s.a)("unauth.fb_phone_only_signup.email_validation_failure"),void this.setState({emailError:n});const{registrationCredentials:{type:a,credentialsAndLoggingData:r},showSocialSignupWithAgeStep:l,showEmailAlreadyExistModal:d}=this.props,c={email:t,facebook_token:r.facebook_token?r.facebook_token:"",facebook_id:r.facebook_id?r.facebook_id:""};h.a.create("EmailExistsResource",{email:t}).callGet().then(t=>{!1===t.resource_response.data?Object(m.e)(e)?l(a,c,r):g.a.attemptFacebookRegistration({...c},!0).then(this.handleSignupSuccess,this.handleSignupFailure(S.EMAIL)):(d(a,c,r),Object(s.a)("unauth.fb_phone_only_signup.email_existed"))},()=>{const e=o.a._("Hmm... that doesn't look like an email address.","email error message");this.showError(e,S.EMAIL),Object(s.a)("unauth.fb_phone_only_signup.email_exist_api_call_failure")})}),this.state={email:"",emailError:""}}componentDidMount(){this.mounted=!0,this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1)}componentWillUnmount(){this.mounted=!1}render(){return a.a.createElement("div",{style:f.container},a.a.createElement(d,{email:this.state.email,emailError:this.state.emailError,handleEmailChange:this.handleEmailChange,handleSubmit:this.handleSubmit,onNotNowClick:this.props.onNotNowClick}))}})},VsLI:function(e,t,i){i.d(t,"a",(function(){return d}));var n=i("q1tI"),a=i.n(n),o=i("pz/u"),s=i("n6mq");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l={header:{color:"#5a5a5a",fontWeight:500,fontSize:"12px"},button:{width:"160px",fontSize:"14px",padding:"10px 20px"}};class d extends n.Component{constructor(...e){super(...e),r(this,"state",{hover:!1}),r(this,"toggleHover",()=>{this.setState({hover:!this.state.hover})})}render(){const{buttonText:e,fullWidth:t,link:i,onClick:n,title:r,titleStylesOverride:d,useSmallButton:c}=this.props;let h=l.header;d&&(h={...h,...d});const p=t?{...l.button,width:"100%",marginTop:"0"}:l.button;let g=a.a.createElement(o.a,{className:"lightGray",href:i,onClick:n,styleOverrides:p,type:"button"},e),u={};if(c){h={...h,float:"left"},u={margin:"0 auto 5px",width:"fit-content",alignItems:"baseline"};const t={color:"#333",cursor:"pointer",marginLeft:"5px"};g=a.a.createElement(s.c,{onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover},a.a.createElement("a",{onClick:n,style:t},e))}return a.a.createElement("div",{style:u},r&&a.a.createElement("h5",{style:h},r),g)}}},WX9e:function(e,t,i){t.a={BOARD:"board",FLASHLIGHT:"flashlight",PASSWORDRESET:"passwordReset",PASSWORDUSERNAME:"passwordUserName",PIN:"pin",PINFEEDBACK:"pinFeedBack",PROFILE:"profile",SEARCH:"search",TOPIC:"topic"}},aZSR:function(e,t,i){var n=i("q1tI"),a=i.n(n),o=i("jv6m"),s=i("Ye/N"),r=i("n6mq");t.a=()=>a.a.createElement(r.c,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%"},a.a.createElement(r.c,{color:"white",height:600,minWidth:"500px",shape:"rounded",width:"30%"},a.a.createElement(r.c,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12},a.a.createElement(r.c,{alignItems:"center",color:"red",display:"flex",height:60,justifyContent:"center",marginBottom:4,shape:"circle",width:60},a.a.createElement(r.n,{accessibilityLabel:s.a._("Loading state for google one tap registration"),color:"white",icon:"pin",size:"28"})),a.a.createElement(r.c,{alignItems:"center",paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}}},a.a.createElement(r.m,{size:"sm"},s.a._("Welcome to Pinterest!","Welcome to Pinterest!"))),a.a.createElement(r.K,{size:"xl",align:"center",overflow:"normal"},s.a._("Your answers to the next questions will help us find the right ideas for you","loading state description while waiting for google one tap registration to complete"))),a.a.createElement(o.a,{duration:6e3,finalProgress:95})))},bFXG:function(e,t,i){i.d(t,"a",(function(){return n}));const n={DEFAULT_TOGGLE:"DEFAULT_TOGGLE",NO_TOGGLE:"NO_TOGGLE",SMALL_TOGGLE:"SMALL_TOGGLE",NOT_NOW_BUTTON:"NOT_NOW_BUTTON"}},fyRi:function(e,t,i){var n=i("q1tI"),a=i.n(n),o=i("JW66"),s=i("Ye/N"),r=i("NSVK"),l=i("inSI"),d=i("n6mq");var c=e=>{const{age:t,error:i,handleAgeChange:n,handleSubmit:o,inputRef:r}=e;return a.a.createElement(d.c,null,a.a.createElement("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),o()}},a.a.createElement(d.c,null,a.a.createElement(d.K,{align:"left"},s.a._("How old are you?","Title for the age collection input field after connecting with Facebook or Google"))),a.a.createElement(d.c,{marginTop:2}),a.a.createElement(d.c,null,a.a.createElement(d.M,{id:"age",errorMessage:i||"",onChange:n,placeholder:s.a._("Age","text field for user to enter their age"),ref:e=>{r&&r(e)},type:"number"})),a.a.createElement(d.c,{marginTop:3}),a.a.createElement(d.c,null,a.a.createElement(d.d,{color:"red",disabled:!t,text:s.a._("Continue"),type:"submit"}))))},h=i("BlMG"),p=i("DrcS"),g=i("jsIX"),u=i("/5zs"),m=i("U4JR"),E=i("VL22"),b=i("pLLR");function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const S={container:{margin:"0 auto",width:"268px"}};class w extends n.Component{constructor(...e){super(...e),f(this,"state",{age:"",error:""}),f(this,"getViewParameter",e=>e.type===E.a.FACEBOOK?3205:e.type===E.a.GOOGLE?3204:e.type===E.a.GOOGLE_ONE_TAP?3201:void 0),f(this,"handleAgeChange",({value:e})=>{this.setState({age:e})}),f(this,"handleSignupSuccess",()=>{this.track("signup_success"),Object(m.a)(7487,{viewParameter:this.getViewParameter(this.props.registrationCredentials)});const{showResponseMessageModal:e}=this.props;e?e(!0):r.c.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0)}),f(this,"handleSignupFailure",e=>{this.track("signup_failure"),this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.props.showSignupWelcomeLoadingFn&&this.props.showSignupWelcomeLoadingFn(!1),Object(m.a)(7488,{viewParameter:this.getViewParameter(this.props.registrationCredentials)});let t=e.message||s.a._("Oops! Something went wrongâ€¦ Click Continue to try again.","Error during signup during age collection step");e.api_error_code===o.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(t=s.a._("Uh oh... it looks like youâ€™re not old enough just yet.","Underage error during signup")),this.setState({error:t})}),f(this,"handleSubmit",()=>{const{age:e}=this.state;this.track(`submit_button_click.${e||"undefined"}`);const{loadingIndicatorCallback:t,registrationCredentials:i,requestContext:n,showSignupWelcomeLoadingFn:a,showResponseMessageModal:o}=this.props,s=this.validateAge(e||"");if(s)return void this.setState({error:s});let r;this.setState({error:""}),i.type===E.a.GOOGLE_ONE_TAP?r="web_unauth_google_one_tap_welcome":i.type===E.a.GOOGLE?r="web_unauth_gplus_welcome_v2":i.type===E.a.FACEBOOK&&(r="web_unauth_fb_welcome_v2");let l=!1;if(r?(l=new u.c(n,r).enabled(),n.experiments.flush()):t&&t(!0),Object(m.a)(7537,{viewParameter:this.getViewParameter(i)}),i.type===E.a.FACEBOOK){this.track("attempt_signup");const t={...p.a.buildFacebookRegistrationResourceOptions(i.userData),...i.credentialsAndLoggingData,recapToken:null,age:e};p.a.register(t).then(this.handleSignupSuccess,this.handleSignupFailure)}else i.type!==E.a.GOOGLE&&i.type!==E.a.GOOGLE_ONE_TAP||(this.track("attempt_signup"),p.a.register({...i.credentialsAndLoggingData,age:e}).then(this.handleSignupSuccess,this.handleSignupFailure));!o&&a&&l&&a(!0)})}componentDidMount(){this.track("shown"),this.focusInputField()}track(e){const{container:t,registrationCredentials:i}=this.props,n=i?i.type:"undefined";Object(h.a)(`unauth_web.age_collection_form.${e}.${n}.${t||""}`)}focusInputField(){this.inputRef&&this.inputRef.textfield&&this.inputRef.textfield.focus()}validateAge(e){return s.a._("Please enter at least two digits.","Error message when age is less than two digits long"),Object(l.a)(e,[Object(g.a)({message:s.a._("Please enter a valid number.")})])}render(){const{age:e,error:t}=this.state;return a.a.createElement("div",{style:S.container},a.a.createElement(c,{age:e,error:t,handleAgeChange:this.handleAgeChange,handleSubmit:this.handleSubmit,inputRef:e=>{this.inputRef=e}}))}}f(w,"defaultProps",{container:"undefined"});t.a=Object(b.e)(w)},jv6m:function(e,t,i){i.d(t,"a",(function(){return s}));var n=i("q1tI"),a=i.n(n),o=i("n6mq");class s extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n={startProgressBar:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){setTimeout(()=>{this.setState({startProgressBar:!0})},0)}render(){const{duration:e,finalProgress:t,showLightGrayBackground:i,rounded:n}=this.props;return a.a.createElement(o.c,{width:"100%",color:i?"lightGray":"transparent",shape:n?"rounded":"square"},a.a.createElement(o.c,{color:"red",height:6,shape:"rounded",width:`${t}%`,dangerouslySetInlineStyle:{__style:{transform:this.state.startProgressBar?"scale(1, 1)":"scale(0, 1)",transformOrigin:"left",transitionDuration:`${e}ms`,transitionTimingFunction:"ease-in"}}}))}}},pXxl:function(e,t,i){i.r(t);var n=i("q1tI"),a=i.n(n),o=i("/MKj"),s=i("xdpg"),r=i("pz/u"),l=i("c4Fo"),d=i("N9+J"),c=i("NUH5"),h=i("py4n"),p=i("Ye/N"),g=i("MKeS"),u=i("shJ5"),m=i("7KqT"),E=i("qrz1"),b=i("weew"),f=i("+8U0"),S=i("17x9"),w=i.n(S),_=i("4wVv"),y=i("qMnA"),x=i("rvlh"),C=i("VsLI"),v=i("aZSR"),T=i("fyRi"),L=i("kmwA"),k=i("zwad"),O=i("fArA"),P=i.n(O),R=i("bFXG"),M=i("vvax"),A=i("U4JR"),F=i("1kvE"),I=i("9b9g"),B=i("BlMG"),N=i("liz/"),V=i("3fKP"),j=i("pLLR"),U=i("n6mq"),W=i("VJYJ");function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const G=Object(g.a)({chunkName:()=>"UnauthVideo",isReady(e){return!!i.m[this.resolve(e)]},requireAsync:()=>Promise.all([i.e(0),i.e("UnauthVideo")]).then(i.bind(null,"2aie")),requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return"2aie"}}),z=L.a.settings.PARTNER_SITE_SIGNUP,q={signup:{backgroundColor:"#fff",borderRadius:"8px",position:"relative",textAlign:"center",width:"404px",margin:"auto",minHeight:"450px",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},signupMobile:{backgroundColor:"#fff",position:"absolute",left:"0",right:"0",top:"0",minHeight:"100vh",textAlign:"center"},signupModal:{textAlign:"center"},signupForm:{minHeight:"400px",padding:"20px 10px 24px"},signupInviteForm:{minHeight:"400px",padding:"30px 10px 20px"},signupTitleContainer:{margin:"0 auto 18px",width:"270px"},signupTitleMfaContainer:{padding:"0 10px"},signupTitle:{color:"#333",fontSize:"36px",fontWeight:"600",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"-1.2px"},haveAccountText:{display:"inline-block",marginRight:"4px"},logoContainer:{display:"block",height:"45px",margin:"5px auto 8px",width:"45px"},pinterestLogo:{textAlign:"center",paddingTop:"20px",display:"inline-block"},inputFields:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"},separator:{borderBottom:"#efefef 1px solid",margin:"20px 0px 15px -68px",width:"404px"},signupLoginToggle:{color:"#333",fontSize:"14px",fontWeight:"normal",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},profilePic:{margin:"0 auto 16px",width:"108px"},personalizedModalContainer:{backgroundColor:"#fff",borderRadius:"8px",padding:"22px 0",position:"relative",textAlign:"center",width:"400px",margin:"auto",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},closeButton:{backgroundColor:"transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"absolute",right:"10px",top:"10px"},notNowButton:{border:"none",color:"#717171",fontWeight:"bold",textDecoration:"none",backgroundColor:"#eee",height:"36px",borderRadius:"5px",fontSize:"16px",width:"268px",marginTop:"10px"},onClickEmailConfirmationButton:{width:"270px",marginTop:"40px"},signupSubtitles:{textAlign:"center",color:"#333",fontSize:"16px",fontWeight:"normal",margin:"-15px 0 32px"},businessHeader:{float:"left",color:"#333",fontSize:"12px",fontWeight:"bold",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},businessLink:{cursor:"pointer",marginLeft:"5px",float:"left",color:"#333",fontSize:"12px"},businessContainer:{margin:"10px auto 5px",display:"flex",alignItems:"baseline",width:"fit-content",justifyContent:"center"},closeButtonStyle:{position:"absolute",right:"10px",paddingTop:"10px",zIndex:"1"}};class H extends n.Component{constructor(e){super(e),D(this,"getNextUrlParam",()=>{const{nextUrlParam:e}=this.props;return e?decodeURIComponent(e):e}),D(this,"getNextUrl",e=>this.getNextUrlParam()?k.a.buildRelativeUrl(e,{next:this.getNextUrlParam()}):e),D(this,"getSignupBoxStyle",()=>{const{container:e}=this.props;return"home_page"===e?{...q.signup,minHeight:"initial"}:q.signup}),D(this,"showAdditionalStep",e=>(t,i,n)=>{this.setState({type:e,socialRegistrationCredentials:{type:t,userData:i,credentialsAndLoggingData:n}})}),D(this,"tagline",(e,t,i)=>{const n=p.a._("Sign up to see more","sigup copy default includes pin click and scrolling"),a={defaultSource:n,boardInvite:p.a._("Sign up to accept your board invite","Sign up copy board invite"),userFollow:p.a._("Sign up to see more of this profile","signup copy user follow"),userProfilePage:p.a._("Sign up to see more of this profile","signup copy profile page"),saveButton:p.a._("Sign up to see more","signup copy save button"),signupButton:p.a._("Sign up to see more","signup copy signup button"),homePage:p.a._("Welcome to Pinterest","Title on desktop signup modal on home page"),login:n,loginMfa:n,actionButton:n,boardPage:n,giftWrap:n,invite:n,mwebDefaultSource:n,navigateBoard:n,navigateInterest:n,navigatePin:n,personalizedFlyout:n,unauthVisualSearch:n,unauthBanner:n,unauthHeader:n},o=p.a._("Log in to see more","Title on desktop login modal"),s={boardInvite:p.a._("Log in to accept your board invite","Login copy board invite"),invite:p.a._("Log in to invite friends"),login:o,saveButton:p.a._("Log in to see more","Title on desktop login modal"),homePage:p.a._("Welcome to Pinterest","Title on desktop signup modal on home page"),defaultSource:o,loginMfa:o,actionButton:o,boardPage:o,giftWrap:o,unauthVisualSearch:o,mwebDefaultSource:o,navigateBoard:o,navigateInterest:o,navigatePin:o,personalizedFlyout:o,signupButton:o,unauthBanner:o,userFollow:o,userProfilePage:o,unauthHeader:o},r={login:p.a._("Two-Factor Authentication Required")};let l;return l=e===V.c.signup||e===V.c.signupOrPersonalizedLogin?a[t]:e===V.c.loginMfa?r[V.b.login]:s[t]}),D(this,"valuePropAsSubtitle",e=>e===V.b.homePage?p.a._("Find new ideas to try","Value prop on desktop signup modal on home page"):p.a._("Discovery starts here","Pinterest value proposition on desktop login modal")),D(this,"valuePropAsTitle",()=>p.a._("Access our best ideas with a free account","Value prop on desktop signup modal")),D(this,"switchToSignup",()=>{this.setModalType(V.c.signup)}),D(this,"toggleMagicLinkConfirmation",e=>{this.setState({type:e?V.c.magicLinkConfirmation:V.c.login})}),D(this,"clearPassword",()=>{this.setState({password:""})}),D(this,"handlePreventRegisterFromPersonalizedModal",e=>{Object(B.a)(`unauth.personalized_login.prevent_register.${e}`),this.setState({headerStyle:"default",isPersonalizedModal:!1,isLoading:!1}),this.switchToSignup()}),D(this,"resetInferredUser",()=>{const{emailTaken:e,setEmailAvailable:t}=this.props;e&&(t(),this.setState({isPersonalizedModal:!1,userInfo:void 0}))}),D(this,"handleNotYouClick",e=>{const{viewer:t}=this.props;e.event.preventDefault(),this.resetInferredUser(),this.state.type===V.c.FBEmailAlreadyExist?this.setState({headerStyle:"default",isPersonalizedModal:!1,password:"",type:V.c.login}):this.setState({headerStyle:"default",isPersonalizedModal:!1,password:""}),Object(B.a)("unauth.personalized_login.not_you.click"),t.isAuth?Object(A.a)(101,{element:10879,login_state:t.isLimitedLogin?2:1}):Object(A.a)(101,{element:10879})}),D(this,"toggleLoadingIndicator",e=>{this.setState({isLoading:e})}),D(this,"handleLoginToggleButtonClick",e=>{const{handleModalTypeSwitch:t}=this.props;this.trackScopedAction("login_toggle_click"),t&&t(),this.setModalType(V.c.login,e),this.setWelcomeBackMessageForExistingEmail(!1)}),D(this,"handleSignupToggleButtonClick",e=>{const{handleModalTypeSwitch:t,requestContext:{seoUnauthExperiments:i},pageType:n,hybridTier:a,requestContext:o,eligibleExperiences:s}=this.props;this.trackScopedAction("signup_toggle_click"),t&&t(),this.setModalType(V.c.signup,e),Object(I.l)(i,s,n,!0,a,o.isBot)&&(this.state.type===V.c.login||this.state.type===V.c.signup)&&this.setState({isShowRegisterForm:!1})}),D(this,"handleConfirmationPageButtonClick",e=>{this.setModalType(V.c.login,e)}),D(this,"handleNotNowClick",e=>{this.setModalType(V.c.signup,e),this.toggleLoadingIndicator(!1)}),D(this,"handleSignupToggleFromPersonalized",e=>{const{viewer:t}=this.props;e.event.preventDefault(),this.resetInferredUser(),Object(B.a)("unauth.personalized_login.signup_instead.click"),this.setState({password:""}),t.isAuth?Object(A.a)(101,{element:10880,login_state:t.isLimitedLogin?2:1}):Object(A.a)(101,{element:10880}),this.handleSignupToggleButtonClick(e)}),D(this,"handlePostConnectClick",()=>{Object(B.a)("unauth.fb_email_reauth.post_connect.click")}),D(this,"handlePostSuccessConnect",()=>{Object(B.a)("unauth.fb_email_reauth.post_success.connect")}),D(this,"handleShowRegisterForm",()=>{this.setState({isShowRegisterForm:!0})}),D(this,"updateEmail",e=>{this.setState({email:e,clearError:!0})}),D(this,"showSignupWelcomeLoadingFn",e=>{this.setState({showSignupWelcomeLoading:e}),this.props.handleShowingSignupWelcomeLoading&&this.props.handleShowingSignupWelcomeLoading(e)}),D(this,"setWelcomeBackMessageForExistingEmail",e=>{this.setState({isExitingUserInSignup:e})}),D(this,"renderSocialSignupModalText",(e,t,i)=>{const{container:o,darkSignupTitle:s,delayedTitleRender:r,hybridTier:l,inviter:d,type:c}=this.props;if(e){const e=d?d.first_name:"",t=d?d.image_medium_url:"",g=c===V.c.respondMessage,u=g?p.a._("Sign up and let {{ name }} know what you think","Prompt user to signup to access all Pinterest features").replace("{{ name }}",e):p.a._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features").replace("{{ name }}",e);return a.a.createElement(n.Fragment,null,a.a.createElement("div",{style:q.profilePic},a.a.createElement(U.a,{src:t,name:e,verified:g,icon:"pinterest"})),a.a.createElement("div",{style:i},!r&&a.a.createElement(h.a,{container:o,darkSignupTitle:s,hybridTier:l,modalType:V.a.signup,titleText:u})))}return t});const t=k.a.getQueryStringParams();this.state={clearError:!1,type:"signup"===t.type?V.c.signup:this.props.type,email:e.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:e.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",isExitingUserInSignup:!1,isPersonalizedModal:null,isLoading:!1,socialRegistrationCredentials:this.props.socialRegistrationCredentials,step:"signup",showSignupWelcomeLoading:!1,isShowRegisterForm:!1}}componentDidMount(){const{AMPClientId:e,userInfo:t,viewer:i}=this.props;if(this.logModalShown(this.state.type),this.context.logging&&(i.isAuth?Object(A.a)(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter,login_state:i.isLimitedLogin?2:1}):Object(A.a)(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter})),e&&Object(B.c)("signup_page_from_amp",{amp_client_id:e}),i.isAuth&&i.isLimitedLogin){const e={connected_to_facebook:this.isLimitedLoginUserFBConnected(),connected_to_google:this.isLimitedLoginUserGplusConnected(),email:i.email,first_name:i.firstName,has_password:i.hasPassword,medium_image_url:i.imageMediumUrl};this.setPersonalizedModal(e)}else this.setPersonalizedModal(t)}UNSAFE_componentWillUpdate(e,t){t.type!==this.state.type&&this.logModalShown(t.type)}componentDidUpdate(e){if(this.props.userInfo!==e.userInfo&&this.setPersonalizedModal(this.props.userInfo),this.props.emailTaken&&this.props.emailTaken!==e.emailTaken){const e={connected_to_facebook:!0,connected_to_google:!0,email:this.state.email,first_name:Object(f.a)(this.state.email),has_password:!0,medium_image_url:""};this.setPersonalizedModal(e)}this.props.type!==e.type&&this.setState({type:this.props.type,email:this.props.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:this.props.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",socialRegistrationCredentials:this.props.socialRegistrationCredentials})}componentWillUnmount(){const{isAccountSwitch:e,container:t}=this.props;e&&(Object(N.k)("add_account_dismiss",null,t),Object(N.h)(t))}getSignupStyles(){const e=this.props.modal,t=this.getSignupBoxStyle();return e?q.signupModal:t}setModalType(e,t){this.setState({type:e})}setNameFromEmail(){this.setState({name:Object(f.a)(this.state.email)})}setPersonalizedModal(e){const{emailTaken:t,signupSource:i,isAccountSwitch:n,toggleModalType:a}=this.props,{isPersonalizedModal:o,type:s}=this.state;n||e&&Object.keys(e).length>0&&(!o||t)&&(e.medium_image_url.endsWith("user/default_150.png")&&(e.medium_image_url=""),this.setState({isPersonalizedModal:!0,userInfo:e}),i===V.b.homePage&&s===V.c.signup&&a&&a())}logModalShown(e){Object(B.a)(`unauth.authentication_modal.shown.${this.props.toggleType}.${e}`)}trackScopedAction(e){Object(B.a)(`unauth.authentication_modal.${e}.${this.props.toggleType}.${this.state.type}`)}handleDataChange(e,t){const i={};i[e]=t.target.value,this.setState(i)}handleLoginWithMfa(e,t){const i={mfaCreds:e,mfaPhoneNumberEnd:void 0};t&&t.phone_number_end&&(i.mfaPhoneNumberEnd=t.phone_number_end),this.setState(i),this.setModalType(V.c.loginMfa)}changeStep(e){this.setState({step:e})}isUnidentifiedSignupMethod(){const{viewer:e}=this.props;if(e.isAuth&&e.isLimitedLogin)return this.isUnidentifiedLimitedLoginSignupMethod();const{userInfo:t}=this.state;return t&&!(t.has_password||t.connected_to_facebook||t.connected_to_google)}isUnidentifiedLimitedLoginSignupMethod(){const{viewer:e}=this.props;return e.isAuth&&e.isLimitedLogin&&!(e.hasPassword||this.isLimitedLoginUserGplusConnected()||this.isLimitedLoginUserFBConnected())}isLimitedLoginUserFBConnected(){const{viewer:e}=this.props;return e.socialNetwork&&e.socialNetwork.facebook&&e.socialNetwork.facebook.connected}isLimitedLoginUserGplusConnected(){const{viewer:e}=this.props;return e.socialNetwork&&e.socialNetwork.gplus&&e.socialNetwork.gplus.connected}renderModalSideImage(e,t=600){const{image_url:i,image_aspect_ratio:n}=e||{},o={height:"100%",width:n*t,maxWidth:400,backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${i})`};return a.a.createElement("div",{style:{borderRadius:"8px 0 0 8px",overflow:"hidden"}},a.a.createElement("div",{style:o}))}renderModalSideVideo(e=!1,t,i,n){const{isShowRegisterForm:o,type:s}=this.state;let r=I.b;const l=I.f;return s===V.c.login?r=I.d:s===V.c.signup&&(r=o?I.b:I.e),a.a.createElement(G,{autoplay:!0,muted:!0,margin:I.c,video:{mp4:{url:t,thumbnail:i,duration:n,width:l,height:r}},view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter,componentLogging:13326,modalOpened:!1,fallback:a.a.createElement("div",null)})}renderLoadingIndicator(){return this.state.isLoading?a.a.createElement(u.a,null):null}renderPersonalizedLogin(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,hybridTier:o,isBusiness:s,location:r,passwordValidationError:l,pins:d,viewer:c,type:g}=this.props;let u;const E=Object(W.a)(r.pathname,{path:"/pin/:id",exact:!0});if(c.isLimitedLogin&&E){const e=E.params.id,t=e&&d[e]&&d[e].images&&d[e].images["474x"];u=t&&{image_url:t.url,image_aspect_ratio:t.width/t.height||0}}const f=p.a._("Not you? Log in with a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account"),S=p.a._("Need an account? Sign up now","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account"),w=this.state.userInfo?this.state.userInfo.first_name:"",_=Object(M.b)(p.a._("Welcome back, {{name}}!","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest"),{name:w}),y=q.logoContainer,x={...q.signupTitleContainer,width:"350px",overflow:"hidden",maxHeight:"120px"},C=a.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),a.a.createElement("div",{style:y},Object(b.a)(40,!0)),a.a.createElement("div",{style:x},!i&&a.a.createElement(h.a,{container:e,darkSignupTitle:t,hybridTier:o,modalType:V.a.personalizedLogin,titleText:_})),a.a.createElement("div",{style:q.profilePic},a.a.createElement(U.a,{src:this.state.userInfo?this.state.userInfo.medium_image_url:"",name:this.state.userInfo?this.state.userInfo.first_name:""})),a.a.createElement(U.c,{marginBottom:3},a.a.createElement(U.K,{size:"md",align:"center"},this.state.userInfo?this.state.userInfo.email:null)),a.a.createElement(j.a,null,e=>a.a.createElement(m.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.userInfo?this.state.userInfo.email:null,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:l,inputStyleOverrides:q.inputFields,nextUrlParam:this.getNextUrlParam(),loginButtonTextOverride:p.a._("Continue"),hideEmailField:!0,hidePasswordField:!!this.state.userInfo&&!this.state.userInfo.has_password&&!this.isUnidentifiedSignupMethod(),hideFacebookButton:!!this.state.userInfo&&!this.state.userInfo.connected_to_facebook&&!this.isUnidentifiedSignupMethod(),hideGoogleButton:!!this.state.userInfo&&!this.state.userInfo.connected_to_google&&!this.isUnidentifiedSignupMethod(),hidePasswordReset:!0,hideTermsOfService:!0,onEmailChange:function(){},onSocialConnectVerified:this.showAdditionalStep(V.c.socialSignupWithAge),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(V.c.FBEmailCollection),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,shouldPreventRegister:!0,triggerAccountRecoveryMode:this.handlePreventRegisterFromPersonalizedModal,showResponseMessageModal:g===V.c.respondMessage?this.props.showResponseMessageModal:void 0})),a.a.createElement(U.c,{paddingY:5},a.a.createElement(U.j,null)),a.a.createElement(U.c,{"data-test-id":"login-switch-account"},a.a.createElement(U.P,{onTouch:this.handleNotYouClick,fullWidth:!1},a.a.createElement(U.K,{align:"center",size:"sm",weight:"bold"},a.a.createElement(U.t,{href:"#"},f)))),a.a.createElement(U.c,{marginTop:1,marginBottom:4},a.a.createElement(U.P,{onTouch:s?()=>{Object(A.a)(101,{element:10880})}:this.handleSignupToggleFromPersonalized,fullWidth:!1},a.a.createElement(U.K,{align:"center",size:"sm",weight:"bold"},a.a.createElement(U.t,{href:s?this.getNextUrl("/business/create"):"#"},S)))));return u?a.a.createElement("div",{"data-test-id":"login",style:{...q.personalizedModalContainer,display:"flex",width:"auto",padding:""}},this.renderModalSideImage(u),a.a.createElement("div",{style:{width:400,padding:"22px 0"}},C)):a.a.createElement("div",{"data-test-id":"login",style:q.personalizedModalContainer},C)}renderEmailAlreadyExistLogin(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,hybridTier:o,isBusiness:s,passwordValidationError:r,type:l}=this.props,d=p.a._("Not you? Log in with a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account"),c=p.a._("Need an account? Sign up now","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account"),g=this.state.userInfo?this.state.userInfo.first_name:"",u=Object(M.b)(p.a._("Looks like you're already on Pinterest","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest"),{name:g}),E=q.logoContainer,f={...q.signupTitleContainer,width:"350px",overflow:"hidden",maxHeight:"120px"},S=a.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),a.a.createElement("div",{style:E},Object(b.a)(40,!0)),a.a.createElement("div",{style:f},!i&&a.a.createElement(h.a,{container:e,darkSignupTitle:t,hybridTier:o,modalType:V.a.personalizedLogin,titleText:u})),a.a.createElement(U.c,{marginBottom:3},a.a.createElement(U.K,{size:"md",align:"center"},this.state.socialRegistrationCredentials.userData?this.state.socialRegistrationCredentials.userData.email:null)),a.a.createElement(j.a,null,e=>a.a.createElement(m.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.socialRegistrationCredentials.userData?this.state.socialRegistrationCredentials.userData.email:null,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:r,inputStyleOverrides:q.inputFields,nextUrlParam:this.getNextUrlParam(),loginButtonTextOverride:p.a._("Continue"),hideEmailField:!0,hideFacebookButton:!0,hidePasswordReset:!0,hideTermsOfService:!0,onEmailChange:function(){},onSocialConnectVerified:this.showAdditionalStep(V.c.socialSignupWithAge),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(V.c.FBEmailCollection),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,shouldPreventRegister:!0,triggerAccountRecoveryMode:this.handlePreventRegisterFromPersonalizedModal,showResponseMessageModal:l===V.c.respondMessage?this.props.showResponseMessageModal:void 0})),a.a.createElement(U.c,{paddingY:5},a.a.createElement(U.j,null)),a.a.createElement(U.c,{"data-test-id":"login-switch-account"},a.a.createElement(U.P,{onTouch:this.handleNotYouClick,fullWidth:!1},a.a.createElement(U.K,{align:"center",size:"sm",weight:"bold"},a.a.createElement(U.t,{href:"#"},d)))),a.a.createElement(U.c,{marginTop:1,marginBottom:4},a.a.createElement(U.P,{onTouch:s?()=>{Object(A.a)(101,{element:10880})}:this.handleSignupToggleFromPersonalized,fullWidth:!1},a.a.createElement(U.K,{align:"center",size:"sm",weight:"bold"},a.a.createElement(U.t,{href:s?this.getNextUrl("/business/create"):"#"},c)))));return a.a.createElement("div",{"data-test-id":"login",style:q.personalizedModalContainer},S)}renderSignupToLoginToggle(){return a.a.createElement(C.a,{buttonText:p.a._("Already a member? Log in","Toggle to switch from the sign up modal to the login modal "),link:"/login/",onClick:this.handleLoginToggleButtonClick,titleStylesOverride:q.signupLoginToggle,useSmallButton:!0})}renderDefaultSignup(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,emailValidationError:o,passwordValidationError:s,signupSource:r,requestContext:{seoUnauthExperiments:l},viewer:d,renderBusinessCreateButton:c,inviter:g,pageType:u,hybridTier:m,requestContext:E,eligibleExperiences:f,type:S}=this.props,{age:w,email:y,gender:C,isExitingUserInSignup:v,name:T,password:L}=this.state;let k=this.props.customSignupTagline||(r?this.tagline(this.state.type,r,l):this.tagline(this.state.type,V.b.defaultSource,l));v&&(k=p.a._("Welcome back to Pinterest!","welcoming user back to pinterest in signup modal when we recognize their email"));const O={...this.getSignupStyles(),width:"484px",..."home_page"===e?{paddingBottom:55}:null},P=q.signupForm,M=q.logoContainer;let F=q.signupTitleContainer;"login_page"!==e&&(F={...F,width:"400px"});const N=q.signupTitleContainer,j=q.signupSubtitles;let W=a.a.createElement("div",null,a.a.createElement(_.a,{css:q.separator}),a.a.createElement("div",null,this.renderSignupToLoginToggle()));const D={marginTop:"32px"};this.props.toggleType===R.a.NOT_NOW_BUTTON?W=a.a.createElement("div",null,a.a.createElement("div",{style:D},this.renderSignupToLoginToggle()),a.a.createElement("div",null,a.a.createElement("div",{style:q.businessContainer},a.a.createElement("h5",{style:q.businessHeader},p.a._("Are you a business? ")),a.a.createElement("a",{href:z,style:q.businessLink,target:"_blank",onClick:()=>{Object(B.a)("unauth.business_link.click"),d.isAuth?Object(A.a)(101,{component:13096,element:10281,login_state:d.isLimitedLogin?2:1}):Object(A.a)(101,{component:13096,element:10281})}},p.a._("Get started here"))))):"home_page"===e&&(W=a.a.createElement(U.c,{marginTop:3},this.renderSignupToLoginToggle()));let G=48;r===V.b.homePage&&(G=50);const H=this.valuePropAsTitle(),K=!!g&&!g.is_default_image,Y=a.a.createElement(n.Fragment,null,a.a.createElement("div",{style:M},Object(b.a)(G,!0)),a.a.createElement("div",{style:F},!i&&a.a.createElement(h.a,{container:e,hybridTier:m,darkSignupTitle:t,modalType:V.a.signup,titleText:["login_page","home_page"].includes(e)?k:H})),a.a.createElement("div",{style:N},!this.state.isExitingUserInSignup&&a.a.createElement("h3",{style:j},"login_page"!==e&&"home_page"!==e?k:this.valuePropAsSubtitle(r)))),$=(Object(I.l)(l,f,u,!0,m,E.isBot)&&(this.state.type===V.c.login||(this.state.type,V.c.signup)),a.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),a.a.createElement("div",{style:K?q.signupInviteForm:P},this.renderSocialSignupModalText(K,Y,F),a.a.createElement(x.a,{additionalEmailPasswordChildren:W,age:w,container:this.props.container,dark:!0,disablePostSignupNextUrl:!0,email:y,emailValidationError:o,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:s,gender:C,setWelcomeBackMessageForExistingEmail:this.setWelcomeBackMessageForExistingEmail,name:T,nextUrlParam:this.props.postSignupUrlParam||this.getNextUrlParam(),onAgeChange:this.handleDataChange.bind(this,"age"),onEmailChange:this.handleDataChange.bind(this,"email"),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(V.c.FBEmailCollection),onFBEmailDeniedPerm:this.showAdditionalStep(V.c.FBEmailRerequest),onSocialConnectVerified:this.showAdditionalStep(V.c.socialSignupWithAge),onGenderChange:this.handleDataChange.bind(this,"gender"),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onNameChange:this.handleDataChange.bind(this,"name"),onPasswordChange:this.handleDataChange.bind(this,"password"),onStepChange:this.changeStep.bind(this),onShowRegisterForm:this.handleShowRegisterForm,setNameFromEmail:this.setNameFromEmail.bind(this),signupSource:r,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,password:L,clearPassword:this.clearPassword,showResponseMessageModal:S===V.c.respondMessage?this.props.showResponseMessageModal:void 0})),c&&c()));l.v2GetGroup("web_unauth_plp_education_video");return a.a.createElement("div",{"data-test-id":"signup",style:O},$)}renderLoginToSignupToggle(e){return a.a.createElement(C.a,{buttonText:p.a._("Not on Pinterest yet? Sign up","Toggle to switch from the login modal to the sign up modal"),link:e,onClick:this.handleSignupToggleButtonClick,titleStylesOverride:q.signupLoginToggle,useSmallButton:!0})}renderDefaultLogin(){const{container:e,customLoginTagline:t,darkSignupTitle:i,delayedTitleRender:o,emailValidationError:s,isAccountSwitch:r,hideAccountSwitchValueProp:l,magicLinkGroup:d,passwordValidationError:c,requestContext:{seoUnauthExperiments:g},signupSource:u,renderBusinessCreateButton:E,pageType:f,hybridTier:S,requestContext:w,eligibleExperiences:y,type:x}=this.props,C=t||(u?this.tagline(this.state.type,u,g):this.tagline(this.state.type,V.b.login,g)),v=q.logoContainer;let T=q.signupTitleContainer;"login_page"!==e&&(T={...T,width:"400px"});let L=40;u===V.b.homePage&&(L=50);const k={...this.getSignupStyles(),width:"484px"},O=q.signupForm,P=q.signupTitleContainer,M=q.signupSubtitles,A={...q.separator,marginLeft:"-10px"};let F=a.a.createElement("div",null,a.a.createElement(_.a,{css:A}),a.a.createElement("div",null,this.renderLoginToSignupToggle("/signup/")));this.props.isBusiness?F=a.a.createElement("div",null,a.a.createElement(_.a,{css:{margin:"10px auto"}}),a.a.createElement("a",{href:this.getNextUrl("/business/create")},p.a._("Create new account","Link to the page to create a new business account instead of logging in")),a.a.createElement("div",null)):this.props.toggleType===R.a.NOT_NOW_BUTTON?F=a.a.createElement("div",null,a.a.createElement(_.a,{css:{margin:"10px auto"}}),a.a.createElement("div",{style:q.haveAccountText},this.renderLoginToSignupToggle()),a.a.createElement("div",null)):this.props.toggleType===R.a.NO_TOGGLE||r?F=null:this.props.toggleType===R.a.SMALL_TOGGLE&&(F=a.a.createElement("div",null,a.a.createElement(_.a,{css:{margin:"10px auto"}}),this.renderLoginToSignupToggle(),a.a.createElement("div",null)));const B=p.a._("Have another Pinterest account? Log in to easily switch between them","Subtitle on the login modal that explains to a user why they would add an additional account to their profile"),N=(Object(I.l)(g,y,f,!0,S,w.isBot)&&(this.state.type===V.c.login||(this.state.type,V.c.signup)),a.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),a.a.createElement("div",{style:O},a.a.createElement("div",{style:v},Object(b.a)(L,!0)),a.a.createElement("div",{style:T},!o&&a.a.createElement(h.a,{container:e,hybridTier:S,darkSignupTitle:i,modalType:V.a.login,titleText:C})),r&&!l&&a.a.createElement("div",{style:P},a.a.createElement("h3",{style:M},B)),a.a.createElement(j.a,null,e=>a.a.createElement(m.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.email,emailValidationError:s,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:c,inputStyleOverrides:q.inputFields,isAccountSwitch:r,magicLinkGroup:d,nextUrlParam:this.getNextUrlParam(),onEmailChange:this.handleDataChange.bind(this,"email"),onSocialConnectVerified:this.showAdditionalStep(V.c.socialSignupWithAge),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(V.c.FBEmailCollection),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,toggleMagicLinkConfirmation:this.toggleMagicLinkConfirmation,clearPassword:this.clearPassword,showResponseMessageModal:x===V.c.respondMessage?this.props.showResponseMessageModal:void 0})),F),!1));g.v2GetGroup("web_unauth_plp_education_video");return a.a.createElement("div",{"data-test-id":"login",style:k},N)}renderLoginMfa(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,hybridTier:n,requestContext:{seoUnauthExperiments:o}}=this.props,s=this.tagline(this.state.type,V.b.loginMfa,o),r=this.getSignupStyles(),l=q.signupForm,d=q.logoContainer;return a.a.createElement("div",{"data-test-id":"login",style:r},a.a.createElement("div",{style:l},a.a.createElement("div",{style:d},Object(b.a)(40,!0)),a.a.createElement("div",{style:{...q.signupTitleContainer,...q.signupTitleMfaContainer}},!i&&a.a.createElement(h.a,{container:e,darkSignupTitle:t,hybridTier:n,modalType:V.a.loginMfa,titleText:s})),a.a.createElement(E.a,{container:this.props.container,code:this.state.mfaCode,creds:this.state.mfaCreds,email:this.state.email,inputStyleOverrides:q.inputFields,isAccountSwitch:this.props.isAccountSwitch,nextUrlParam:this.getNextUrlParam(),onCodeChange:this.handleDataChange.bind(this,"mfaCode"),password:this.state.password,phoneNumberEnd:this.state.mfaPhoneNumberEnd})))}renderMagicLinkConfirmation(){const{email:e,password:t}=this.state;return Object(F.a)("confirmation_shown",e,t),a.a.createElement("div",{"data-test-id":"login",style:this.getSignupStyles()},a.a.createElement("div",{style:q.signupForm},a.a.createElement("div",{style:q.logoContainer},Object(b.a)(40,!0)),a.a.createElement("div",{style:q.signupTitleContainer},a.a.createElement("h3",{style:q.signupTitle},p.a._("Check your email","title on login modal telling user to check their email"))),a.a.createElement(U.c,{direction:"column",alignItems:"center",display:"flex"},a.a.createElement(U.c,{paddingY:3,width:270},a.a.createElement(U.K,{size:"lg"},a.a.createElement("span",{dangerouslySetInnerHTML:{__html:s.c(p.a._("We just sent an email to you at <strong>{{ email }}</strong>. It has a magic link that you can use to log in.","Message on login modal telling users an email has been sent to them containing a link to log in"),{email:e})}}))),a.a.createElement(U.c,{paddingY:3,width:270},a.a.createElement(U.d,{text:p.a._("Back","text on button to return to login modal from magic link confirmation screen"),onClick:()=>{Object(F.a)("confirmation_dismissed",e,t),this.toggleMagicLinkConfirmation(!1)}})))))}renderSocialSignupWithAge(){const{socialRegistrationCredentials:e}=this.state,{type:t}=this.props,i=p.a._("Sign up to see more","Age collection signup step for Facebook/G+ authentication");return a.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},this.renderLoadingIndicator(),a.a.createElement("div",{style:q.signupForm},a.a.createElement("div",{style:q.logoContainer},Object(b.a)(40,!0)),a.a.createElement("div",{style:q.signupTitleContainer},a.a.createElement("h3",{style:q.signupTitle},i)),a.a.createElement(T.a,{container:this.props.container,disablePostSignupNextUrl:!0,loadingIndicatorCallback:this.toggleLoadingIndicator,nextUrlParam:this.getNextUrlParam(),registrationCredentials:e,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,showResponseMessageModal:t===V.c.respondMessage?this.props.showResponseMessageModal:void 0})),a.a.createElement(U.c,{margin:4},a.a.createElement(U.j,null),a.a.createElement(U.c,{padding:3},this.renderSignupToLoginToggle())))}renderFBEmailCollection(){const{socialRegistrationCredentials:e}=this.state,{nextUrlParam:t,requestContext:{seoUnauthExperiments:i}}=this.props,n={...q.signup,minHeight:"400px"},o={...q.signupTitleContainer,width:"310px"};p.a._("What's your email address?","email collection step for Facebook phone only sign up");const s=p.a._("What's your email address?","Prompt for email address in after sign in with apple");return a.a.createElement("div",{"data-test-id":"login",style:n},this.renderLoadingIndicator(),a.a.createElement("div",{style:q.signupForm},a.a.createElement("div",{style:q.logoContainer},Object(b.a)(40,!0)),a.a.createElement("div",{style:o},a.a.createElement("h3",{style:q.signupTitle},s)),a.a.createElement(c.a,{nextUrlParam:t,loadingIndicatorCallback:this.toggleLoadingIndicator,showEmailConfirmationStep:this.showAdditionalStep(V.c.emailConfirmation),showEmailAlreadyExistModal:this.showAdditionalStep(V.c.FBEmailAlreadyExist),showLoginStep:this.showAdditionalStep(V.c.login),showSocialSignupWithAgeStep:this.showAdditionalStep(V.c.socialSignupWithAge),registrationCredentials:e,seoUnauthExperiments:i,onNotNowClick:this.handleNotNowClick})))}renderFBEmailRerequestForm(){const{type:e}=this.props,t={...this.getSignupBoxStyle(),minHeight:"400px"},i={...q.signupTitleContainer,width:"320px"},n=p.a._("Add your email to finish","Tagline on facebook rerequest form"),o={...q.signupSubtitles,marginTop:"24px"},s={...q.notNowButton,marginTop:"90px"},l=p.a._("We need your email address to complete this signup. Click the button below, and we can use the email associated with your Facebook account.","message to explain reauth step beneath the tagline");return a.a.createElement("div",{"data-test-id":"login",style:t},this.renderLoadingIndicator(),a.a.createElement("div",{style:q.signupForm},a.a.createElement("div",{style:q.logoContainer},Object(b.a)(40,!0)),a.a.createElement("div",{style:i},a.a.createElement("h3",{style:q.signupTitle},n),a.a.createElement("h3",{style:o},l),a.a.createElement("div",{style:{width:"260px",margin:"auto"}},a.a.createElement(d.b,{isRerequest:!0,container:"FBEmailRerequest",buttonText:p.a._("Continue with Facebook","Button text on facebook connect button on FB email reauth form"),loadingIndicatorCallback:this.toggleLoadingIndicator,useGestaltTooltip:!0,handlePostConnectClick:this.handlePostConnectClick,handlePostSuccessConnect:this.handlePostSuccessConnect,showResponseMessageModal:e===V.c.respondMessage?this.props.showResponseMessageModal:void 0}))),a.a.createElement(r.a,{className:"lightGrey",onClick:this.handleNotNowClick,styleOverrides:s},p.a._("Not now","word on not now button to dismiss the FB email reauth form"))))}renderEmailConfirmation(){const{socialRegistrationCredentials:e}=this.state,t=e.userData.email,i=p.a._("Check your email","email confirmation tagline for Facebook cellphone only sign up"),n=p.a._("We've sent a confirmation email to ","email confirmation message for Facebook cellphone only sign up"),o={...q.signupSubtitles,marginTop:"24px"};return a.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},a.a.createElement("div",{style:q.signupForm},a.a.createElement("div",{style:q.logoContainer},Object(b.a)(40,!0)),a.a.createElement("div",{style:q.signupTitleContainer},a.a.createElement("h3",{style:q.signupTitle},i),a.a.createElement("h3",{style:o},n,t)),a.a.createElement(r.a,{className:"red",onClick:this.handleConfirmationPageButtonClick,styleOverrides:q.onClickEmailConfirmationButton},p.a._("Done","word on the button in email confirmation page"))))}render(){const{isAccountSwitch:e,isPersonalizedModal:t,showSignupWelcomeLoading:i,type:n}=this.state,{viewer:o}=this.props;return n===V.c.signupOrPersonalizedLogin?t&&!e?this.renderPersonalizedLogin():this.renderDefaultSignup():n===V.c.signup?i?a.a.createElement(v.a,null):this.renderDefaultSignup():n===V.c.login?i?a.a.createElement(v.a,null):!t||e||o.isAuth&&!o.isLimitedLogin?this.renderDefaultLogin():this.renderPersonalizedLogin():n===V.c.loginMfa?this.renderLoginMfa():n===V.c.socialSignupWithAge?i?a.a.createElement(v.a,null):this.renderSocialSignupWithAge():n===V.c.FBEmailRerequest?this.renderFBEmailRerequestForm():n===V.c.emailConfirmation?this.renderEmailConfirmation():n===V.c.magicLinkConfirmation?this.renderMagicLinkConfirmation():n===V.c.respondMessage?this.renderDefaultSignup():this.state.type===V.c.FBEmailCollection?this.renderFBEmailCollection():this.state.type===V.c.FBEmailAlreadyExist?this.renderEmailAlreadyExistLogin():null}}D(H,"defaultProps",{disablePersonalizedLoginActivation:!1,isAccountSwitch:!1,signupSource:V.b.defaultSource,toggleType:R.a.DEFAULT_TOGGLE,type:V.c.signup});const K=e=>({location:e.location,pins:e.pins||{},userInfo:e.loggedOutUserInfo?e.loggedOutUserInfo.userInfo:{},viewer:e.viewer,eligibleExperiences:e.experiences?e.experiences.eligibleExperiences:{},emailTaken:!!e.loggedOutUserInfo&&e.loggedOutUserInfo.emailTaken}),Y=e=>({setEmailAvailable:()=>e(Object(y.a)(!1))});H.contextTypes={isBot:w.a.bool,logging:w.a.shape({viewParameter:w.a.number,viewType:w.a.number.isRequired}),locale:w.a.string},t.default=Object(O.compose)(j.e,Object(o.connect)(K,Y))(H)},py4n:function(e,t,i){i.d(t,"a",(function(){return l}));var n=i("q1tI"),a=i.n(n),o=i("BlMG");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const r={signupTitle:{color:"#333",fontSize:"36px",fontWeight:"600",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"-1.2px"}};class l extends n.Component{constructor(...e){super(...e),s(this,"componentDidMount",()=>{const{container:e,hybridTier:t,modalType:i}=this.props;Object(o.a)("web.unauth.modal_title.view"),Object(o.a)(`unauth_web_modal.${e||"unknown"}.${t||"undefined_tier"}.${i}.shown`)}),s(this,"getSignupTitleStyles",()=>{const{darkSignupTitle:e}=this.props;let t=r.signupTitle;return e&&(t={...t,color:"#000"}),t})}render(){const{titleText:e}=this.props,t=this.getSignupTitleStyles();return a.a.createElement("h3",{style:t},e)}}},qMnA:function(e,t,i){function n(e){return{type:"EMAIL_AVAILABILITY",payload:{isTaken:e}}}i.d(t,"a",(function(){return n}))},qrz1:function(e,t,i){var n=i("q1tI"),a=i.n(n),o=i("pz/u"),s=i("Ye/N"),r=i("x/Ro"),l=i("NSVK"),d=i("17x9"),c=i.n(d),h=i("inSI"),p=i("kmwA"),g=i("mt4P"),u=i("BlMG"),m=i("vvax"),E=i("IRjL"),b=i("c50B");const f=p.a.settings.PASSWORD_RESET_URL,S={loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginText:{fontSize:"14px",margin:"24px 0",textAlign:"left"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",marginTop:"45px",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},signupButton:{width:"100%"}},w="loginmfa";class _ extends n.Component{constructor(e){super(e),this.state={codeValidationError:null,loading:!1},this.codeValidators=[Object(b.m)({message:s.a._("You missed a spot! Don't forget to add your verification code.")}),Object(b.k)({message:s.a._("Hmm...that doesn't look like a verification code.")})]}componentDidMount(){!this.props.isAccountSwitch&&l.c.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&l.c.handleRedirect(this.props.nextUrlParam)}_getLocationForLoginRedirect(){const e=window.location.pathname!==f?window.location.pathname:"/";return this.props.nextUrlParam||e}handleButtonClick(e){const t=Object(h.a)(this.props.code,this.codeValidators);t?(this.setState({codeValidationError:t}),Object(u.a)(`unauth.login.error.CLIENT_ERROR.wrongcode.${w}`)):(this.setState({codeValidationError:null}),this.loginUser())}handleResendCode(e){e.preventDefault(),this.setState({loading:!0});let t=this.props.creds;t?t.mfa_resend=!0:t={mfa_resend:!0,username_or_email:this.props.email,password:this.props.password};const i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(r.a)(t,i).then(()=>{this.setState({loading:!1})},e=>{this.setState({loading:!1}),e.message?this.setState({codeValidationError:e.message}):Object(E.a)(s.a._("Sorry! Something went wrong on our end."))})}loginUser(e){this.setState({loading:!0});let t=e||this.props.creds;t?t.mfa_token=this.props.code:t={mfa_token:this.props.code,username_or_email:this.props.email,password:this.props.password};const i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(r.a)(t,i).then(()=>{l.c.handleRedirect(this._getLocationForLoginRedirect())},e=>{e.message?this.setState({codeValidationError:e.message,loading:!1}):(Object(E.a)(s.a._("Sorry! Something went wrong on our end.")),this.setState({loading:!1}))})}render(){const e=S.loginContainer,t=s.a._("Continue"),i=this.props.phoneNumberEnd,n=i?Object(m.b)(s.a._("Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in."),{phoneNumberEnd:a.a.createElement("strong",{key:"phone"},i)}):s.a._("Please check your phone for a code and enter it in the field below to log in.");return a.a.createElement("div",{style:e},a.a.createElement("p",{style:S.loginText},n),a.a.createElement("form",{method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),this.handleButtonClick(e)}},a.a.createElement(g.a,{autoComplete:"off",focused:!0,hasError:!!this.state.codeValidationError,id:"mfaCode",inputStyleOverrides:this.props.inputStyleOverrides,name:"code",onChange:this.props.onCodeChange,placeholder:s.a._("Verification code"),tooltip:this.state.codeValidationError,type:"text",value:this.props.code,useGestaltTooltip:this.props.useGestaltTooltip}),a.a.createElement(o.a,{accessibilityLabel:t,className:"red SignupButton",loading:this.state.loading,styleOverrides:S.signupButton,type:"submit"},a.a.createElement("div",null,t))),a.a.createElement("div",{style:S.loginFooterContainer},Object(m.b)(s.a._("If you didn't get it, we can {{ resendCode }}."),{resendCode:a.a.createElement("a",{onClick:this.handleResendCode.bind(this),href:"",key:"code"},s.a._("resend the code"))})))}}var y,x,C;C={container:"unknown"},(x="defaultProps")in(y=_)?Object.defineProperty(y,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):y[x]=C,_.contextTypes={isAuthenticated:c.a.bool.isRequired,loginState:c.a.number,hybridTier:c.a.string,pageType:c.a.string},t.a=_},rvlh:function(e,t,i){var n=i("q1tI"),a=i.n(n),o=i("/MKj"),s=i("gxu6"),r=i("kL1e"),l=i("JW66"),d=i("N9+J"),c=i("D8pe"),h=i("Ye/N"),p=i("0/lC");var g=i("x/Ro"),u=i("8rCP"),m=i("17x9"),E=i.n(m),b=i("DtEZ"),f=i("eOdZ"),S=i("inSI"),w=i("qMnA"),_=i("H3gn"),y=i("i7x9"),x=i("BlMG"),C=i("DrcS"),v=i("a0jO"),T=i("n6mq"),L=i("IRjL"),k=i("/5zs"),O=i("U4JR"),P=i("dtw8"),R=i("a2Qh"),M=i("NSVK"),A=i("jsIX"),F=i("VL22"),I=i("pLLR"),B=i("fArA");function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const V={emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:v.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},signupContainer:{margin:"0 auto",width:"268px"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"}},j="emailpwdstep";class U extends n.Component{constructor(e,t){super(e,t),N(this,"onLoginWithSuspended",()=>{const{loadingIndicatorCallback:e}=this.props;e(!1),this.setState({accountRecoveryModalType:R.a[l.a.POLICY_VIOLATION_USER]})}),N(this,"onLoginWithVoluntarilyDeactivated",e=>{this.setState({googleValidationError:e.message})}),N(this,"setLoadingState",e=>{const{loadingIndicatorCallback:t,showSignupWelcomeLoadingFn:i}=this.props;return i&&!1===e&&i(!1),t(e)}),N(this,"inDisableAccountKitPhoneNumberLoginExp",()=>{const{requestContext:{seoUnauthExperiments:e}}=this.props;return(e.v2ActivateExperiment("web_unauth_disable_accountkit_phonenumber_login")||"").startsWith("enabled")}),N(this,"handleButtonClick",e=>{if("1"===s.a("r_r"))return void this.showUnderAgeError();let t=!1;if(this.inDisableAccountKitPhoneNumberLoginExp())t=!0;else{u.a.runPhoneValidators(this.props.email,this.props.requestContext.locale,this._loginFacebookAccountKit.bind(this))&&(t=!0)}this.setState({facebookValidationError:null,googleValidationError:null}),t&&this.handleEmailSignUp(e)}),N(this,"handleEmailChange",e=>{this.props.onEmailChange&&this.props.onEmailChange(e)}),N(this,"handleTypoSuggestionClick",()=>{this.setState({emailValidationError:""})}),N(this,"handlePasswordChange",e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.onPasswordChange&&this.props.onPasswordChange(e)}),N(this,"handleEmailSignUp",e=>{Object(x.a)("unauth_email_validation_attempt");let t=Object(S.a)(this.props.email,this.emailValidators);if(t)this.setState({emailValidationError:t}),Object(x.a)(`unauth.login.error.CLIENT_ERROR.malformemail.${j}`);else{t=Object(S.a)(this.props.password,this.loginPasswordValidators);const i=Object(S.a)(this.props.password,this.asciiValidators);t?(this.setState({passwordValidationError:t}),Object(x.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${j}`)):i?(this.setState({passwordValidationError:i}),Object(x.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${j}`),Object(x.a)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${j}`)):(this.setState({passwordValidationError:null}),this.validateEmailAvailable(e)),this.setState({emailValidationError:null}),this.props.setNameFromEmail&&this.props.setNameFromEmail()}}),N(this,"_loginFacebookAccountKit",e=>{if(u.a.validateResponse(e)){const t={phone_number:this.props.email,fb_auth_code:e.code};Object(x.a)("unauth_phone_only_login_attempt"),this.login(t)}else this.setState({emailValidationError:h.a._("Enter your email or phone number to try again.")}),this.setLoadingState(!1)}),N(this,"register",()=>{this.setLoadingState(!0);const{age:e,container:t,email:i,name:n,password:a,signupSource:o}=this.props,r={container:t,email:i,password:a,age:e,country:this.context.country,signupSource:o,first_name:n,last_name:"",hybridTier:this.context.hybridTier,page:this.context.pageType,recapToken:this.props.recaptchaTokenV3||"default"};Object(x.a)("one_step_age_signup_complete"),C.a.register(r).then(this.handleSignupSuccess,e=>{this.contextLogSignupLoginEvent(7488),this.setLoadingState(!1),this.props.refreshRecaptchaTokenV3&&this.props.refreshRecaptchaTokenV3(),e.api_error_code===l.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT?(s.b("r_r","1"),this.showUnderAgeError()):e.api_error_code===l.a.SIGNUP_INVALID_EMAIL?(Object(x.a)("unauth_show_invalid_email_inline_error"),this.setState({emailValidationError:h.a._("Your email is invalid.")})):Object(L.a)(h.a._("Sorry! Something went wrong on our end."))}),this.contextLogSignupLoginEvent(7537)}),N(this,"handleSignupSuccess",()=>{const{showResponseMessageModal:e}=this.props;this.contextLogSignupLoginEvent(7487),Object(x.a)("unauth.signup_one_step.completed"),e?e(!0):M.c.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl)}),N(this,"shouldRequireAge",()=>{const{country:e}=this.context,{requestContext:t}=this.props;if(Object(F.e)(e)||Object(F.d)(e))return!0;const i=Object(F.c)(e)&&new k.c(t,"web_age_collection_expansion_markets").enabled(),n=new k.c(t,"web_age_collection_expansion_row").enabled();return i||n}),N(this,"validateAgeRequirement",()=>{let e=!1;return this.shouldRequireAge()&&(e=Object(S.a)(this.props.age||"",this.ageValidators))&&(this.setState({ageValidationError:e}),this.setLoadingState(!1),Object(x.a)(`unauth.login.error.CLIENT_ERROR.invalidage.${j}`)),e}),N(this,"validatePasswordRequirement",()=>{const e=Object(S.a)(this.props.password,this.passwordValidators);return e&&(this.setState({passwordValidationError:e}),this.setLoadingState(!1),Object(x.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${j}`)),e}),N(this,"completeRegistration",e=>{this.setState({emailValidationError:null}),this.setLoadingState(!1),Object(x.a)("unauth.signup_step_1.completed"),this.register()}),N(this,"updateEmailAvailability",e=>{const{prevEmailTaken:t,setEmailTaken:i}=this.props;(t&&!e||!t&&e)&&i(e)}),N(this,"checkEmailExistsWithCompletion",(e,t,i)=>{const{requestContext:n}=this.props;f.a.create("EmailExistsResource",{email:e}).callGet({emailValidationError:!1}).then(e=>{if(this.setState({emailValidationError:null}),!1===e.resource_response.data)this.updateEmailAvailability(!1),i();else{new k.c(n,"web_personalized_login_from_email").enabled()&&this.updateEmailAvailability(!0),n.experiments.flush(),t()}},()=>{const e=h.a._("Hmm...that doesn't look like an email address");this.setState({emailValidationError:e})})}),N(this,"updateAccountRecoveryModal",e=>this.setState({accountRecoveryModalType:e})),N(this,"handleSignupWithEmailClick",()=>{Object(x.a)("unauth_signup_email_btn_click"),this.setState({showRegisterForm:!0}),this.props.onShowRegisterForm&&this.props.onShowRegisterForm()}),N(this,"renderSocialButtons",()=>{const{sm:e}=this.props,t=a.a.createElement(d.b,{buttonText:h.a._("Continue with Facebook"),container:this.props.container,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,onSocialConnectVerified:this.props.onSocialConnectVerified,onFBEmailDeniedPerm:this.props.onFBEmailDeniedPerm,onFBPhoneOnlyConnectVerified:this.props.onFBPhoneOnlyConnectVerified,loadingIndicatorCallback:this.props.loadingIndicatorCallback,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,tooltip:this.state.facebookValidationError,useGestaltTooltip:!0,showResponseMessageModal:this.props.showResponseMessageModal}),i=a.a.createElement("div",{ref:e=>{this.googleButton=e}},"1"!==e&&a.a.createElement(c.b,{action:"signup",container:this.props.container,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,nextUrlParam:"/",onSocialConnectVerified:this.props.onSocialConnectVerified,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,tooltip:this.state.googleValidationError,showResponseMessageModal:this.props.showResponseMessageModal}));return a.a.createElement("div",{style:V.socialButtonContainer},t,a.a.createElement("div",{style:V.socialButtonSeparator}),i)}),N(this,"renderSignupForm",()=>{const{age:e,email:t,inputStyleOverrides:i,newEmail:n,onAgeChange:o,password:s,suppressFocus:r,updateEmail:l}=this.props;return this.state.showRegisterForm?a.a.createElement(b.a,{age:e,ageValidationError:this.state.ageValidationError,buttonText:this.getButtonText(),buttonTextLabel:h.a._("Continue creating your Pinterest account","Accessiblity button text to continue creating an account"),checkEmailExistsWithCompletion:this.checkEmailExistsWithCompletion,email:t,emailFieldHasError:this.state.emailFieldHasError,emailText:h.a._("Email"),emailLabel:h.a._("Enter your email","Accessiblity input text on login screen"),emailValidationError:this.state.emailValidationError,onTypoSuggestionClick:this.handleTypoSuggestionClick,inputStyleOverrides:i,newEmail:n,onAgeChange:o,onButtonClick:this.handleButtonClick.bind(this),onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:s,passwordText:h.a._("Create a password"),passwordValidationError:this.state.passwordValidationError,showAgeInput:!0,suppressFocus:r,updateEmail:l,isSignupForm:!0}):a.a.createElement("div",{"data-test-id":"emailSignUpButton"},a.a.createElement(T.d,{text:h.a._("Sign up with email","the description of sign up with email button on sign up modal"),color:"red",onClick:this.handleSignupWithEmailClick}))}),N(this,"renderReorderedButtons",()=>{const{signupSeparatorContinuous:e}=this.props;return a.a.createElement("div",null,this.renderSocialButtons(),this.state.showRegisterForm?a.a.createElement("div",{style:{marginBottom:"10px"}},a.a.createElement(r.a,{signupSeparatorContinuous:e})):null,this.renderSignupForm())}),N(this,"renderSocialButtonsOnly",()=>{this.renderSocialButtons()}),N(this,"renderOriginalForm",()=>{const{signupSeparatorContinuous:e}=this.props;return a.a.createElement("div",null,this.renderSignupForm(),this.state.showRegisterForm?a.a.createElement(r.a,{signupSeparatorContinuous:e}):null,this.renderSocialButtons())}),N(this,"renderButtons",()=>{const{sm:e}=this.props;return"2"===e?this.renderReorderedButtons():"1"===e?this.renderSocialButtonsOnly():this.renderOriginalForm()}),N(this,"showUnderAgeError",()=>{this.setState({ageValidationError:h.a._("Sorry, you can't sign up yet. Youâ€™re not old enough to use Pinterest yet.","Error message when under age user trying to register")})}),this.state={ageValidationError:e.ageValidationError||null,accountRecoveryModalType:null,emailFieldHasError:!1,emailValidationError:e.emailValidationError||null,facebookValidationError:null,googleValidationError:null,passwordValidationError:e.passwordValidationError||null,showRegisterForm:"home_page"===this.props.container},this.emailValidators=[Object(A.i)({message:h.a._("You missed a spot! Don't forget to add your email.")}),Object(A.c)({message:h.a._("Hmm...that doesn't look like an email address.")})];const i=h.a._("Your password is too short! You need 6+ characters."),n=h.a._("Passwords can only include alphabet letters, numbers, and common punctuation characters.","Only ASCII characters are allowed for password"),o=h.a._("Help us protect you by providing your age","Error message shown when user did not fill the age field in the sign up model");this.passwordValidators=[Object(A.i)({message:i}),Object(A.f)({shortPassStr:i,samePasswordStr:h.a._("Please make your username and password different."),blackPassStr:h.a._("Please make a stronger password.")})],this.asciiValidators=[Object(A.b)({message:n})],this.loginPasswordValidators=[Object(A.i)({message:i}),Object(A.b)({message:n}),Object(A.e)({messages:{min:i},min:6})],this.shouldRequireAge()?this.ageValidators=[Object(A.i)({message:o}),Object(A.a)({message:h.a._("Please enter a valid number.")})]:this.ageValidators=[Object(A.a)({message:h.a._("Please enter a valid number.")})]}componentDidMount(){const{requestContext:e}=this.props;this.inDisableAccountKitPhoneNumberLoginExp()||u.a.setupPhoneAuth(e.locale)}UNSAFE_componentWillReceiveProps(e){const{ageValidationError:t,emailValidationError:i,passwordValidationError:n}=e;let a={};i!==this.props.emailValidationError?a={emailValidationError:i}:n!==this.props.passwordValidationError?a={passwordValidationError:n}:t!==this.props.ageValidationError&&(a={ageValidationError:t}),this.setState(a)}getButtonText(){return h.a._("Continue","Continue button on web")}handleBlur(e){"id"===e?this.setState({emailValidationError:null}):"age"===e&&this.setState({ageValidationError:null}),this.setState({facebookValidationError:null,googleValidationError:null})}handleLoginFailure(e,t,i=!1){const{clearPassword:n,email:a,onLoginWithMfa:o}=this.props;this.contextLogSignupLoginEvent(7535);const s=e.http_status===l.a.RESPONSE_CODE_TOO_MANY_REQUESTS?l.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;if(s===l.a.LOGIN_MFA_REQUIRED)return void M.c.handleLoginMfa(t,e.data,o);const r=M.c.getLoginErrorState(e,"emailPasswordStep",a,y.a,this.updateAccountRecoveryModal);r?(this.setState({accountRecoveryModalType:R.a[s],...r}),n&&r.passwordValidationError&&n(),this.setLoadingState(!1)):(h.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(L.a)(h.a._("Sorry! Something went wrong on our end.")),this.setLoadingState(!1))}handleLoginSuccess(e){this.contextLogSignupLoginEvent(7536),M.c.storeLoginCredentialsToBrowser(e);const{showResponseMessageModal:t}=this.props;t?t(!1):window.location.reload()}login(e){this.setLoadingState(!0);const t=e||{username_or_email:this.props.email,password:this.props.password},i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(g.a)(t,i,this.props.requestContext.seoUnauthExperiments).then(()=>{this.handleLoginSuccess(t)},e=>{e.api_error_code===l.a.INVALID_PASSWORD_ERROR_CODE?(this.setState({passwordValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===l.a.INVALID_PASSWORD_FB_USER?(this.setState({facebookValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===l.a.INVALID_PASSWORD_GOOGLE_USER?(this.setState({googleValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===l.a.LOGIN_MFA_REQUIRED?(M.c.storeLoginCredentialsToBrowser(t),this.props.onLoginWithMfa(t,e.data)):(this.setState({emailValidationError:e.message}),this.setLoadingState(!1))})}contextLogSignupLoginEvent(e){const{viewer:t}=this.props;t.isAuth?Object(O.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:1}):Object(O.a)(e,{signup_login_method:1})}validateEmailAvailable(e){this.setLoadingState(!0);const{hybridTier:t,pageType:i}=this.context,{container:n,email:a,password:o,requestContext:{seoUnauthExperiments:s}}=this.props;this.checkEmailExistsWithCompletion(a,()=>{const e={username_or_email:a,password:o},r={container:n,hybridTier:t,page:i};Object(g.a)(e,r,s).then(t=>{this.handleLoginSuccess(e)},t=>{this.handleLoginFailure(t,e)}),this.contextLogSignupLoginEvent(7534)},()=>{if(!this.validateAgeRequirement()&&!this.validatePasswordRequirement()){if(function(e){const t=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2===t.length){const e=t[1],i=e&&-1!==e.indexOf(".")?e.split("."):[];if(i.length>=2&&"gmail"===i[0]&&"com"!==i.slice(1).join("."))return!0;const n=Object(p.a)(e,"gmail.com");if("g"===e.charAt(0)&&(1===n||2===n))return!0}return!1}(a))return this.setLoadingState(!1),void this.setState({emailFieldHasError:!0});this.completeRegistration(e)}})}render(){const{additionalChildren:e,dark:t}=this.props,i=V.signupContainer,n=a.a.createElement(R.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:this.props.email,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated});return a.a.createElement("div",{style:i},n,this.renderButtons(),a.a.createElement(_.a,{dark:t}),e)}}U.contextTypes={country:E.a.string,hybridTier:E.a.string,pageType:E.a.string};var W=Object(B.compose)(I.e,Object(o.connect)((e,t)=>({viewer:e.viewer,prevEmailTaken:!!t.loggedOutUserInfo&&t.loggedOutUserInfo.emailTaken}),(e,t)=>({setEmailTaken:t=>e(Object(w.a)(t))})),P.withRouter)(U),D=i("3NaU");function G(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return H}));const z={signup:{margin:"0 auto",position:"relative",textAlign:"center"},inputStyleOverrides:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"}},q=Object.freeze({SIGNUP:"signup"});class H extends n.Component{constructor(...e){super(...e),G(this,"state",{step:q.SIGNUP})}showStep(e){if(e===q.SIGNUP)return a.a.createElement(D.a,null,({tokenV3:e,refreshToken:t})=>a.a.createElement(W,{additionalChildren:this.props.additionalEmailPasswordChildren,age:this.props.age,container:this.props.container,dark:this.props.dark,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,email:this.props.email,emailValidationError:this.props.emailValidationError,setWelcomeBackMessageForExistingEmail:this.props.setWelcomeBackMessageForExistingEmail,loadingIndicatorCallback:this.props.loadingIndicatorCallback,name:this.props.name,nextUrlParam:this.props.nextUrlParam,passwordValidationError:this.props.passwordValidationError,inputStyleOverrides:z.inputStyleOverrides,onAgeChange:this.props.onAgeChange,onFBPhoneOnlyConnectVerified:this.props.onFBPhoneOnlyConnectVerified,onEmailChange:this.props.onEmailChange,onFBEmailDeniedPerm:this.props.onFBEmailDeniedPerm,onSocialConnectVerified:this.props.onSocialConnectVerified,onLoginWithMfa:this.props.onLoginWithMfa,onPasswordChange:this.props.onPasswordChange,password:this.props.password,setNameFromEmail:this.props.setNameFromEmail,showLoginWelcomeLoadingFn:this.props.showLoginWelcomeLoadingFn,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,signupSeparatorContinuous:this.props.signupSeparatorContinuous,signupSource:this.props.signupSource,sm:this.props.sm,suppressFocus:this.props.suppressFocus,clearPassword:this.props.clearPassword,onShowRegisterForm:this.props.onShowRegisterForm,showResponseMessageModal:this.props.showResponseMessageModal,recaptchaTokenV3:e,refreshRecaptchaTokenV3:t}))}render(){return a.a.createElement("div",{"data-test-id":"signup",style:z.signup},this.showStep(this.state.step))}}G(H,"defaultProps",{dark:!0})},weew:function(e,t,i){var n=i("q1tI"),a=i.n(n);t.a=(e,t,i,n=!1)=>{const o="M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",s=a.a.createElement("circle",{cx:"38",cy:"38",fill:"white",r:"40"});let r,l;return r=t?"-3 -3 82 82":"3 3 70 70",l=i||"#e60023",n?a.a.createElement("svg",{height:e,viewBox:r,width:e},t?s:null,a.a.createElement("path",{d:o,fill:l,fillRule:"evenodd"})):a.a.createElement("svg",{height:e,style:{display:"block"},viewBox:r,width:e},t?s:null,a.a.createElement("path",{d:o,fill:l,fillRule:"evenodd"}))}}}]);
//# sourceMappingURL=pjs-7-1f5b7dc0a80800ba03fc.mjs.map
