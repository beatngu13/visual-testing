(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["BusinessAccountLoginPageDesktop~FullPageSignup~LoginModal~LoginPageDesktop~LoginPageSterling~UnauthH~ffd0224e"],{"0Oe5":function(e,t,i){var n=i("GyhR"),o=i.n(n),a=i("wCwO"),s=i("Qo1m"),r=i("+U6O");t.a=()=>o.a.createElement(r.b,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%"},o.a.createElement(r.b,{color:"white",height:600,minWidth:"500px",shape:"rounded",width:"30%"},o.a.createElement(r.b,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12},o.a.createElement(r.b,{alignItems:"center",color:"red",display:"flex",height:60,justifyContent:"center",marginBottom:4,shape:"circle",width:60},o.a.createElement(r.m,{accessibilityLabel:s.a._("Loading state for google one tap registration"),color:"white",icon:"pin",size:"28"})),o.a.createElement(r.b,{alignItems:"center",paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}}},o.a.createElement(r.l,{size:"sm"},s.a._("Welcome to Pinterest!","Welcome to Pinterest!"))),o.a.createElement(r.J,{size:"xl",align:"center",overflow:"normal"},s.a._("Your answers to the next questions will help us find the right ideas for you","loading state description while waiting for google one tap registration to complete"))),o.a.createElement(a.a,{duration:6e3,finalProgress:95})))},"3SOx":function(e,t,i){i.d(t,"a",(function(){return l}));var n=i("GyhR"),o=i.n(n),a=i("ggpB");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const r={signupTitle:{color:"#333",fontSize:"32px",fontWeight:"bold",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"-1.2px"}};class l extends n.Component{constructor(...e){super(...e),s(this,"componentDidMount",()=>{const e=this.props,t=e.container,i=e.hybridTier,n=e.modalType;Object(a.a)("web.unauth.modal_title.view"),Object(a.a)(`unauth_web_modal.${t||"unknown"}.${i||"undefined_tier"}.${n}.shown`)}),s(this,"getSignupTitleStyles",()=>{const e=this.props.darkSignupTitle;let t=r.signupTitle;return e&&(t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){s(e,t,i[t])}))}return e}({},t,{color:"#000"})),t})}render(){const e=this.props.titleText,t=this.getSignupTitleStyles();return o.a.createElement("h3",{style:t},e)}}},"4RNB":function(e,t,i){var n=i("GyhR"),o=i.n(n),a=i("D+W/"),s=i("Qo1m"),r=i("i7XF"),l=i("QtSf"),c=i("+U6O");var d=e=>{const t=e.age,i=e.error,n=e.handleAgeChange,a=e.handleSubmit,r=e.inputRef;return o.a.createElement(c.b,null,o.a.createElement("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),a()}},o.a.createElement(c.b,null,o.a.createElement(c.J,{align:"left"},s.a._("How old are you?","Title for the age collection input field after connecting with Facebook or Google"))),o.a.createElement(c.b,{marginTop:2}),o.a.createElement(c.b,null,o.a.createElement(c.L,{id:"age",errorMessage:i||"",onChange:n,placeholder:s.a._("Age","text field for user to enter their age"),ref:e=>{r&&r(e)},type:"number"})),o.a.createElement(c.b,{marginTop:3}),o.a.createElement(c.b,null,o.a.createElement(c.c,{color:"red",disabled:!t,text:s.a._("Continue"),type:"submit"}))))},g=i("ggpB"),p=i("7M64"),h=i("ovu7"),u=i("k9eC"),m=i("NmcB"),b=i("2rhI"),f=i("2YES");function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){S(e,t,i[t])}))}return e}function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const w={container:{margin:"0 auto",width:"268px"}};class y extends n.Component{constructor(...e){super(...e),S(this,"state",{age:"",error:""}),S(this,"getViewParameter",e=>e.type===b.a.FACEBOOK?3205:e.type===b.a.GOOGLE?3204:e.type===b.a.GOOGLE_ONE_TAP?3201:void 0),S(this,"handleAgeChange",({value:e})=>{this.setState({age:e})}),S(this,"handleSignupSuccess",()=>{this.track("signup_success"),Object(m.a)(7487,{viewParameter:this.getViewParameter(this.props.registrationCredentials)});const e=this.props.showResponseMessageModal;e?e(!0):r.c.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0)}),S(this,"handleSignupFailure",e=>{this.track("signup_failure"),this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.props.showSignupWelcomeLoadingFn&&this.props.showSignupWelcomeLoadingFn(!1),Object(m.a)(7488,{viewParameter:this.getViewParameter(this.props.registrationCredentials)});let t=e.message||s.a._("Oops! Something went wrong… Click Continue to try again.","Error during signup during age collection step");e.api_error_code===a.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(t=s.a._("Uh oh... it looks like you’re not old enough just yet.","Underage error during signup")),this.setState({error:t})}),S(this,"handleSubmit",()=>{const e=this.state.age;this.track(`submit_button_click.${e||"undefined"}`);const t=this.props,i=t.loadingIndicatorCallback,n=t.registrationCredentials,o=t.requestContext,a=t.showSignupWelcomeLoadingFn,s=t.showResponseMessageModal,r=this.validateAge(e||"");if(r)return void this.setState({error:r});let l;this.setState({error:""}),n.type===b.a.GOOGLE_ONE_TAP?l="web_unauth_google_one_tap_welcome":n.type===b.a.GOOGLE?l="web_unauth_gplus_welcome_v2":n.type===b.a.FACEBOOK&&(l="web_unauth_fb_welcome_v2");let c=!1;if(l?(c=new u.c(o,l).enabled(),o.experiments.flush()):i&&i(!0),Object(m.a)(7537,{viewParameter:this.getViewParameter(n)}),n.type===b.a.FACEBOOK){this.track("attempt_signup");const t=E({},p.a.buildFacebookRegistrationResourceOptions(n.userData),n.credentialsAndLoggingData,{recapToken:null,age:e});p.a.register(t).then(this.handleSignupSuccess,this.handleSignupFailure)}else n.type!==b.a.GOOGLE&&n.type!==b.a.GOOGLE_ONE_TAP||(this.track("attempt_signup"),p.a.register(E({},n.credentialsAndLoggingData,{age:e})).then(this.handleSignupSuccess,this.handleSignupFailure));!s&&a&&c&&a(!0)})}componentDidMount(){this.track("shown"),this.focusInputField()}track(e){const t=this.props,i=t.container,n=t.registrationCredentials,o=n?n.type:"undefined";Object(g.a)(`unauth_web.age_collection_form.${e}.${o}.${i||""}`)}focusInputField(){this.inputRef&&this.inputRef.textfield&&this.inputRef.textfield.focus()}validateAge(e){return Object(l.a)(e,[Object(h.a)({message:s.a._("Please enter a valid number.")})])}render(){const e=this.state,t=e.age,i=e.error;return o.a.createElement("div",{style:w.container},o.a.createElement(d,{age:t,error:i,handleAgeChange:this.handleAgeChange,handleSubmit:this.handleSubmit,inputRef:e=>{this.inputRef=e}}))}}S(y,"defaultProps",{container:"undefined"});t.a=Object(f.e)(y)},"4iIQ":function(e,t,i){i.d(t,"b",(function(){return a})),i.d(t,"f",(function(){return s})),i.d(t,"e",(function(){return r})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"k",(function(){return d})),i.d(t,"i",(function(){return g})),i.d(t,"g",(function(){return p})),i.d(t,"h",(function(){return h})),i.d(t,"j",(function(){return u})),i.d(t,"a",(function(){return m}));var n=i("TLUQ"),o=i("2cJX");const a=398,s=708,r=460,l=560,c=3,d=708,g=398,p=480,h=6,u=500,m=1150;t.l=(e,t,i="",a=!1,s="",r)=>{if(i===n.a.PIN&&s===o.a.tier1&&!r&&t[1000150]&&501018===t[1000150].experience_id){return(e.v2GetGroup("web_unauth_plp_education_video")||"").startsWith("enabled")}return!1}},"9Fbe":function(e,t,i){var n=i("GyhR"),o=i.n(n);t.a=(e,t,i,n=!1)=>{const a="M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",s=o.a.createElement("circle",{cx:"38",cy:"38",fill:"white",r:"40"});let r,l;return r=t?"-3 -3 82 82":"3 3 70 70",l=i||"#e60023",n?o.a.createElement("svg",{height:e,viewBox:r,width:e},t?s:null,o.a.createElement("path",{d:a,fill:l,fillRule:"evenodd"})):o.a.createElement("svg",{height:e,style:{display:"block"},viewBox:r,width:e},t?s:null,o.a.createElement("path",{d:a,fill:l,fillRule:"evenodd"}))}},Aizh:function(e,t,i){var n=i("GyhR"),o=(i("vG9Z"),i("hvnN")),a=i.n(o);a.a.shape({v2GetGroup:a.a.func.isRequired,v2ActivateExperiment:a.a.func.isRequired}).isRequired;t.a=e=>{const t=function(t,i){return n.createElement(e,Object.assign({seoExperiments:i.seoExperiments},t))};return t.displayName=`WithSeoExperiments(${String(e.displayName||e.name)})`,t.contextTypes={seoExperiments:a.a.shape({v2GetGroup:a.a.func.isRequired,v2ActivateExperiment:a.a.func.isRequired}).isRequired},t}},JpAB:function(e,t,i){i.r(t);var n=i("GyhR"),o=i.n(n),a=i("Ivf5"),s=i("VSY/"),r=i("+aUF"),l=i("D+W/"),c=i("iz36"),d=i("vG9Z"),g=i("1JxL"),p=i("3SOx"),h=i("Qo1m"),u=i("tbiL"),m=i("V0Gb"),b=i("bvxc"),f=i("O9k4"),E=i("oL+s"),S=i("9Fbe"),w=i("ocVj"),y=i("hvnN"),_=i.n(y),v=i("yiER"),x=i("MJXA"),L=i("tAeg"),C=i("0Oe5"),O=i("4RNB"),T=i("q579"),k=i("Aizh"),P=i("cEhz"),R=i("9Y9K"),F=i.n(R),M=i("UnnU"),A=i("Irlq"),j=i("k9eC"),B=i("NmcB"),W=i("m3Ge"),I=i("4iIQ"),V=i("ggpB"),N=i("rlRx"),U=i("73jm"),D=i("2YES"),G=i("+U6O"),z=i("1eSR");function q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){H(e,t,i[t])}))}return e}function H(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const $=Object(u.a)({chunkName:()=>"UnauthVideo",isReady(e){return!!i.m[this.resolve(e)]},requireAsync:()=>Promise.all([i.e(0),i.e("UnauthVideo")]).then(i.bind(null,"eJa8")),requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return"eJa8"}}),Y=l.a.GEN.templateConst.settings.PARTNER_SITE_SIGNUP,Q={signup:{backgroundColor:"#fff",borderRadius:"8px",position:"relative",textAlign:"center",width:"404px",margin:"auto",minHeight:"450px",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},signupMobile:{backgroundColor:"#fff",position:"absolute",left:"0",right:"0",top:"0",minHeight:"100vh",textAlign:"center"},signupModal:{textAlign:"center"},signupForm:{minHeight:"400px",padding:"20px 10px"},signupInviteForm:{minHeight:"400px",padding:"30px 10px 20px"},signupTitleContainer:{margin:"0 auto 25px",width:"270px"},signupTitleMfaContainer:{padding:"0 10px"},signupTitle:{color:"#333",fontSize:"32px",fontWeight:"bold",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"-1.2px"},haveAccountText:{display:"inline-block",marginRight:"4px"},logoContainer:{display:"block",height:"45px",margin:"5px auto",width:"45px"},pinterestLogo:{textAlign:"center",paddingTop:"20px",display:"inline-block"},inputFields:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"},separator:{borderBottom:"#efefef 1px solid",margin:"20px 0px 15px -68px",width:"404px"},signupLoginToggle:{color:"#333",fontSize:"14px",fontWeight:"normal",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},profilePic:{margin:"0 auto 16px",width:"108px"},personalizedModalContainer:{backgroundColor:"#fff",borderRadius:"8px",padding:"22px 0",position:"relative",textAlign:"center",width:"400px",margin:"auto",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},closeButton:{backgroundColor:"transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"absolute",right:"10px",top:"10px"},notNowButton:{border:"none",color:"#717171",fontWeight:"bold",textDecoration:"none",backgroundColor:"#eee",height:"36px",borderRadius:"5px",fontSize:"16px",width:"268px",marginTop:"10px"},onClickEmailConfirmationButton:{width:"270px",marginTop:"40px"},signupSubtitles:{textAlign:"center",color:"#333",fontSize:"16px",fontWeight:"normal",margin:"-15px 0 20px"},businessHeader:{float:"left",color:"#333",fontSize:"14px",fontWeight:"normal",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},businessLink:{cursor:"pointer",marginLeft:"5px",float:"left"},businessContainer:{margin:"10px auto 5px",display:"flex",alignItems:"baseline",width:"fit-content"},closeButtonStyle:{position:"absolute",right:"10px",paddingTop:"10px",zIndex:"1"}};class J extends n.Component{constructor(e){super(e),H(this,"getNextUrlParam",()=>{const e=this.props.nextUrlParam;return e?decodeURIComponent(e):e}),H(this,"getNextUrl",e=>this.getNextUrlParam()?T.a.buildRelativeUrl(e,{next:this.getNextUrlParam()}):e),H(this,"getSignupBoxStyle",()=>{return"home_page"===this.props.container?q({},Q.signup,{minHeight:"initial"}):Q.signup}),H(this,"showAdditionalStep",e=>(t,i,n)=>{this.setState({type:e,socialRegistrationCredentials:{type:t,userData:i,credentialsAndLoggingData:n}})}),H(this,"tagline",(e,t,i)=>{const n=this.props.requestContext,o=this.clickthroughTaglineCopy();let a=o||h.a._("Sign up to see more","sigup copy default includes pin click and scrolling");const s=e===U.c.signup&&!o&&new j.b(n,"unauth_tagline_emoji_location_copy");s&&s.check("enabled_lightbulb")?a=h.a._("Have your next 💡 moment on Pinterest","Tagline on sign up page with an emoji icon of a lightbulb, saying have your next lightbulb moment on pinterest"):s&&s.check("enabled_boom")?a=h.a._("Ideas that will 💥 your mind","Tagline on sign up page with an emoji icon of an explosion or boom, saying that Pinterest has ideas that will blow your mind"):s&&s.check("enabled_pin")?a=h.a._("📌 ideas for you next big project","Tagline on sign up page with an emoji of a red pin, saying Pin ideas for your next big project"):s&&s.check("enabled_heart")?a=h.a._("Find ideas you'll ❤️","Tagline on sign up page with an emoji heart, saying find ideas you'll love"):s&&s.check("enabled_signup")?a=h.a._("Sign up to find ideas you'll ❤️","Tagline on sign up page with an emoji heart, saying sign up to find ideas you'll love"):s&&s.check("enabled_triple")?a=h.a._("Get ready to 🔨, 🎨, 🍳 and more!️","Tagline on sign up page with three emoji of a hammer, painting pallette, and fried egg, saying that Pinterest is good for DIY, art, and cooking."):s&&s.check("enabled_halloween")?a=h.a._("Get ready for 🎃","Tagline on sign up page with an emoji jackolantern saying get read for Halloween"):s&&s.check("enabled_no_text")&&(a="");const r={defaultSource:a,boardInvite:h.a._("Sign up to accept your board invite","Sign up copy board invite"),userFollow:h.a._("Sign up to see more of this profile","signup copy user follow"),userProfilePage:h.a._("Sign up to see more of this profile","signup copy profile page"),saveButton:h.a._("Sign up to see more","signup copy save button"),signupButton:h.a._("Sign up to see more","signup copy signup button"),homePage:h.a._("Welcome to Pinterest","Title on desktop signup modal on home page"),login:a,loginMfa:a,actionButton:a,boardPage:a,giftWrap:a,invite:a,mwebDefaultSource:a,navigateBoard:a,navigateInterest:a,navigatePin:a,personalizedFlyout:a,unauthBanner:a,unauthHeader:a},l=h.a._("Log in to see more","Title on desktop login modal"),c={boardInvite:h.a._("Log in to accept your board invite","Login copy board invite"),invite:h.a._("Log in to invite friends"),login:l,saveButton:h.a._("Log in to see more","Title on desktop login modal"),homePage:h.a._("Welcome to Pinterest","Title on desktop signup modal on home page"),defaultSource:l,loginMfa:l,actionButton:l,boardPage:l,giftWrap:l,mwebDefaultSource:l,navigateBoard:l,navigateInterest:l,navigatePin:l,personalizedFlyout:l,signupButton:l,unauthBanner:l,userFollow:l,userProfilePage:l,unauthHeader:l},d={login:h.a._("Two-Factor Authentication Required")};let g;return g=e===U.c.signup||e===U.c.signupOrPersonalizedLogin?r[t]:e===U.c.loginMfa?d[U.b.login]:c[t]}),H(this,"valuePropAsSubtitle",e=>e===U.b.homePage?h.a._("Find new ideas to try","Value prop on desktop signup modal on home page"):h.a._("Discovery starts here","Pinterest value proposition on desktop login modal")),H(this,"valuePropAsTitle",()=>h.a._("Access our best ideas with a free account","Value prop on desktop signup modal")),H(this,"switchToSignup",()=>{this.setModalType(U.c.signup)}),H(this,"toggleMagicLinkConfirmation",e=>{this.setState({type:e?U.c.magicLinkConfirmation:U.c.login})}),H(this,"clearPassword",()=>{this.setState({password:""})}),H(this,"handlePreventRegisterFromPersonalizedModal",e=>{Object(V.a)(`unauth.personalized_login.prevent_register.${e}`),this.setState({headerStyle:"default",isPersonalizedModal:!1,isLoading:!1}),this.switchToSignup()}),H(this,"handleNotYouClick",e=>{const t=this.props.viewer;e.event.preventDefault(),this.setState({headerStyle:"default",isPersonalizedModal:!1,password:""}),Object(V.a)("unauth.personalized_login.not_you.click"),t.isAuth?Object(B.a)(101,{element:10879,login_state:t.isLimitedLogin?2:1}):Object(B.a)(101,{element:10879})}),H(this,"toggleLoadingIndicator",e=>{this.setState({isLoading:e})}),H(this,"handleLoginToggleButtonClick",e=>{const t=this.props.handleModalTypeSwitch;this.trackScopedAction("login_toggle_click"),t&&t(),this.setModalType(U.c.login,e),this.setWelcomeBackMessageForExistingEmail(!1)}),H(this,"handleSignupToggleButtonClick",e=>{const t=this.props,i=t.handleModalTypeSwitch,n=t.seoUnauthExperiments,o=t.pageType,a=t.hybridTier,s=t.requestContext,r=t.eligibleExperiences;this.trackScopedAction("signup_toggle_click"),i&&i(),this.setModalType(U.c.signup,e),Object(I.l)(n,r,o,!0,a,s.isBot)&&(this.state.type===U.c.login||this.state.type===U.c.signup)&&this.setState({isShowRegisterForm:!1})}),H(this,"handleConfirmationPageButtonClick",e=>{this.setModalType(U.c.login,e)}),H(this,"handleNotNowClick",e=>{this.setModalType(U.c.signup,e),this.toggleLoadingIndicator(!1)}),H(this,"handleSignupToggleFromPersonalized",e=>{const t=this.props.viewer;e.event.preventDefault(),Object(V.a)("unauth.personalized_login.signup_instead.click"),this.setState({password:""}),t.isAuth?Object(B.a)(101,{element:10880,login_state:t.isLimitedLogin?2:1}):Object(B.a)(101,{element:10880}),this.handleSignupToggleButtonClick(e)}),H(this,"handlePostConnectClick",()=>{Object(V.a)("unauth.fb_email_reauth.post_connect.click")}),H(this,"handlePostSuccessConnect",()=>{Object(V.a)("unauth.fb_email_reauth.post_success.connect")}),H(this,"handleShowRegisterForm",()=>{this.setState({isShowRegisterForm:!0})}),H(this,"updateEmail",e=>{this.setState({email:e,clearError:!0})}),H(this,"showLoginWelcomeLoadingFn",e=>{this.setState({showLoginWelcomeLoading:e})}),H(this,"showSignupWelcomeLoadingFn",e=>{this.setState({showSignupWelcomeLoading:e}),this.props.handleShowingSignupWelcomeLoading&&this.props.handleShowingSignupWelcomeLoading(e)}),H(this,"setWelcomeBackMessageForExistingEmail",e=>{this.setState({isExitingUserInSignup:e})}),H(this,"renderSocialSignupModalText",(e,t,i)=>{const a=this.props,s=a.container,r=a.darkSignupTitle,l=a.delayedTitleRender,c=a.hybridTier,d=a.inviter,g=a.type;if(e){const e=d?d.first_name:"",t=d?d.image_medium_url:"",a=g===U.c.respondMessage,u=a?h.a._("Sign up and let {{ name }} know what you think","Prompt user to signup to access all Pinterest features").replace("{{ name }}",e):h.a._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features").replace("{{ name }}",e);return o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:Q.profilePic},o.a.createElement(G.a,{src:t,name:e,verified:a,icon:"pinterest"})),o.a.createElement("div",{style:i},!l&&o.a.createElement(p.a,{container:s,darkSignupTitle:r,hybridTier:c,modalType:U.a.signup,titleText:u})))}return t});const t=T.a.getQueryStringParams();this.state={clearError:!1,type:"signup"===t.type?U.c.signup:this.props.type,email:e.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:e.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",isExitingUserInSignup:!1,isPersonalizedModal:null,isLoading:!1,socialRegistrationCredentials:this.props.socialRegistrationCredentials,step:"signup",showLoginWelcomeLoading:!1,showSignupWelcomeLoading:!1,isShowRegisterForm:!1}}componentDidMount(){const e=this.props,t=e.AMPClientId,i=e.userInfo,n=e.viewer;if(this.logModalShown(this.state.type),this.context.logging&&(n.isAuth?Object(B.a)(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter,login_state:n.isLimitedLogin?2:1}):Object(B.a)(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter})),t&&Object(V.c)("signup_page_from_amp",{amp_client_id:t}),n.isAuth&&n.isLimitedLogin){const e={connected_to_facebook:this.isLimitedLoginUserFBConnected(),connected_to_google:this.isLimitedLoginUserGplusConnected(),email:n.email,first_name:n.firstName,has_password:n.hasPassword,medium_image_url:n.imageMediumUrl};this.setPersonalizedModal(e)}else this.setPersonalizedModal(i)}UNSAFE_componentWillUpdate(e,t){t.type!==this.state.type&&this.logModalShown(t.type)}componentDidUpdate(e){this.props.userInfo!==e.userInfo&&this.setPersonalizedModal(this.props.userInfo),this.props.type!==e.type&&this.setState({type:this.props.type,email:this.props.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:this.props.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",socialRegistrationCredentials:this.props.socialRegistrationCredentials})}componentWillUnmount(){const e=this.props,t=e.isAccountSwitch,i=e.container;t&&(Object(N.k)("add_account_dismiss",null,i),Object(N.h)(i))}getSignupStyles(){const e=this.props.modal,t=this.getSignupBoxStyle();return e?Q.signupModal:t}setModalType(e,t){this.setState({type:e})}setNameFromEmail(){this.setState({name:Object(w.a)(this.state.email)})}setPersonalizedModal(e){const t=this.props,i=t.signupSource,n=t.isAccountSwitch,o=t.toggleModalType,a=this.state,s=a.isPersonalizedModal,r=a.type;n||e&&Object.keys(e).length>0&&!s&&(e.medium_image_url.endsWith("user/default_150.png")&&(e.medium_image_url=""),this.setState({isPersonalizedModal:!0,userInfo:e}),i===U.b.homePage&&r===U.c.signup&&o&&o())}clickthroughTaglineCopy(){const e=this.props,t=e.container,i=e.requestContext,n=this.state.type,o=t&&-1!==t.indexOf("clickthrough")&&new j.b(i,"unauth_clickthrough_modal_copy_change");return o&&o.check(""),o&&(n===U.c.signup&&o.check("enabled_signup")||n===U.c.login&&o.check("enabled_login"))?h.a._("Sign up to see and save more ideas","Tagline on signup prompt after users returns from having clicked on a pin and viewed the content on another site"):""}logModalShown(e){Object(V.a)(`unauth.authentication_modal.shown.${this.props.toggleType}.${e}`),Object(V.a)(`unauth_web_temporary.authentication_modal.shown.container_${this.props.container}.is_dismissible_${String(!!this.props.isDismissible)}`)}trackScopedAction(e){Object(V.a)(`unauth.authentication_modal.${e}.${this.props.toggleType}.${this.state.type}`)}handleDataChange(e,t){const i={};i[e]=t.target.value,this.setState(i)}handleLoginWithMfa(e,t){const i={mfaCreds:e,mfaPhoneNumberEnd:void 0};t&&t.phone_number_end&&(i.mfaPhoneNumberEnd=t.phone_number_end),this.setState(i),this.setModalType(U.c.loginMfa)}changeStep(e){this.setState({step:e})}isUnidentifiedSignupMethod(){const e=this.props.viewer;if(e.isAuth&&e.isLimitedLogin)return this.isUnidentifiedLimitedLoginSignupMethod();const t=this.state.userInfo;return t&&!(t.has_password||t.connected_to_facebook||t.connected_to_google)}isUnidentifiedLimitedLoginSignupMethod(){const e=this.props.viewer;return e.isAuth&&e.isLimitedLogin&&!(e.hasPassword||this.isLimitedLoginUserGplusConnected()||this.isLimitedLoginUserFBConnected())}isLimitedLoginUserFBConnected(){const e=this.props.viewer;return e.socialNetwork&&e.socialNetwork.facebook&&e.socialNetwork.facebook.connected}isLimitedLoginUserGplusConnected(){const e=this.props.viewer;return e.socialNetwork&&e.socialNetwork.gplus&&e.socialNetwork.gplus.connected}renderModalSideImage(e,t=600){const i=e||{},n=i.image_url,a={height:"100%",width:i.image_aspect_ratio*t,maxWidth:400,backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${n})`};return o.a.createElement("div",{style:{borderRadius:"8px 0 0 8px",overflow:"hidden"}},o.a.createElement("div",{style:a}))}renderModalSideVideo(e=!1,t,i,n){const a=this.state,s=a.isShowRegisterForm,r=a.type;let l=I.b;const c=I.f;return r===U.c.login?l=I.d:r===U.c.signup&&(l=s?I.b:I.e),o.a.createElement($,{autoplay:!0,muted:!0,margin:I.c,video:{mp4:{url:t,thumbnail:i,duration:n,width:c,height:l}},view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter,componentLogging:13326,modalOpened:!1,fallback:o.a.createElement("div",null)})}renderLoadingIndicator(){return this.state.isLoading?o.a.createElement(m.a,null):null}renderPersonalizedLogin(){const e=this.props,t=e.container,i=e.darkSignupTitle,a=e.delayedTitleRender,s=e.hybridTier,r=e.isBusiness,l=e.location,c=e.passwordValidationError,d=e.pins,g=e.viewer,u=e.type,m=this.state.showLoginWelcomeLoading;let f;const w=Object(z.a)(l.pathname,{path:"/pin/:id",exact:!0});if(g.isLimitedLogin&&w){const e=w.params.id,t=e&&d[e]&&d[e].images&&d[e].images["474x"];f=t&&{image_url:t.url,image_aspect_ratio:t.width/t.height||0}}const y=h.a._("Not you? Log in with a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account"),_=h.a._("Need an account? Sign up now","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account"),v=this.state.userInfo?this.state.userInfo.first_name:"",x=Object(A.b)(h.a._("Welcome back, {{name}}!","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest"),{name:v}),L=Q.logoContainer,C=q({},Q.signupTitleContainer,{width:"350px",overflow:"hidden",maxHeight:"120px"}),O=o.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),o.a.createElement("div",{style:L},Object(S.a)(40,!0)),o.a.createElement("div",{style:C},!a&&o.a.createElement(p.a,{container:t,darkSignupTitle:i,hybridTier:s,modalType:U.a.personalizedLogin,titleText:x})),o.a.createElement("div",{style:Q.profilePic},o.a.createElement(G.a,{src:this.state.userInfo?this.state.userInfo.medium_image_url:"",name:this.state.userInfo?this.state.userInfo.first_name:""})),o.a.createElement(G.b,{marginBottom:3},o.a.createElement(G.J,{size:"md",align:"center"},this.state.userInfo?this.state.userInfo.email:null)),o.a.createElement(D.a,null,e=>o.a.createElement(b.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.userInfo?this.state.userInfo.email:null,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:c,inputStyleOverrides:Q.inputFields,nextUrlParam:this.getNextUrlParam(),loginButtonTextOverride:h.a._("Continue"),hideEmailField:!0,hidePasswordField:!!this.state.userInfo&&!this.state.userInfo.has_password&&!this.isUnidentifiedSignupMethod(),hideFacebookButton:!!this.state.userInfo&&!this.state.userInfo.connected_to_facebook&&!this.isUnidentifiedSignupMethod(),hideGoogleButton:!!this.state.userInfo&&!this.state.userInfo.connected_to_google&&!this.isUnidentifiedSignupMethod(),hidePasswordReset:!0,hideTermsOfService:!0,onEmailChange:function(){},onSocialConnectVerified:this.showAdditionalStep(U.c.socialSignupWithAge),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,shouldPreventRegister:!0,triggerAccountRecoveryMode:this.handlePreventRegisterFromPersonalizedModal,showLoginWelcomeLoadingFn:this.showLoginWelcomeLoadingFn,showResponseMessageModal:u===U.c.respondMessage?this.props.showResponseMessageModal:void 0})),o.a.createElement(G.b,{paddingY:5},o.a.createElement(G.i,null)),o.a.createElement(G.b,{"data-test-id":"login-switch-account"},o.a.createElement(G.O,{onTouch:this.handleNotYouClick,fullWidth:!1},o.a.createElement(G.J,{size:"sm",align:"center",bold:!0},o.a.createElement(G.s,{href:"#"},y)))),o.a.createElement(G.b,{marginTop:1,marginBottom:4},o.a.createElement(G.O,{onTouch:r?()=>{Object(B.a)(101,{element:10880})}:this.handleSignupToggleFromPersonalized,fullWidth:!1},o.a.createElement(G.J,{size:"sm",align:"center",bold:!0},o.a.createElement(G.s,{href:r?this.getNextUrl("/business/create"):"#"},_)))));return f?o.a.createElement("div",{"data-test-id":"login",style:q({},Q.personalizedModalContainer,{display:"flex",width:"auto",padding:""})},this.renderModalSideImage(f),o.a.createElement("div",{style:{width:400,padding:"22px 0"}},O)):o.a.createElement(n.Fragment,null,o.a.createElement("div",{"data-test-id":"login",style:m?{display:"none"}:Q.personalizedModalContainer},O),m&&o.a.createElement(E.a,{width:400}))}renderSignupToLoginToggle(){return o.a.createElement(L.a,{buttonText:h.a._("Already a member? Log in","Toggle to switch from the sign up modal to the login modal "),link:"/login/",onClick:this.handleLoginToggleButtonClick,titleStylesOverride:Q.signupLoginToggle,useSmallButton:!0})}renderDefaultSignup(){const e=this.props,t=e.container,i=e.darkSignupTitle,a=e.delayedTitleRender,s=e.emailValidationError,r=e.passwordValidationError,l=e.signupSource,c=e.seoUnauthExperiments,d=e.viewer,g=e.renderBusinessCreateButton,u=e.inviter,m=e.pageType,b=e.hybridTier,f=e.requestContext,w=e.eligibleExperiences,y=e.type,_=this.state,L=_.age,C=_.email,O=_.gender,T=_.isExitingUserInSignup,k=_.name,P=_.password,R=_.showLoginWelcomeLoading;let F=this.props.customSignupTagline||(l?this.tagline(this.state.type,l,c):this.tagline(this.state.type,U.b.defaultSource,c));T&&(F=h.a._("Welcome back to Pinterest!","welcoming user back to pinterest in signup modal when we recognize their email"));const A=q({},this.getSignupStyles(),{width:"440px"},"home_page"===t?{paddingBottom:55}:null),j=Q.signupForm,W=Q.logoContainer;let N=Q.signupTitleContainer;"login_page"!==t&&(N=q({},N,{width:"355px"}));const D=Q.signupTitleContainer,z=Q.signupSubtitles;let H=o.a.createElement("div",null,o.a.createElement(v.a,{css:Q.separator}),o.a.createElement("div",null,this.renderSignupToLoginToggle()));this.props.toggleType===M.a.NOT_NOW_BUTTON?H=o.a.createElement("div",null,o.a.createElement(v.a,{css:Q.separator}),o.a.createElement("div",null,this.renderSignupToLoginToggle()),o.a.createElement("div",null,o.a.createElement("div",{style:Q.businessContainer},o.a.createElement("h5",{style:Q.businessHeader},h.a._("Are you a business? ")),o.a.createElement("a",{href:Y,style:Q.businessLink,target:"_blank",onClick:()=>{Object(V.a)("unauth.business_link.click"),d.isAuth?Object(B.a)(101,{component:13096,element:10281,login_state:d.isLimitedLogin?2:1}):Object(B.a)(101,{component:13096,element:10281})}},h.a._("Get started here"))))):"home_page"===t&&(H=o.a.createElement(G.b,{marginTop:3},this.renderSignupToLoginToggle()));let $=40;l===U.b.homePage&&($=50);const J=this.valuePropAsTitle(),K=!!u&&!u.is_default_image,X=o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:W},Object(S.a)($,!0)),o.a.createElement("div",{style:N},!a&&o.a.createElement(p.a,{container:t,hybridTier:b,darkSignupTitle:i,modalType:U.a.signup,titleText:"login_page"!==t&&"home_page"!==t?J:F})),o.a.createElement("div",{style:D},!this.state.isExitingUserInSignup&&o.a.createElement("h3",{style:z},"login_page"!==t&&"home_page"!==t?F:this.valuePropAsSubtitle(l)))),Z=(Object(I.l)(c,w,m,!0,b,f.isBot)&&(this.state.type===U.c.login||(this.state.type,U.c.signup)),o.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),o.a.createElement("div",{style:K?Q.signupInviteForm:j},this.renderSocialSignupModalText(K,X,N),o.a.createElement(x.a,{additionalEmailPasswordChildren:H,age:L,container:this.props.container,dark:!0,disablePostSignupNextUrl:!0,email:C,emailValidationError:s,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:r,gender:O,setWelcomeBackMessageForExistingEmail:this.setWelcomeBackMessageForExistingEmail,name:k,nextUrlParam:this.props.postSignupUrlParam||this.getNextUrlParam(),onAgeChange:this.handleDataChange.bind(this,"age"),onEmailChange:this.handleDataChange.bind(this,"email"),onFBEmailDeniedPerm:this.showAdditionalStep(U.c.FBEmailRerequest),onSocialConnectVerified:this.showAdditionalStep(U.c.socialSignupWithAge),onGenderChange:this.handleDataChange.bind(this,"gender"),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onNameChange:this.handleDataChange.bind(this,"name"),onPasswordChange:this.handleDataChange.bind(this,"password"),onStepChange:this.changeStep.bind(this),onShowRegisterForm:this.handleShowRegisterForm,setNameFromEmail:this.setNameFromEmail.bind(this),signupSource:l,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,password:P,clearPassword:this.clearPassword,showLoginWelcomeLoadingFn:this.showLoginWelcomeLoadingFn,showResponseMessageModal:y===U.c.respondMessage?this.props.showResponseMessageModal:void 0})),g&&g()));c.v2GetGroup("web_unauth_plp_education_video");return o.a.createElement(n.Fragment,null,o.a.createElement("div",{"data-test-id":"signup",style:R?{display:"none"}:A},Z),R&&o.a.createElement(E.a,{width:440}))}renderLoginToSignupToggle(e){return o.a.createElement(L.a,{buttonText:h.a._("Not on Pinterest yet? Sign up","Toggle to switch from the login modal to the sign up modal"),link:e,onClick:this.handleSignupToggleButtonClick,titleStylesOverride:Q.signupLoginToggle,useSmallButton:!0})}renderDefaultLogin(){const e=this.props,t=e.container,i=e.customLoginTagline,a=e.darkSignupTitle,s=e.delayedTitleRender,r=e.emailValidationError,l=e.isAccountSwitch,c=e.hideAccountSwitchValueProp,d=e.magicLinkGroup,g=e.passwordValidationError,u=e.seoUnauthExperiments,m=e.signupSource,f=(e.renderBusinessCreateButton,e.pageType),w=e.hybridTier,y=e.requestContext,_=e.eligibleExperiences,x=e.type,L=this.state.showLoginWelcomeLoading,C=i||(m?this.tagline(this.state.type,m,u):this.tagline(this.state.type,U.b.login,u)),O=Q.logoContainer;let T=Q.signupTitleContainer;"login_page"!==t&&(T=q({},T,{width:"355px"}));let k=40;m===U.b.homePage&&(k=50);const P=q({},this.getSignupStyles(),{width:"440px"},null),R=Q.signupForm,F=Q.signupTitleContainer,A=Q.signupSubtitles,j=q({},Q.separator,{marginLeft:"-10px"});let B=o.a.createElement("div",null,o.a.createElement(v.a,{css:j}),o.a.createElement("div",null,this.renderLoginToSignupToggle("/signup/")));this.props.isBusiness?B=o.a.createElement("div",null,o.a.createElement(v.a,{css:{margin:"10px auto"}}),o.a.createElement("a",{href:this.getNextUrl("/business/create")},h.a._("Create new account","Link to the page to create a new business account instead of logging in")),o.a.createElement("div",null)):this.props.toggleType===M.a.NOT_NOW_BUTTON?B=o.a.createElement("div",null,o.a.createElement(v.a,{css:{margin:"10px auto"}}),o.a.createElement("div",{style:Q.haveAccountText},this.renderLoginToSignupToggle()),o.a.createElement("div",null)):this.props.toggleType===M.a.NO_TOGGLE||l?B=null:this.props.toggleType===M.a.SMALL_TOGGLE&&(B=o.a.createElement("div",null,o.a.createElement(v.a,{css:{margin:"10px auto"}}),this.renderLoginToSignupToggle(),o.a.createElement("div",null)));const W=h.a._("Have another Pinterest account? Log in to easily switch between them","Subtitle on the login modal that explains to a user why they would add an additional account to their profile"),V=(Object(I.l)(u,_,f,!0,w,y.isBot)&&(this.state.type===U.c.login||(this.state.type,U.c.signup)),this.clickthroughTaglineCopy()),N=o.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),o.a.createElement("div",{style:R},o.a.createElement("div",{style:O},Object(S.a)(k,!0)),o.a.createElement("div",{style:T},!s&&o.a.createElement(p.a,{container:t,hybridTier:w,darkSignupTitle:a,modalType:U.a.login,titleText:C})),V&&o.a.createElement("div",{style:F},o.a.createElement("h3",{style:A},V)),l&&!c&&o.a.createElement("div",{style:F},o.a.createElement("h3",{style:A},W)),o.a.createElement(D.a,null,e=>o.a.createElement(b.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.email,emailValidationError:r,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:g,inputStyleOverrides:Q.inputFields,isAccountSwitch:l,magicLinkGroup:d,nextUrlParam:this.getNextUrlParam(),onEmailChange:this.handleDataChange.bind(this,"email"),onSocialConnectVerified:this.showAdditionalStep(U.c.socialSignupWithAge),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,toggleMagicLinkConfirmation:this.toggleMagicLinkConfirmation,clearPassword:this.clearPassword,showLoginWelcomeLoadingFn:this.showLoginWelcomeLoadingFn,showResponseMessageModal:x===U.c.respondMessage?this.props.showResponseMessageModal:void 0})),B),!1);u.v2GetGroup("web_unauth_plp_education_video");return o.a.createElement(n.Fragment,null,o.a.createElement("div",{"data-test-id":"login",style:L?{display:"none"}:P},N),L&&o.a.createElement(E.a,{width:440}))}renderLoginMfa(){const e=this.props,t=e.container,i=e.darkSignupTitle,n=e.delayedTitleRender,a=e.hybridTier,s=e.seoUnauthExperiments,r=this.tagline(this.state.type,U.b.loginMfa,s),l=this.getSignupStyles(),c=Q.signupForm,d=Q.logoContainer;return o.a.createElement("div",{"data-test-id":"login",style:l},o.a.createElement("div",{style:c},o.a.createElement("div",{style:d},Object(S.a)(40,!0)),o.a.createElement("div",{style:q({},Q.signupTitleContainer,Q.signupTitleMfaContainer)},!n&&o.a.createElement(p.a,{container:t,darkSignupTitle:i,hybridTier:a,modalType:U.a.loginMfa,titleText:r})),o.a.createElement(f.a,{container:this.props.container,code:this.state.mfaCode,creds:this.state.mfaCreds,email:this.state.email,inputStyleOverrides:Q.inputFields,isAccountSwitch:this.props.isAccountSwitch,nextUrlParam:this.getNextUrlParam(),onCodeChange:this.handleDataChange.bind(this,"mfaCode"),password:this.state.password,phoneNumberEnd:this.state.mfaPhoneNumberEnd})))}renderMagicLinkConfirmation(){const e=this.state,t=e.email,i=e.password;return Object(W.a)("confirmation_shown",t,i),o.a.createElement("div",{"data-test-id":"login",style:this.getSignupStyles()},o.a.createElement("div",{style:Q.signupForm},o.a.createElement("div",{style:Q.logoContainer},Object(S.a)(40,!0)),o.a.createElement("div",{style:Q.signupTitleContainer},o.a.createElement("h3",{style:Q.signupTitle},h.a._("Check your email","title on login modal telling user to check their email"))),o.a.createElement(G.b,{direction:"column",alignItems:"center",display:"flex"},o.a.createElement(G.b,{paddingY:3,width:270},o.a.createElement(G.J,{size:"lg"},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:s.c(h.a._("We just sent an email to you at <strong>{{ email }}</strong>. It has a magic link that you can use to log in.","Message on login modal telling users an email has been sent to them containing a link to log in"),{email:t})}}))),o.a.createElement(G.b,{paddingY:3,width:270},o.a.createElement(G.c,{text:h.a._("Back","text on button to return to login modal from magic link confirmation screen"),onClick:()=>{Object(W.a)("confirmation_dismissed",t,i),this.toggleMagicLinkConfirmation(!1)}})))))}renderSocialSignupWithAge(){const e=this.state.socialRegistrationCredentials,t=this.props.type,i=h.a._("Sign up to see more","Age collection signup step for Facebook/G+ authentication");return o.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},this.renderLoadingIndicator(),o.a.createElement("div",{style:Q.signupForm},o.a.createElement("div",{style:Q.logoContainer},Object(S.a)(40,!0)),o.a.createElement("div",{style:Q.signupTitleContainer},o.a.createElement("h3",{style:Q.signupTitle},i)),o.a.createElement(O.a,{container:this.props.container,disablePostSignupNextUrl:!0,loadingIndicatorCallback:this.toggleLoadingIndicator,nextUrlParam:this.getNextUrlParam(),registrationCredentials:e,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,showResponseMessageModal:t===U.c.respondMessage?this.props.showResponseMessageModal:void 0})),o.a.createElement(G.b,{margin:4},o.a.createElement(G.i,null),o.a.createElement(G.b,{padding:3},this.renderSignupToLoginToggle())))}renderFBEmailRerequestForm(){const e=this.props.type,t=q({},this.getSignupBoxStyle(),{minHeight:"400px"}),i=q({},Q.signupTitleContainer,{width:"320px"}),n=h.a._("Add your email to finish","Tagline on facebook rerequest form"),a=q({},Q.signupSubtitles,{marginTop:"24px"}),s=q({},Q.notNowButton,{marginTop:"90px"}),l=h.a._("We need your email address to complete this signup. Click the button below, and we can use the email associated with your Facebook account.","message to explain reauth step beneath the tagline");return o.a.createElement("div",{"data-test-id":"login",style:t},this.renderLoadingIndicator(),o.a.createElement("div",{style:Q.signupForm},o.a.createElement("div",{style:Q.logoContainer},Object(S.a)(40,!0)),o.a.createElement("div",{style:i},o.a.createElement("h3",{style:Q.signupTitle},n),o.a.createElement("h3",{style:a},l),o.a.createElement("div",{style:{width:"260px",margin:"auto"}},o.a.createElement(g.b,{isRerequest:!0,container:"FBEmailRerequest",buttonText:h.a._("Continue with Facebook","Button text on facebook connect button on FB email reauth form"),loadingIndicatorCallback:this.toggleLoadingIndicator,useGestaltTooltip:!0,handlePostConnectClick:this.handlePostConnectClick,handlePostSuccessConnect:this.handlePostSuccessConnect,showResponseMessageModal:e===U.c.respondMessage?this.props.showResponseMessageModal:void 0}))),o.a.createElement(r.a,{className:"lightGrey",onClick:this.handleNotNowClick,styleOverrides:s},h.a._("Not now","word on not now button to dismiss the FB email reauth form"))))}renderEmailConfirmation(){const e=this.state.socialRegistrationCredentials.userData.email,t=h.a._("Check your email","email confirmation tagline for Facebook cellphone only sign up"),i=h.a._("We've sent a confirmation email to ","email confirmation message for Facebook cellphone only sign up"),n=q({},Q.signupSubtitles,{marginTop:"24px"});return o.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},o.a.createElement("div",{style:Q.signupForm},o.a.createElement("div",{style:Q.logoContainer},Object(S.a)(40,!0)),o.a.createElement("div",{style:Q.signupTitleContainer},o.a.createElement("h3",{style:Q.signupTitle},t),o.a.createElement("h3",{style:n},i,e)),o.a.createElement(r.a,{className:"red",onClick:this.handleConfirmationPageButtonClick,styleOverrides:Q.onClickEmailConfirmationButton},h.a._("Done","word on the button in email confirmation page"))))}render(){const e=this.state,t=e.isAccountSwitch,i=e.isPersonalizedModal,n=e.showSignupWelcomeLoading,a=e.type,s=this.props.viewer;return a===U.c.signupOrPersonalizedLogin?i&&!t?this.renderPersonalizedLogin():this.renderDefaultSignup():a===U.c.signup?n?o.a.createElement(C.a,null):this.renderDefaultSignup():a===U.c.login?n?o.a.createElement(C.a,null):!i||t||s.isAuth&&!s.isLimitedLogin?this.renderDefaultLogin():this.renderPersonalizedLogin():a===U.c.loginMfa?this.renderLoginMfa():a===U.c.socialSignupWithAge?n?o.a.createElement(C.a,null):this.renderSocialSignupWithAge():a===U.c.FBEmailRerequest?this.renderFBEmailRerequestForm():a===U.c.emailConfirmation?this.renderEmailConfirmation():a===U.c.magicLinkConfirmation?this.renderMagicLinkConfirmation():a===U.c.respondMessage?this.renderDefaultSignup():null}}H(J,"defaultProps",{disablePersonalizedLoginActivation:!1,isAccountSwitch:!1,signupSource:U.b.defaultSource,toggleType:M.a.DEFAULT_TOGGLE,type:U.c.signup});const K=e=>({location:e.location,pins:e.pins||{},userInfo:e.loggedOutUserInfo?e.loggedOutUserInfo.userInfo:{},viewer:e.viewer,eligibleExperiences:e.experiences?e.experiences.eligibleExperiences:{}});J.contextTypes={isBot:_.a.bool,logging:_.a.shape({viewParameter:_.a.number,viewType:_.a.number.isRequired}),locale:_.a.string},t.default=Object(R.compose)(D.e,Object(a.connect)(K),k.a,P.b)(J)},MJXA:function(e,t,i){var n=i("GyhR"),o=i.n(n),a=i("Ivf5"),s=i("WQSK"),r=i("GIJk"),l=i("D+W/"),c=i("1JxL"),d=i("GCCY"),g=i("Qo1m"),p=i("MLP8");var h=i("3nbW"),u=i("cqmR"),m=i("hvnN"),b=i.n(m),f=i("wFAD"),E=i("ePT2"),S=i("QtSf"),w=i("CBQr"),y=i("Ud2L"),_=i("ggpB"),v=i("7M64"),x=i("08qL"),L=i("+U6O"),C=i("9Y9K"),O=i("QWmP"),T=i("NmcB"),k=i("JsRk"),P=i("MDr3"),R=i("i7XF"),F=i("cEhz"),M=i("ovu7"),A=i("2rhI"),j=i("2YES");function B(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const W={emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:x.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},signupContainer:{margin:"0 auto",width:"268px"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"}},I="emailpwdstep";class V extends n.Component{constructor(e,t){super(e,t),B(this,"onLoginWithSuspended",()=>{(0,this.props.loadingIndicatorCallback)(!1),this.setState({accountRecoveryModalType:P.a[l.a.POLICY_VIOLATION_USER]})}),B(this,"onLoginWithVoluntarilyDeactivated",e=>{this.setState({googleValidationError:e.message})}),B(this,"setLoadingState",e=>{const t=this.props,i=t.loadingIndicatorCallback,n=t.showSignupWelcomeLoadingFn;return n&&!1===e&&n(!1),i(e)}),B(this,"handleButtonClick",e=>{if("1"===s.get("r_r"))return void this.showUnderAgeError();const t=u.a.runPhoneValidators(this.props.email,this.props.requestContext.locale,this._loginFacebookAccountKit.bind(this));this.setState({facebookValidationError:null,googleValidationError:null}),t&&this.handleEmailSignUp(e)}),B(this,"handleEmailChange",e=>{this.props.onEmailChange&&this.props.onEmailChange(e)}),B(this,"handleTypoSuggestionClick",()=>{this.setState({emailValidationError:""})}),B(this,"handlePasswordChange",e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.onPasswordChange&&this.props.onPasswordChange(e)}),B(this,"handleEmailSignUp",e=>{Object(_.a)("unauth_email_validation_attempt");let t=Object(S.a)(this.props.email,this.emailValidators);if(t)this.setState({emailValidationError:t}),Object(_.a)(`unauth.login.error.CLIENT_ERROR.malformemail.${I}`);else{t=Object(S.a)(this.props.password,this.loginPasswordValidators);const i=Object(S.a)(this.props.password,this.asciiValidators);t?(this.setState({passwordValidationError:t}),Object(_.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${I}`)):i?(this.setState({passwordValidationError:i}),Object(_.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${I}`),Object(_.a)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${I}`)):(this.setState({passwordValidationError:null}),this.validateEmailAvailable(e)),this.setState({emailValidationError:null}),this.props.setNameFromEmail&&this.props.setNameFromEmail()}}),B(this,"_loginFacebookAccountKit",e=>{if(u.a.validateResponse(e)){const t={phone_number:this.props.email,fb_auth_code:e.code};Object(_.a)("unauth_phone_only_login_attempt"),this.login(t)}else this.setState({emailValidationError:g.a._("Enter your email or phone number to try again.")}),this.setLoadingState(!1)}),B(this,"register",()=>{this.setLoadingState(!0);let e=null;const t=this.props.requestContext.seoUnauthExperiments.v2ActivateExperiment("recaptcha_v3_signup")||"";(t.startsWith("enabled")||t.startsWith("employees"))&&(e=this.props.tokenV3);const i=this.props,n=i.age,o=i.container,a=i.email,r=i.name,c=i.password,d=i.signupSource,p={container:o,email:a,password:c,age:n,country:this.context.country,signupSource:d,first_name:r,last_name:"",hybridTier:this.context.hybridTier,page:this.context.pageType,recapToken:e};Object(_.a)("one_step_age_signup_complete"),v.a.register(p).then(this.handleSignupSuccess,e=>{this.contextLogSignupLoginEvent(7488),this.setLoadingState(!1),e.api_error_code===l.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT?(s.set("r_r","1"),this.showUnderAgeError()):e.api_error_code===l.a.SIGNUP_INVALID_EMAIL?Object(O.a)(g.a._("Your email is invalid.")):Object(O.a)(g.a._("Sorry! Something went wrong on our end."))}),this.contextLogSignupLoginEvent(7537)}),B(this,"handleSignupSuccess",()=>{const e=this.props.showResponseMessageModal;this.contextLogSignupLoginEvent(7487),Object(_.a)("unauth.signup_one_step.completed"),e?e(!0):R.c.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl)}),B(this,"shouldRequireAge",()=>{const e=this.context.country;return Object(A.d)(e)||Object(A.c)(e)}),B(this,"validateAgeRequirement",()=>{let e=!1;return this.shouldRequireAge()&&(e=Object(S.a)(this.props.age||"",this.ageValidators))&&(this.setState({ageValidationError:e}),this.setLoadingState(!1),Object(_.a)(`unauth.login.error.CLIENT_ERROR.invalidage.${I}`)),e}),B(this,"validatePasswordRequirement",()=>{const e=Object(S.a)(this.props.password,this.passwordValidators);return e&&(this.setState({passwordValidationError:e}),this.setLoadingState(!1),Object(_.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${I}`)),e}),B(this,"completeRegistration",e=>{this.setState({emailValidationError:null}),this.setLoadingState(!1),Object(_.a)("unauth.signup_step_1.completed"),this.register()}),B(this,"checkEmailExistsWithCompletion",(e,t,i)=>{E.a.create("EmailExistsResource",{email:e}).callGet({emailValidationError:!1}).then(e=>{!1===e.resource_response.data?i():t()},()=>{const e=g.a._("Hmm...that doesn't look like an email address");this.setState({emailValidationError:e})})}),B(this,"updateAccountRecoveryModal",e=>this.setState({accountRecoveryModalType:e})),B(this,"handleSignupWithEmailClick",()=>{Object(_.a)("unauth_signup_email_btn_click"),this.setState({showRegisterForm:!0}),this.props.onShowRegisterForm&&this.props.onShowRegisterForm()}),B(this,"renderSocialButtons",()=>{const e=this.props.sm,t=o.a.createElement(c.b,{buttonText:g.a._("Continue with Facebook"),container:this.props.container,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,onSocialConnectVerified:this.props.onSocialConnectVerified,onFBEmailDeniedPerm:this.props.onFBEmailDeniedPerm,loadingIndicatorCallback:this.props.loadingIndicatorCallback,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,showLoginWelcomeLoadingFn:this.props.showLoginWelcomeLoadingFn,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,tooltip:this.state.facebookValidationError,useGestaltTooltip:!0,showResponseMessageModal:this.props.showResponseMessageModal}),i=o.a.createElement("div",{ref:e=>{this.googleButton=e}},"1"!==e&&o.a.createElement(d.b,{action:"signup",container:this.props.container,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,nextUrlParam:"/",onSocialConnectVerified:this.props.onSocialConnectVerified,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,showLoginWelcomeLoadingFn:this.props.showLoginWelcomeLoadingFn,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,tooltip:this.state.googleValidationError,showResponseMessageModal:this.props.showResponseMessageModal}));return o.a.createElement("div",{style:W.socialButtonContainer},t,o.a.createElement("div",{style:W.socialButtonSeparator}),i)}),B(this,"renderSignupForm",()=>{const e=this.props,t=e.age,i=e.email,n=e.inputStyleOverrides,a=e.newEmail,s=e.onAgeChange,r=e.password,l=e.suppressFocus,c=e.updateEmail;return this.state.showRegisterForm?o.a.createElement(f.a,{age:t,ageValidationError:this.state.ageValidationError,buttonText:this.getButtonText(),buttonTextLabel:g.a._("Continue creating your Pinterest account","Accessiblity button text to continue creating an account"),checkEmailExistsWithCompletion:this.checkEmailExistsWithCompletion,email:i,emailFieldHasError:this.state.emailFieldHasError,emailText:g.a._("Email"),emailLabel:g.a._("Enter your email","Accessiblity input text on login screen"),emailValidationError:this.state.emailValidationError,onTypoSuggestionClick:this.handleTypoSuggestionClick,inputStyleOverrides:n,newEmail:a,onAgeChange:s,onButtonClick:this.handleButtonClick.bind(this),onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:r,passwordText:g.a._("Create a password"),passwordValidationError:this.state.passwordValidationError,showAgeInput:!0,suppressFocus:l,updateEmail:c,isSignupForm:!0}):o.a.createElement("div",{"data-test-id":"emailSignUpButton"},o.a.createElement(L.c,{text:g.a._("Sign up with email","the description of sign up with email button on sign up modal"),color:"red",onClick:this.handleSignupWithEmailClick}))}),B(this,"renderReorderedButtons",()=>{const e=this.props.signupSeparatorContinuous;return o.a.createElement("div",null,this.renderSocialButtons(),this.state.showRegisterForm?o.a.createElement("div",{style:{marginBottom:"10px"}},o.a.createElement(r.a,{signupSeparatorContinuous:e})):null,this.renderSignupForm())}),B(this,"renderSocialButtonsOnly",()=>{this.renderSocialButtons()}),B(this,"renderOriginalForm",()=>{const e=this.props.signupSeparatorContinuous;return o.a.createElement("div",null,this.renderSignupForm(),this.state.showRegisterForm?o.a.createElement(r.a,{signupSeparatorContinuous:e}):null,this.renderSocialButtons())}),B(this,"renderButtons",()=>{const e=this.props.sm;return"2"===e?this.renderReorderedButtons():"1"===e?this.renderSocialButtonsOnly():this.renderOriginalForm()}),B(this,"showUnderAgeError",()=>{this.setState({ageValidationError:g.a._("Sorry, you can't sign up yet. You’re not old enough to use Pinterest yet.","Error message when under age user trying to register")})}),this.state={ageValidationError:e.ageValidationError||null,accountRecoveryModalType:null,emailFieldHasError:!1,emailValidationError:e.emailValidationError||null,facebookValidationError:null,googleValidationError:null,passwordValidationError:e.passwordValidationError||null,showRegisterForm:"home_page"===this.props.container},this.emailValidators=[Object(M.q)({message:g.a._("You missed a spot! Don't forget to add your email.")}),Object(M.f)({message:g.a._("Hmm... that doesn't look like an email address.")})];const i=g.a._("Your password is too short! You need 6+ characters."),n=g.a._("Oh @*&#! No zany characters allowed."),a=g.a._("Help us protect you by providing your age","Error message shown when user did not fill the age field in the sign up model");this.passwordValidators=[Object(M.q)({message:i}),Object(M.n)({shortPassStr:i,samePasswordStr:g.a._("Please make your username and password different."),blackPassStr:g.a._("Please make a stronger password.")})],this.asciiValidators=[Object(M.b)({message:n})],this.loginPasswordValidators=[Object(M.q)({message:i}),Object(M.b)({message:n}),Object(M.l)({messages:{min:i},min:6})],this.shouldRequireAge()?this.ageValidators=[Object(M.q)({message:a}),Object(M.a)({message:g.a._("Please enter a valid number.")})]:this.ageValidators=[Object(M.a)({message:g.a._("Please enter a valid number.")})]}componentDidMount(){const e=this.props.requestContext;u.a.setupPhoneAuth(e.locale)}UNSAFE_componentWillReceiveProps(e){const t=e.ageValidationError,i=e.emailValidationError,n=e.passwordValidationError;let o={};i!==this.props.emailValidationError?o={emailValidationError:i}:n!==this.props.passwordValidationError?o={passwordValidationError:n}:t!==this.props.ageValidationError&&(o={ageValidationError:t}),this.setState(o)}getButtonText(){return g.a._("Continue","Continue button on web")}handleBlur(e){"id"===e?this.setState({emailValidationError:null}):"age"===e&&this.setState({ageValidationError:null}),this.setState({facebookValidationError:null,googleValidationError:null})}handleLoginFailure(e,t,i=!1){const n=this.props,o=n.clearPassword,a=n.email,s=n.onLoginWithMfa;this.contextLogSignupLoginEvent(7535);const r=e.http_status===l.a.RESPONSE_CODE_TOO_MANY_REQUESTS?l.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;if(r===l.a.LOGIN_MFA_REQUIRED)return void R.c.handleLoginMfa(t,e.data,s);const c=R.c.getLoginErrorState(e,"emailPasswordStep",a,y.a,this.updateAccountRecoveryModal);c?(this.setState(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){B(e,t,i[t])}))}return e}({accountRecoveryModalType:P.a[r]},c)),o&&c.passwordValidationError&&o(),this.setLoadingState(!1)):(g.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(O.a)(g.a._("Sorry! Something went wrong on our end.")),this.setLoadingState(!1))}handleLoginSuccess(e){this.contextLogSignupLoginEvent(7536),R.c.storeLoginCredentialsToBrowser(e);const t=this.props.showResponseMessageModal;t?t(!1):window.location.reload()}login(e){this.setLoadingState(!0);const t=e||{username_or_email:this.props.email,password:this.props.password},i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(h.a)(t,i,this.props.seoUnauthExperiments).then(()=>{this.handleLoginSuccess(t)},e=>{e.api_error_code===l.a.INVALID_PASSWORD_ERROR_CODE?(this.setState({passwordValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===l.a.INVALID_PASSWORD_FB_USER?(this.setState({facebookValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===l.a.INVALID_PASSWORD_GOOGLE_USER?(this.setState({googleValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===l.a.LOGIN_MFA_REQUIRED?(R.c.storeLoginCredentialsToBrowser(t),this.props.onLoginWithMfa(t,e.data)):(this.setState({emailValidationError:e.message}),this.setLoadingState(!1))})}contextLogSignupLoginEvent(e){const t=this.props.viewer;t.isAuth?Object(T.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:1}):Object(T.a)(e,{signup_login_method:1})}validateEmailAvailable(e){this.setLoadingState(!0);const t=this.context,i=t.hybridTier,n=t.pageType,o=this.props,a=o.container,s=o.email,r=o.password,l=o.seoUnauthExperiments;this.checkEmailExistsWithCompletion(s,()=>{const e={username_or_email:s,password:r},t={container:a,hybridTier:i,page:n};Object(h.a)(e,t,l).then(t=>{this.handleLoginSuccess(e)},t=>{this.handleLoginFailure(t,e)}),this.contextLogSignupLoginEvent(7534)},()=>{if(!this.validateAgeRequirement()&&!this.validatePasswordRequirement()){if(function(e){const t=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2===t.length){const e=t[1],i=e&&-1!==e.indexOf(".")?e.split("."):[];if(i.length>=2&&"gmail"===i[0]&&"com"!==i.slice(1).join("."))return!0;const n=Object(p.a)(e,"gmail.com");if("g"===e.charAt(0)&&(1===n||2===n))return!0}return!1}(s))return this.setLoadingState(!1),void this.setState({emailFieldHasError:!0});this.completeRegistration(e)}})}render(){const e=this.props,t=e.additionalChildren,i=e.dark,n=W.signupContainer,a=o.a.createElement(P.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:this.props.email,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated});return o.a.createElement("div",{style:n},a,this.renderButtons(),o.a.createElement(w.a,{dark:i}),t)}}V.contextTypes={country:b.a.string,hybridTier:b.a.string,pageType:b.a.string};var N=Object(C.compose)(j.e,Object(a.connect)(e=>({viewer:e.viewer})),k.withRouter,F.b)(V),U=i("POeB");function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const G="6Ldx7ZkUAAAAAF3SZ05DRL2Kdh911tCa3qFP0-0r",z=n.createContext({tokenV3:""});class q extends n.Component{constructor(...e){super(...e),D(this,"state",{tokenV3:""}),D(this,"fetchToken",()=>{window.onloadCallbackV3=this.onloadCallbackV3;const e=document.createElement("script");e.id="recaptchaV3-src",e.src="https://www.google.com/recaptcha/api.js?onload=onloadCallbackV3&render="+G;const t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}),D(this,"onloadCallbackV3",()=>{const e=document.getElementsByClassName("grecaptcha-badge")[0];e&&(e.style.visibility="hidden");try{window.grecaptcha.ready(()=>{window.grecaptcha.execute(G,{action:"pinterest"}).then(e=>{this.setState({tokenV3:e})})})}catch(t){U.a&&U.a.showError(t.message||g.a._("Unable to fetch token","Failed to fetch token from Google."))}window.onloadCallbackV3=null})}componentDidMount(){this.fetchToken()}render(){return n.createElement(z.Provider,{value:{tokenV3:this.state.tokenV3}},this.props.children)}}const H=z.Consumer;function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Y={signup:{margin:"0 auto",position:"relative",textAlign:"center"},inputStyleOverrides:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"}},Q=Object.freeze({SIGNUP:"signup"});class J extends n.Component{constructor(...e){super(...e),$(this,"state",{step:Q.SIGNUP})}showStep(e){if(e===Q.SIGNUP)return o.a.createElement(q,null,o.a.createElement(H,null,({tokenV3:e})=>o.a.createElement(N,{additionalChildren:this.props.additionalEmailPasswordChildren,age:this.props.age,container:this.props.container,dark:this.props.dark,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,email:this.props.email,emailValidationError:this.props.emailValidationError,setWelcomeBackMessageForExistingEmail:this.props.setWelcomeBackMessageForExistingEmail,loadingIndicatorCallback:this.props.loadingIndicatorCallback,name:this.props.name,nextUrlParam:this.props.nextUrlParam,passwordValidationError:this.props.passwordValidationError,inputStyleOverrides:Y.inputStyleOverrides,onAgeChange:this.props.onAgeChange,onEmailChange:this.props.onEmailChange,onFBEmailDeniedPerm:this.props.onFBEmailDeniedPerm,onSocialConnectVerified:this.props.onSocialConnectVerified,onLoginWithMfa:this.props.onLoginWithMfa,onPasswordChange:this.props.onPasswordChange,password:this.props.password,setNameFromEmail:this.props.setNameFromEmail,showLoginWelcomeLoadingFn:this.props.showLoginWelcomeLoadingFn,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,signupSeparatorContinuous:this.props.signupSeparatorContinuous,signupSource:this.props.signupSource,sm:this.props.sm,suppressFocus:this.props.suppressFocus,clearPassword:this.props.clearPassword,onShowRegisterForm:this.props.onShowRegisterForm,showResponseMessageModal:this.props.showResponseMessageModal,tokenV3:e})))}render(){return o.a.createElement("div",{"data-test-id":"signup",style:Y.signup},this.showStep(this.state.step))}}$(J,"defaultProps",{dark:!0});t.a=J},O9k4:function(e,t,i){var n=i("GyhR"),o=i.n(n),a=i("+aUF"),s=i("D+W/"),r=i("Qo1m"),l=i("3nbW"),c=i("i7XF"),d=i("hvnN"),g=i.n(d),p=i("QtSf"),h=i("jDCj"),u=i("ggpB"),m=i("Irlq"),b=i("QWmP"),f=i("ovu7");const E=s.a.GEN.templateConst.settings.PASSWORD_RESET_URL,S={loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginText:{fontSize:"14px",margin:"24px 0",textAlign:"left"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",marginTop:"45px",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},signupButton:{width:"100%"}},w="loginmfa";class y extends n.Component{constructor(e){super(e),this.state={codeValidationError:null,loading:!1},this.codeValidators=[Object(f.q)({message:r.a._("You missed a spot! Don't forget to add your verification code.")}),Object(f.m)({message:r.a._("Hmm...that doesn't look like a verification code.")})]}componentDidMount(){!this.props.isAccountSwitch&&c.c.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&c.c.handleRedirect(this.props.nextUrlParam)}_getLocationForLoginRedirect(){const e=window.location.pathname!==E?window.location.pathname:"/";return this.props.nextUrlParam||e}handleButtonClick(e){const t=Object(p.a)(this.props.code,this.codeValidators);t?(this.setState({codeValidationError:t}),Object(u.a)(`unauth.login.error.CLIENT_ERROR.wrongcode.${w}`)):(this.setState({codeValidationError:null}),this.loginUser())}handleResendCode(e){e.preventDefault(),this.setState({loading:!0});let t=this.props.creds;t?t.mfa_resend=!0:t={mfa_resend:!0,username_or_email:this.props.email,password:this.props.password};const i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(l.a)(t,i).then(()=>{this.setState({loading:!1})},e=>{this.setState({loading:!1}),e.message?this.setState({codeValidationError:e.message}):Object(b.a)(r.a._("Sorry! Something went wrong on our end."))})}loginUser(e){this.setState({loading:!0});let t=e||this.props.creds;t?t.mfa_token=this.props.code:t={mfa_token:this.props.code,username_or_email:this.props.email,password:this.props.password};const i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(l.a)(t,i).then(()=>{c.c.handleRedirect(this._getLocationForLoginRedirect())},e=>{e.message?this.setState({codeValidationError:e.message,loading:!1}):(Object(b.a)(r.a._("Sorry! Something went wrong on our end.")),this.setState({loading:!1}))})}render(){const e=S.loginContainer,t=r.a._("Continue"),i=this.props.phoneNumberEnd,n=i?Object(m.b)(r.a._("Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in."),{phoneNumberEnd:o.a.createElement("strong",{key:"phone"},i)}):r.a._("Please check your phone for a code and enter it in the field below to log in.");return o.a.createElement("div",{style:e},o.a.createElement("p",{style:S.loginText},n),o.a.createElement("form",{method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),this.handleButtonClick(e)}},o.a.createElement(h.a,{autoComplete:"off",focused:!0,hasError:!!this.state.codeValidationError,id:"mfaCode",inputStyleOverrides:this.props.inputStyleOverrides,name:"code",onChange:this.props.onCodeChange,placeholder:r.a._("Verification code"),tooltip:this.state.codeValidationError,type:"text",value:this.props.code,useGestaltTooltip:this.props.useGestaltTooltip}),o.a.createElement(a.a,{accessibilityLabel:t,className:"red SignupButton",loading:this.state.loading,styleOverrides:S.signupButton,type:"submit"},o.a.createElement("div",null,t))),o.a.createElement("div",{style:S.loginFooterContainer},Object(m.b)(r.a._("If you didn't get it, we can {{ resendCode }}."),{resendCode:o.a.createElement("a",{onClick:this.handleResendCode.bind(this),href:"",key:"code"},r.a._("resend the code"))})))}}var _,v,x;x={container:"unknown"},(v="defaultProps")in(_=y)?Object.defineProperty(_,v,{value:x,enumerable:!0,configurable:!0,writable:!0}):_[v]=x,y.contextTypes={isAuthenticated:g.a.bool.isRequired,loginState:g.a.number,hybridTier:g.a.string,pageType:g.a.string},t.a=y},TLUQ:function(e,t,i){t.a={TOPIC:"topic",PASSWORDRESET:"passwordReset",PASSWORDUSERNAME:"passwordUserName",PROFILE:"profile",PIN:"pin",KLP:"klp",BOARD:"board",SEARCH:"search",PINFEEDBACK:"pinFeedBack"}},UnnU:function(e,t,i){i.d(t,"a",(function(){return n}));const n={DEFAULT_TOGGLE:"DEFAULT_TOGGLE",NO_TOGGLE:"NO_TOGGLE",SMALL_TOGGLE:"SMALL_TOGGLE",NOT_NOW_BUTTON:"NOT_NOW_BUTTON"}},"oL+s":function(e,t,i){var n=i("GyhR"),o=i.n(n),a=i("wCwO"),s=i("Qo1m"),r=i("KrKF"),l=i("+U6O");t.a=({showWelcomeMsg:e,width:t})=>o.a.createElement(l.b,{alignItems:"center",display:"flex",justifyContent:"center"},o.a.createElement(l.b,{color:"white",height:500,width:t,shape:"rounded"},o.a.createElement(a.a,{duration:6e3,finalProgress:95}),o.a.createElement(l.b,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12},o.a.createElement(l.b,{marginBottom:e?6:10},o.a.createElement(l.m,{accessibilityLabel:s.a._("Loading state for login"),color:"red",icon:"pinterest",size:"40"})),e&&o.a.createElement(l.b,{paddingY:5,dangerouslySetInlineStyle:{__style:{textAlign:"center"}}},o.a.createElement(l.l,{size:"sm"},Object(r.e)())),e?o.a.createElement(l.J,{size:"xl",align:"center",overflow:"normal"},s.a._("Ready to discover your new favorite idea?","Login loading state description")):o.a.createElement(l.b,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}}},o.a.createElement(l.l,{size:"xs",overflow:"normal"},s.a._("Ready to discover your new favorite idea?","Login loading state description"))))))},ocVj:function(e,t,i){function n(e){const t=e.split("@")[0];let i="";return i=(i=(i=t.includes(".")?t.replace("."," "):t.includes("_")?t.replace("_"," "):t).replace(/[0-9]/g,"")).replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}i.d(t,"a",(function(){return n}))},tAeg:function(e,t,i){i.d(t,"a",(function(){return d}));var n=i("GyhR"),o=i.n(n),a=i("+aUF"),s=i("+U6O");function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){l(e,t,i[t])}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c={header:{color:"#5a5a5a",fontWeight:500,fontSize:"12px"},button:{width:"160px",fontSize:"14px",padding:"10px 20px"}};class d extends n.Component{constructor(...e){super(...e),l(this,"state",{hover:!1}),l(this,"toggleHover",()=>{this.setState({hover:!this.state.hover})})}render(){const e=this.props,t=e.buttonText,i=e.fullWidth,n=e.link,l=e.onClick,d=e.title,g=e.titleStylesOverride,p=e.useSmallButton;let h=c.header;g&&(h=r({},h,g));const u=i?r({},c.button,{width:"100%",marginTop:"0"}):c.button;let m=o.a.createElement(a.a,{className:"lightGray",href:n,onClick:l,styleOverrides:u,type:"button"},t),b={};if(p){h=r({},h,{float:"left"}),b={margin:"0 auto 5px",width:"fit-content",alignItems:"baseline"};const e=this.state.hover?{cursor:"pointer",marginLeft:"5px",borderBottom:"0.5px solid #8a8a8a"}:{cursor:"pointer",marginLeft:"5px"};m=o.a.createElement(s.b,{onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover},o.a.createElement("a",{onClick:l,style:e},t))}return o.a.createElement("div",{style:b},d&&o.a.createElement("h5",{style:h},d),m)}}},wCwO:function(e,t,i){i.d(t,"a",(function(){return s}));var n=i("GyhR"),o=i.n(n),a=i("+U6O");class s extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n={startProgressBar:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){setTimeout(()=>{this.setState({startProgressBar:!0})},0)}render(){const e=this.props,t=e.duration,i=e.finalProgress,n=e.showLightGrayBackground,s=e.rounded;return o.a.createElement(a.b,{width:"100%",color:n?"lightGray":"transparent",shape:s?"rounded":"square"},o.a.createElement(a.b,{color:"red",height:6,shape:"rounded",width:`${i}%`,dangerouslySetInlineStyle:{__style:{transform:this.state.startProgressBar?"scale(1, 1)":"scale(0, 1)",transformOrigin:"left",transitionDuration:`${t}ms`,transitionTimingFunction:"ease-in"}}}))}}},yiER:function(e,t,i){i.d(t,"a",(function(){return l}));var n=i("GyhR"),o=i.n(n),a=i("hvnN"),s=i.n(a);const r={separator:{borderBottom:"#dedede 1px solid",margin:"5px auto",width:"110px"}};function l({css:e={}}){const t=Object.assign({},r.separator,e);return o.a.createElement("div",{style:t})}l.propTypes={css:s.a.object}}}]);
//# sourceMappingURL=pjs-BusinessAccountLoginPageDesktop~FullPageSignup~LoginModal~LoginPageDesktop~LoginPageSterling~UnauthH~ffd0224e-dcc8bfa90841210c25a5.mjs.map
