(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["BusinessAccountLoginPageDesktop~FullPageSignup~LoginModal~LoginPageDesktop~LoginPageSterling~Persona~91a2a2d5"],{"+aUF":function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("hvnN"),r=o.n(a);function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){l(e,t,o[t])}))}return e}function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const c={button:{border:"0px",height:"36px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",outline:"none",WebkitBoxShadow:"none",boxShadow:"none",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center"},buttonRed:{backgroundColor:"#e60023",color:"#fff"},buttonLightGrey:{backgroundColor:"#ebebeb",color:"#444"},buttonDarkGrey:{backgroundColor:"#333",color:"#fff"},buttonWhite:{backgroundColor:"#fff",color:"#444"},buttonWhiteBlueText:{backgroundColor:"#fff",color:"#4a90e2"},buttonTransparent:{backgroundColor:"transparent",border:"1px solid #fff",color:"#fff"},disabledButton:{backgroundColor:"#efefef",color:"#8e8e8e"},loadingSpinner:{padding:"0 10px",position:"relative"},noStyles:{background:"none",border:"none",padding:"0",textAlign:"left"}};class d extends n.Component{constructor(e,t){super(e,t),this.state={loadingWidth:null,isMountedClientSide:!1}}componentDidMount(){let e=0;this._buttonRef&&(e=this._buttonRef.getBoundingClientRect().width+parseFloat(this._buttonRef.style.marginLeft)+parseFloat(this._buttonRef.style.marginRight),this.setState({loadingWidth:e})),this.setState({isMountedClientSide:!0})}renderSpinner(){return i.a.createElement("div",{className:"loadingSpinner",style:c.loadingSpinner})}render(){const e=this.state.loadingWidth,t=this.props.loading||this.props.numServerRenderedPins>0&&!1===this.state.isMountedClientSide;let o=this.props.className,n={},a=!1;const r=o.split(" ");this.props.disabled?n=c.disabledButton:r.indexOf("red")>-1?n=c.buttonRed:r.indexOf("lightGrey")>-1?n=c.buttonLightGrey:r.indexOf("darkGrey")>-1?n=c.buttonDarkGrey:r.indexOf("white")>-1?n=c.buttonWhite:r.indexOf("blueText")>-1?n=c.buttonWhiteBlueText:r.indexOf("noButtonStyles")>-1?a=!0:(r.indexOf("transparent")>-1||r.indexOf("blueTransparent")>-1)&&(n=c.buttonTransparent);let l=a?s({},c.noStyles,this.props.styleOverrides):s({},c.button,n,this.props.styleOverrides);if(t){const t={cursor:"default"};e&&Object.assign(t,{width:e}),l=s({},l,t)}else this.props.disabled?l=s({},l,{cursor:"not-allowed"}):o+=" active";return i.a.createElement("button",{"aria-label":this.props.accessibilityLabel,className:o,disabled:this.props.disabled,href:this.props.href,id:this.props.id,onClick:this.props.onClick,ref:this.props.buttonRef||(e=>{this._buttonRef=e}),style:l,type:this.props.type},t?this.renderSpinner():this.props.children)}}d.propTypes={accessibilityLabel:r.a.string,buttonRef:r.a.func,children:r.a.oneOfType([r.a.arrayOf(r.a.element),r.a.element,r.a.string]),className:r.a.string.isRequired,disabled:r.a.bool,href:r.a.string,id:r.a.string,loading:r.a.bool,numServerRenderedPins:r.a.number,onClick:r.a.func,styleOverrides:r.a.object,type:r.a.string},d.defaultProps={accessibilityLabel:"",styleOverrides:{},loading:!1,type:"button"},t.a=d},"1JxL":function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("Ivf5"),r=o("+aUF"),s=o("D+W/"),l=o("n/kK"),c=o("hKcJ"),d=o("Qo1m"),u=o("3nbW"),p=o("i7XF"),g=o("hvnN"),h=o.n(g),m=o("4+0X"),b=o("YkTi"),_=o("QWmP");const f=()=>Promise.resolve().then(o.bind(null,"bWet"));class w{connect(e,t){if(window.addEventListener("message",e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&this.complete(e.data)}),t.rerequest_facebook_email)f().then(({default:e})=>{e.ensureInit(e=>{e.login(e=>{const o=e.authResponse;let n,i;o&&((n=o.grantedScopes)&&(n=n.split(",")),i=o.userID);const a=n.indexOf("email")>-1,r={id:i};"connected"===e.status&&a?t.success(r):t.error(r),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},b.a)});else{const o=this.getWindowOptions(),n=window.open("/connect/"+e+"/","",o);if(!n)return Object(_.a)(d.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});const i=setInterval(()=>{n.closed&&(clearInterval(i),this.handleComplete({network:e,error_message:"Window closed."}))},1e3);m.a.instance.subscribe("site","socialConnectCompleted",(e,o,n)=>{clearInterval(i),n.error_message?t.error(n):t.success(n),"complete"in t&&t.complete()})}}getWindowOptions(){const e=screen.width,t=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=580,height=400,left="+Math.round((e-580)/2)+",top="+(t>400?Math.round((t-400)/2):0)}complete(e){this.handleComplete(e)}handleComplete(e){if("facebook"===e.network){const t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}m.a.instance.publish("site","socialConnectCompleted",e)}}var E=o("tQ9o"),y=o("7M64"),k=o("rlRx"),O=o("9Y9K"),S=o("08qL"),v=o("+U6O"),C=o("rQW8"),x=o("k9eC"),L=o("NmcB"),R=o("JsRk"),T=o("ggpB"),P=o("cEhz"),j=o("C5uM"),B=o("2rhI"),A=o("2YES"),F=o("G8/I");function I(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){N(e,t,o[t])}))}return e}function N(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return M}));const W={button:{backgroundClip:"padding-box",backgroundColor:"#4267b2",borderRadius:"2px",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%"},container:{position:"relative"},tooltip:{top:"12px",left:"100%",position:"absolute"},text:{color:"#fff",display:"inline-block",fontFamily:S.b,fontSize:"15px",fontWeight:"bold",letterSpacing:"normal",lineHeight:"16px",paddingLeft:"4px",paddingTop:"1px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},fbProfileButton:{height:"40px",textAlign:"left"}},M="facebook",D=18,G=100;class U extends n.Component{constructor(...e){super(...e),N(this,"getContainerName",()=>{let e;return window.fbConnectButtonContainerStack&&window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]&&(e=window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]),e}),N(this,"profilePicButtonConnectSuccess",e=>{const t=this.props,o=t.container,n=t.handlePostSuccessConnect,i=t.isAccountSwitch,a=t.loadingIndicatorCallback,r=t.onLoginWithMfa,l=t.onLoginWithSuspended,c=t.preventRegister,p=t.requestContext,g=t.seoUnauthExperiments,h=t.isBusiness,m=void 0!==h&&h,b=t.showLoginWelcomeLoadingFn;if(a&&a(!0),b){const e=new x.c(p,"web_login_welcome_fb").enabled();p.experiments.flush(),e&&b(!0)}const f={facebook_id:e.userID,facebook_token:e.accessToken},w={container:this.getContainerName(),hybridTier:this.context.hybridTier,page:this.context.pageType,is_business:m};Object(u.a)(f,w,g,i).then((e={})=>{if(i&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const t=e.resource_response.data.user;Object(k.b)(t,M,o)}Object(T.d)("login.facebook"),this.contextLogSignupLoginEvent(7536),this.navigateAfterLogin(),n&&n()},e=>{if(b&&b(!1),this.contextLogSignupLoginEvent(7535),e.api_error_code===s.a.LOGIN_MFA_REQUIRED)a&&a(!1),Object(T.d)("login.facebook"),r&&r(f,e.data);else if(e.api_error_code===s.a.LOGIN_USER_NOT_FOUND||e.api_error_code===s.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(c)return void c(M);this.profilePicButtonRegisterWithFacebook(e,f,w)}else e&&e.api_error_code&&Object(T.a)(`facebook_button.failed_login_${e.api_error_code}`),e&&e.api_error_code===s.a.POLICY_VIOLATION_USER&&l?l():Object(_.a)(d.a._("Sorry, we can't log you in."))}),this.contextLogSignupLoginEvent(7534)}),N(this,"statusChangeCallback",e=>{let t="";"connected"===e.status?(Object(T.a)("web.facebook_connect_button.login_status.connected"),this.profilePicButtonConnectSuccess(e.authResponse),t="success"):"not_authorized"===e.status?(Object(T.a)("web.facebook_connect_button.cancel.not_authorized"),Object(_.a)(d.a.commonStrings.connectError),t="not_authorized"):(Object(T.a)("web.facebook_connect_button.cancel.unknown"),Object(_.a)(d.a.commonStrings.connectError),t="other_error");const o=this.props.handlePostConnectClick;o&&o(t)}),N(this,"handleConnectClick",()=>{Object(T.a)("fallback_facebook_button.click");const e=new w;return Object(T.d)("login.facebook_connect.attempt"),e.connect(B.a.FACEBOOK,{success:e=>{this.onFacebookConnectSuccess(e)},error:e=>{e.alertedUpstream||Object(_.a)(d.a.commonStrings.connectError)},rerequest_facebook_email:this.rerequestFacebookEmail}),!1}),N(this,"profilePicButtonRegisterWithFacebook",(e,t,o)=>{const n=this.context.country,i=this.props,a=i.disablePostSignupNextUrl,r=i.loadingIndicatorCallback,s=i.nextUrlParam,l=i.onFBEmailDeniedPerm,c=i.onSocialConnectVerified,u=i.requestContext,g=i.showSignupWelcomeLoadingFn,h=i.showResponseMessageModal,m=()=>{r&&r(!1),e?(this.contextLogSignupLoginEvent(7488),Object(_.a)(d.a._("Email required for registration."))):this.navigate("/join/register/facebook/")},b=e=>{e.socialConnectData&&!e.socialConnectData.email?Object(j.b)("email").then(({hasPerm:e})=>{!e&&l?l():m()},m):m()},f=e=>{this.contextLogSignupLoginEvent(7487);const t=this.props.showResponseMessageModal;t?t(!0):p.c.handleSignupRedirect(s,a)},w=Object(B.d)(n)||Object(B.c)(n);c&&w?y.a.verifyFacebookEmailExists().then(e=>{if(e.birthday&&Object(C.g)(e.birthday,D)){const e=new x.c(u,"web_unauth_fb_welcome_v2").enabled();u.experiments.flush(),!h&&g&&e&&g(!0),y.a.attemptFacebookRegistration(Object.assign({},t,o)).then(f,b),this.contextLogSignupLoginEvent(7537)}else{r&&r(!1);const n=Object.assign({},t,o);c(B.a.FACEBOOK,e,n)}},b):y.a.attemptFacebookRegistration(I({},t,o)).then(f,b)}),N(this,"registerWithFacebook",(e,t)=>{const o=this.context.country,n=this.props,i=n.disablePostSignupNextUrl,a=n.nextUrlParam,r=n.onSocialConnectVerified,s=t=>{this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),e?(this.contextLogSignupLoginEvent(7488),this.rerequestFacebookEmail=!0,Object(_.a)(d.a._("Email required for registration."))):this.navigate("/join/register/facebook/")};r&&Object(B.d)(o)?y.a.verifyFacebookEmailExists().then(e=>{r(B.a.FACEBOOK,e,t)},s):(y.a.attemptFacebookRegistration(t).then(()=>{this.contextLogSignupLoginEvent(7487);const e=this.props.showResponseMessageModal;e?e(!0):p.c.handleSignupRedirect(a||window.location.pathname,i)},s),this.contextLogSignupLoginEvent(7537))}),N(this,"navigateAfterLogin",()=>{const e=this.props.showResponseMessageModal;e?e(!0):p.c.handleRedirect(this.props.nextUrlParam||window.location.pathname)}),N(this,"renderTooltip",e=>e?this.props.useGestaltTooltip?i.a.createElement(c.a,{anchor:this._fallbackButton,message:e}):i.a.createElement("div",{style:W.tooltip},i.a.createElement(E.a,{message:e})):null)}handleMessageEvent(e){Object(j.f)(e,e=>Object(T.a)(`unauth_web.${e}`))}shouldShowFallbackButton(){const e=this.props,t=e.seoUnauthExperiments;return e.showFallback||(t.v2ActivateExperiment("web_unauth_facebook_connect_button_disable_iframe_and_show_fallback")||"").startsWith("enabled")}componentDidMount(){"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=this.checkLoginState,window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1,window.addEventListener("message",this.handleMessageEvent,!1));const e=this.context.userAgent;if("ios"!==e.platform&&"ipad"!==e.platform)setTimeout(()=>{window.__branchRedirectToStore||!window.__branchPinterestStarted?this.initializeFB():window.onbeforeunload=()=>{window.__branchRedirectToStore&&this.initializeFB()}},50);else if(1!==window.fb_init&&2!==window.fb_init)this.initializeFB();else if(2===window.fb_init&&window.FB.XFBML)window.FB.XFBML.parse();else{const e=setInterval(()=>{2===window.fb_init&&window.FB.XFBML&&(window.FB.XFBML.parse(),clearInterval(e))},G)}this.props.isRerequest&&(this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.props.showSignupWelcomeLoadingFn&&this.props.showSignupWelcomeLoadingFn(!1))}componentDidUpdate(){window.nextUrlParam=this.props.nextUrlParam}componentWillUnmount(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){const e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam),window.removeEventListener("message",this.handleMessageEvent)}}onFacebookConnectSuccess(e){const t=this.props,o=t.preventRegister,n=t.container,i=t.isBusiness,a=void 0!==i&&i;Object(T.d)("login.facebook_connect.success");const r={facebook_id:e.id,facebook_token:e.access_token},l={container:n,hybridTier:this.context.hybridTier,page:this.context.pageType,is_business:a};Object(u.a)(r,l,this.props.seoUnauthExperiments).then(()=>{Object(T.d)("login.facebook"),this.contextLogSignupLoginEvent(7536),this.navigateAfterLogin()},e=>{if(this.contextLogSignupLoginEvent(7535),e.api_error_code===s.a.LOGIN_MFA_REQUIRED)Object(T.d)("login.facebook"),this.props.onLoginWithMfa&&this.props.onLoginWithMfa(r,e.data);else if(e.api_error_code===s.a.LOGIN_USER_NOT_FOUND||e.api_error_code===s.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(o)return void o(M);this.registerWithFacebook(e,l)}else e&&e.api_error_code&&Object(T.a)(`facebook_button.failed_login_${e.api_error_code}`),e.api_error_code===s.a.POLICY_VIOLATION_USER&&this.props.onLoginWithSuspended?this.props.onLoginWithSuspended():Object(_.a)(d.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc."))}),this.contextLogSignupLoginEvent(7534)}initializeFB(){const e=this.props,t=e.requestContext,o=e.seoUnauthExperiments;if(null!==this.profilePicButton){const e=(o.v2ActivateExperiment("web_external_script_loader_with_wait")||"").startsWith("enabled");void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():e?Object(F.c)("//connect.facebook.net/"+l.a.getLocaleString(t.locale)+"/sdk.js",F.a.FACEBOOK,!0).then(()=>{window.FB.init({appId:s.a.GEN.templateConst.settings.FACEBOOK_API_KEY,status:!0,xfbml:!0,version:"v2.7"})}):(window.fbAsyncInit=function(){window.FB.init({appId:s.a.GEN.templateConst.settings.FACEBOOK_API_KEY,status:!0,xfbml:!0,version:"v2.7"})},((e,o,n)=>{const i=e.getElementsByTagName(o)[0];if(e.getElementById(n))return;const a=e.createElement(o);a.id=n,a.src="//connect.facebook.net/"+l.a.getLocaleString(t.locale)+"/sdk.js",i.parentNode&&i.parentNode.insertBefore(a,i)})(document,"script","facebook-jssdk"))}}checkLoginState(){window.FB.getLoginStatus((function(e){this.statusChangeCallback(e)}))}contextLogSignupLoginEvent(e){const t=this.props.viewer;t.isAuth?Object(L.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:2}):Object(L.a)(e,{signup_login_method:2})}login(e){return Object(u.a)(e,{container:"fbconnectbtn"},this.props.seoUnauthExperiments).then(()=>{this.navigateAfterLogin()})}renderProfilePicButtonWithFallback(){const e=this.props,t=e.type,o=e.isRerequest,n=e.styleOverrides,a='<div class="fb-login-button" '+`data-scope="${j.a.join(",")}" `+'onlogin="checkLoginState"'+`data-button-type="${"login"===t?"login_with":"continue_with"}" `+`data-use-continue-as="${"login"===t?"false":"true"}" `+'data-width="268px"data-size="large"></div>',s='<div class="fb-login-button" '+`data-scope="${j.a.join(",")}" `+'onlogin="checkLoginState"'+`data-button-type="${"login"===t?"login_with":"continue_with"}" `+`data-use-continue-as="${"login"===t?"false":"true"}" `+'data-width="268px"data-auth-type="rerequest"data-size="large"></div>',l=this.props,c=l.buttonText,u=l.inline;let p=W.button;u&&(p=I({},p,{width:"48%",display:"inline-block"})),this.shouldShowFallbackButton()&&(p=I({},p,{position:"relative"})),n&&n.button&&(p=I({},p,n.button));const g=I({},W.text,n&&n.text||{}),h=W.fbProfileButton;return i.a.createElement("div",{ref:e=>{this._fallbackButton=e}},i.a.createElement(r.a,{className:"FacebookConnectButton",onClick:this.handleConnectClick,styleOverrides:p,type:"button"},i.a.createElement(v.m,{accessibilityLabel:d.a._("facebook","accessible label for facebook icon"),color:"white",icon:"facebook",inline:!0,size:24}),i.a.createElement("span",{style:g},c)),!this.shouldShowFallbackButton()&&i.a.createElement("div",{dangerouslySetInnerHTML:{__html:o?s:a},ref:e=>{this.profilePicButton=e},style:h}))}render(){const e=this.props.styleOverrides,t=I({},W.container,e&&e.container||{});return i.a.createElement("div",{style:t},this.renderProfilePicButtonWithFallback(),this.renderTooltip(this.props.tooltip))}}N(U,"contextTypes",{country:h.a.string,userAgent:h.a.shape({browserName:h.a.string.isRequired,platform:h.a.string.isRequired,raw:h.a.string.isRequired}).isRequired,hybridTier:h.a.string,pageType:h.a.string}),N(U,"defaultProps",{inline:!1,showFallback:!1});t.b=Object(O.compose)(A.e,Object(a.connect)(e=>({viewer:e.viewer})),P.b,R.withRouter)(U)},"2Uh4":function(e,t,o){var n=o("B8/j"),i=o("ePT2"),a=o("NmcB");t.a=({usernameOrEmail:e,logOptions:t,callBack:o,ErrorCallback:r})=>{t&&Object(a.a)(n.a.requestEnd,t),i.a.create("UserResetPasswordResource",{username_or_email:e}).callCreate({showError:!1}).then(e=>{t&&Object(a.a)(n.a.request,t),o&&o()},e=>{r&&r(e)})}},"7M64":function(e,t,o){var n=o("WQSK"),i=o("f5ca"),a=o("D+W/"),r=o("oFGA"),s=o("ztFR"),l=o("Fpqi"),c=o("Awvc");function d(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}var u=o("ptua");var p=o("Qo1m"),g=o("l1Vv"),h=o.n(g),m=o("/YZq"),b=o("ePT2"),_=o("iL8V"),f=o("PhUE"),w=o("ggpB"),E=o("q579"),y=o("aqOH"),k=o("rQW8"),O=o("2rhI"),S=o("dkdd"),v=o("HLgS");function C(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){x(e,t,o[t])}))}return e}function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const L=m.a.getLogger("AuthHandshake"),R=m.a.getLogger("UserRegistration");let T=0;const P=(e,t)=>{Object(w.a)(`web_cross_domain_register.${e}.${Object(O.b)(t)}`)},j={register(e){const t=C({},e),o=f.b.localStorage.getItem("visitedPages");o&&(t.visited_pages=JSON.stringify(o));const n=f.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin");if(n){const e=[];for(const t of n)t.is_shared_pin&&e.push({ts:t.ts,path:t.path,first_pin_image_signature:t.image_signature,is_shared:!0});e&&(t.visited_pages=JSON.stringify(e.concat(o||[])))}if(t.user_behavior_data=Object(S.b)(),j.shouldPerformCrossDomainRegister(t)){if(-1!==a.a.GEN.templateConst.settings.CORS_HANDSHAKE_DOMAINS.indexOf(r.a.instance.origin))return Object(w.a)("unauth_cross_domain_register_debugging_counter"),j.crossDomainRegister(t)}return j.getResource(t).callCreate().then(j.onRegisterSuccess.bind(null,t),j.onRegisterError.bind(null,t))},crossDomainRegister:e=>(P("attempt",e),i.default.registerUser(e).then(t=>{j.onRegisterSuccess(e,t);const o=t.data||"";if(o)return P("success_with_token",e),i.default.exchangeTokenAndSetSession(o,!0).then(t=>{P("success_token_exchanged",e),L.debug("Cross domain register successful")},t=>{throw P("success_token_not_exchanged",e),L.error("Failed to set session for current user; "+t.message),t});{P("success_without_token",e),L.error("No custom access token in cross domain register response");const t=p.a._("We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue.");throw new Error(t)}},t=>{P("failure",e),L.error("Failed to register new user; "+t.message),j.onRegisterError(e,t)})),onRegisterSuccess:(e,t)=>(Object(v.b)("signup"),n.unset("galae"),n.unset("fbalae"),R.debug("Login, successful",t),Object(_.a)(),n.set("ujr","1"),j.trackRegister(e),t),onRegisterError(e,t){if(t.api_error_code===a.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(Object(w.a)("multi_step_set_age_restrict_cookie"),n.set("r_r","1",87600),n.set("_pinterest_pfob","disabled")),(h()(t.api_error_code)||[a.a.API_SERVER_ERROR,a.a.API_REQUEST_TIMEOUT].includes(t.api_error_code))&&T<3)return Object(w.a)(`unauth_web.signup_retry_error.${String(t.api_error_code)}.${String(e.container)}`),T+=1,j.register(e);throw t},trackRegister(e){let t;switch(e.container){case"home_page":t=s.a.fromEventType(1750),Object(w.a)("signup_home_page");break;case"mweb_homepage":t=s.a.fromEventType(1750),Object(w.a)("signup_mweb_home_page");break;case"plain_signup_modal":t=s.a.fromEventType(1751),Object(w.a)("signup_plain_modal");break;case"closeup_signup_modal":t=s.a.fromEventType(1752),Object(w.a)("signup_closeup_modal");break;case"widescreen_signup_modal":t=s.a.fromEventType(1753),Object(w.a)("signup_widescreen_modal");break;case"pinit_button_landing":t=s.a.fromEventType(1755),Object(w.a)("signup_pinit_button_landing");break;case"inspired_banner":Object(w.a)("signup_inspired_banner");break;case"category_jump_banner":Object(w.a)("signup_category_jump_banner");break;case"send_pin_banner":t=s.a.fromEventType(1756),Object(w.a)("send_pin_banner");break;default:t=s.a.fromEventType(1754),Object(w.a)("signup_unknown_placement")}const o=e.container||"container_unknown";Object(w.a)("signup.container."+o);const n=e.signupSource||"signupSource_unknown";Object(w.a)("signup.source."+n),t&&l.a.getInstance().addEvent(t);const i=document.referrer;let a;a=i?i.indexOf("/t.co/")>-1?"twitter":i.indexOf("google.")>-1?"google":i.indexOf("bing.")>-1?"bing":i.indexOf("facebook.")>-1?"facebook":"other":"direct",Object(w.a)("signup_referrer."+a);const p=E.a.getQueryStringParams().referrer||function(){if(c.a.instance){return d(c.a.instance.initModule.className)}{const e=u.a.instance.getState().ui.mainComponent.initial;if(e)return d(e)}return null}();Object(w.a)("signup_referrer_module."+String(p));const g=r.a.instance.user_agent_platform;"ios"===g?Object(w.a)("signup_mweb.iphone_web"):"ipad"===g?Object(w.a)("signup_mweb.ipad_web"):"android"===g&&Object(w.a)("signup_mweb.android_web");const h=e.hybridTier||"tier_unknown",m=e.page||"page_unknown",b=Object(O.b)(e);Object(w.a)(`web_signup.${b}.success.${m}.${o}.${a}.${h}`)},getResource:e=>b.a.create("UserRegisterResource",e),attemptFacebookRegistration:e=>j.verifyFacebookEmailExists().then(t=>{if(!t.email)return Promise.reject({error:new Error("Email required to sign up."),socialConnectData:t});const o=j.buildFacebookRegistrationResourceOptions(t);return j.register(C({},o,e))}),verifyFacebookEmailExists:()=>j.fetchFacebookUserData().then(e=>e.email?Promise.resolve(e):Promise.reject({error:new Error("Email required to sign up."),socialConnectData:e})),buildFacebookRegistrationResourceOptions:e=>({first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.image_url,facebook_id:e.id,facebook_token:e.access_token||"",birthday:String(Object(k.e)(e.birthday||""))}),fetchFacebookUserData:()=>(()=>Promise.resolve().then(o.bind(null,"bWet")))().then(({default:e})=>new Promise((t,o)=>{e.ensureInit(e=>{e.getLoginStatus(n=>{if(!n.authResponse)return o(new Error("not authed"));const i="/me?fields="+["picture.type(large)","id","first_name","last_name","email","gender","birthday"].join(",");e.api(i,e=>!e||e.error?o(new Error("FB.api errored: "+e.error)):(e.picture&&e.picture.data&&e.picture.data.url&&!e.picture.data.is_silhouette&&(e.image_url=e.picture.data.url),t(e)))},!0)},y.default)})),shouldPerformCrossDomainRegister:e=>!(e.facebook_id||e.gplus_code||e.gplus_id_token||e.google_open_id_token)&&!!e.email};t.a=j},AIe5:function(e,t,o){var n=o("GyhR"),i=o("+U6O");t.a=({children:e,description:t,error:o,id:a,label:r,required:s,onLabelTouch:l})=>n.createElement(i.b,null,n.createElement(i.b,{marginBottom:1},n.createElement(i.p,{htmlFor:a},n.createElement(i.J,{color:o?"red":"darkGray"},r,s&&n.createElement(i.J,{color:"red",bold:!0,inline:!0},n.createElement("span",{"aria-hidden":"true"},"*"))))),e,(!!o||!!t)&&n.createElement(i.p,{htmlFor:a},n.createElement(i.b,{marginTop:1},l?n.createElement(i.O,{onTouch:l},n.createElement(i.J,{color:o?"red":"darkGray",size:"sm"},o||t)):n.createElement(i.J,{color:o?"red":"darkGray",size:"sm"},o||t))))},"B8/j":function(e,t,o){t.a={request:51,requestBegin:6935,requestEnd:6936}},CBQr:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("VSY/"),r=o("D+W/"),s=o("Qo1m"),l=o("hvnN"),c=o.n(l);function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){u(e,t,o[t])}))}return e}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const p={tosContainer:{marginTop:"15px"},tosCommon:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear"},tosLarge:{color:"#333",fontSize:"12px",lineHeight:"12px"},tosDark:{color:"#aaa",width:"224px"},tosLight:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"}};function g(e,t){const o=r.a.GEN.templateConst.settings.EU_COUNTRIES;let n=d({},p.tosCommon,p.tosDark);e.dark||(n=d({},p.tosCommon,p.tosLight));let l,c=e.noContainer?{}:p.tosContainer;return e.dynamicTopMargin&&(c=d({},c,{marginTop:"3%"})),e.disableWordBreak&&(c=d({},c,{hyphens:"none"})),e.large&&(n=d({},n,p.tosLarge)),l=o.indexOf(t.country)>-1?a.c(s.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}">Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}">Privacy Policy</a> and <a href="{{ cookie_url }}"> Cookie use</a>.'),{tos_url:r.a.GEN.templateConst.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:r.a.GEN.templateConst.settings.ABOUT_PRIVACY_PLAIN_URL,cookie_url:r.a.GEN.templateConst.settings.ABOUT_COOKIE_URL}):a.c(s.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}" target="_blank" >Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}" target="_blank">Privacy Policy</a>'),{tos_url:r.a.GEN.templateConst.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:r.a.GEN.templateConst.settings.ABOUT_PRIVACY_PLAIN_URL}),i.a.createElement("div",{style:c},i.a.createElement("span",{className:e.dark?"":"TermsOfService__light",style:n},i.a.createElement("span",{dangerouslySetInnerHTML:{__html:l}})))}g.propTypes={dark:c.a.bool,large:c.a.bool,noContainer:c.a.bool,dynamicTopMargin:c.a.bool,disableWordBreak:c.a.bool},g.contextTypes={country:c.a.string.isRequired},t.a=g},GCCY:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("Ivf5"),r=o("+aUF"),s=o("D+W/"),l=o("/TEi"),c=o("Qo1m"),d=o("3nbW"),u=o("i7XF"),p=o("hvnN"),g=o.n(p),h=o("tQ9o"),m=o("ggpB"),b=o("7M64"),_=o("E56J"),f=o("+U6O");function w(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const E="google_auth_id_token",y="google_auth_first_name",k={container:{__style:{backgroundColor:"white",borderRadius:"8px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:1}},msWebview:{height:"100%",width:"100%"}},O=()=>"undefined"!=typeof window?`${window.location.origin}/connect/gplus/`:"";var S=class extends n.Component{constructor(...e){super(...e),w(this,"state",{googleSignWebviewSource:O()}),w(this,"handleMsWebViewScriptNotify",e=>{if("success"===e.value){const e=this.props,t=e.onDismiss,o=e.onSignInCallback,n=window.localStorage.getItem(E),i=window.localStorage.getItem(y);window.localStorage.removeItem(E),window.localStorage.removeItem(y),_.a.increment("windows.google.connect.handleMsWebViewScriptNotify.success"),o({access_token:"",code:"",expires_at:"",id_token:n,status:{signed_in:!0},first_name:i},!1,window.gapi,"windows"),t()}else"failure"===e.value&&(_.a.increment("windows.google.connect.handleMsWebViewScriptNotify.failure"),this.props.onError())}),w(this,"msWebViewRef",e=>{e&&e.addEventListener("MSWebViewScriptNotify",this.handleMsWebViewScriptNotify)})}render(){const e=this.props.onDismiss,t=this.state.googleSignWebviewSource;return i.a.createElement(f.b,{display:"flex",position:"fixed",dangerouslySetInlineStyle:k.container,direction:"column",height:"800px",padding:1,width:"500px"},i.a.createElement(f.b,{alignItems:"end",display:"flex",height:"35px",justifyContent:"end"},i.a.createElement(f.n,{accessibilityLabel:c.a._("Cancel Google Sign-In","Accessibility label for Google Sign-In Dialog bog"),onClick:e,icon:"cancel"})),i.a.createElement(f.b,{flex:"grow"},i.a.createElement("x-ms-webview",{style:k.msWebview,ref:this.msWebViewRef,src:t})))}},v=o("afZw"),C=o("rlRx"),x=o("9Y9K"),L=o("08qL"),R=o("hrsr"),T=o("QWmP"),P=o("k9eC"),j=o("NmcB"),B=o("JsRk"),A=o("cEhz"),F=o("2rhI"),I=o("2YES");function N(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){W(e,t,o[t])}))}return e}function W(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return U}));const M={button:{padding:"1px",marginRight:"0px",textAlign:"left",backgroundClip:"padding-box",display:"block",transition:"opacity .2s linear",position:"relative",outline:"none",width:"100%",marginTop:"0px",backgroundColor:"#4285f4",height:"40px",borderRadius:"2px"},icon:{borderRadius:"2px",backgroundColor:"#fff",display:"inline-block",height:"25px",marginLeft:"7px",textAlign:"center",width:"25px"},iconContainer:{position:"relative",margin:"auto",marginTop:"2px"},text:{color:"#fff",display:"inline-block",fontFamily:L.b,position:"absolute",textAlign:"center",top:"50%",transform:"translateY(-50%)",verticalAlign:"top",WebkitFontSmoothing:"auto",width:"83%"},tooltip:{top:"12px",left:"100%",position:"absolute"}},D="postmessage",G="profile email",U="google",V="signin_render",q="signin_auth2",z=()=>"undefined"!=typeof window&&void 0!==window.Windows;class Y extends n.Component{constructor(...e){super(...e),W(this,"state",{showGoogleSigninWebview:!1}),W(this,"onSignInCallback",(e,t,o,n=V)=>{const i=this.props,a=i.requestContext,r=i.showLoginWelcomeLoadingFn,l={gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at};if(e.status.signed_in){if(r){const e=new P.c(a,"web_login_welcome_google").enabled();a.experiments.flush(),e&&r(!0)}Object(m.a)(`unauth_web.google_connect.success.${n}`),this.login(l).then((e={})=>{if(this.props.isAccountSwitch&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const t=e.resource_response.data.user;Object(C.b)(t,U,this.props.container)}t&&(Object(m.a)("autologin.google"),Object(m.a)("autologin.google_connect_button")),this.onLoginSuccess()},t=>{if(r&&r(!1),t.api_error_code===s.a.LOGIN_VOLUNTARILY_DEACTIVATED_USER)this.props.onLoginWithVoluntarilyDeactivated&&this.props.onLoginWithVoluntarilyDeactivated(t);else if(t.api_error_code===s.a.LOGIN_MFA_REQUIRED)this.props.onLoginWithMfa&&this.props.onLoginWithMfa(l,t.data);else if(t.api_error_code===s.a.LOGIN_USER_NOT_FOUND){if(this.props.preventRegister)return void this.props.preventRegister(U);this.onLoginError(t,e,o)}else t&&t.api_error_code&&Object(m.a)(`google_connect_button.failed_login.${t.api_error_code}.${n}`),t.api_error_code===s.a.POLICY_VIOLATION_USER&&this.props.onLoginWithSuspended?this.props.onLoginWithSuspended():Object(T.a)(c.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc."))})}else{const t=e?e.error:"unknown";Object(m.a)(`unauth_web.google_connect.failure.${String(t)}.${n}`)}}),W(this,"onLoginSuccess",()=>{const e=this.props.showResponseMessageModal;e?e(!1):u.c.handleRedirect(this.props.nextUrlParam||window.location.pathname)}),W(this,"shouldRequireAge",()=>{const e=this.context.country;return Object(F.d)(e)||Object(F.c)(e)}),W(this,"handleGoogleConnectButtonClick",()=>{l.a.get(e=>{Object(R.a)(e=>Object(m.a)(`unauth_web.google_connect.init.${e}`)).then(t=>{z()&&this.setState({showGoogleSigninWebview:!0}),Object(v.a)(this.props.requestContext)&&(Object(m.a)(`unauth_web.google_connect.init.${q}`),t.signIn({scope:G}).then(t=>{Object(m.a)(`unauth_web.google_connect.success.${q}`);const o=N({},t.getAuthResponse(),{code:""},{status:{signed_in:!0}});this.onSignInCallback(o,!1,e,q)},({error:e})=>{Object(m.a)(`unauth_web.google_connect.failure.${String(e)}.${q}`)}))},e=>{Object(m.a)("unauth_web.google_connect.error.auth2_sdk_init_error")}).catch(e=>{Object(m.a)(`unauth_web.gapi_auth2_load.error.${e||"unknown"}`),Object(T.a)(c.a._("Sorry, you need to select an account if you want to log in with Google.","error message when user failed to login/signup because they did not complete the Google step."))})})}),W(this,"handleOnDimisssWindowsPWAWebview",()=>{this.setState({showGoogleSigninWebview:!1})}),W(this,"handleOnErrorWindowsPWAWebview",()=>{this.setState({showGoogleSigninWebview:!1}),Object(T.a)(c.a._("Sorry, there was an error signing in with Google.","error message when user failed to login/signup using Google sign-in."))}),W(this,"handleSignupSuccess",()=>{const e=this.props,t=e.disablePostSignupNextUrl,o=e.nextUrlParam,n=e.showResponseMessageModal;this.contextLogSignupLoginEvent(7487),n?n(!0):u.c.handleSignupRedirect(o,t)}),W(this,"handleSignupFailure",()=>{this.contextLogSignupLoginEvent(7488)}),W(this,"renderTooltip",e=>e?i.a.createElement("div",{style:M.tooltip},i.a.createElement(h.a,{message:e})):null)}componentDidMount(){"undefined"!=typeof window&&(window.googleOnSignInCallbacks?window.googleOnSignInCallbacks.push(this.onSignInCallback):window.googleOnSignInCallbacks=[this.onSignInCallback]),this.readyForConnect=!1,this.autoLogin=!1,z()||l.a.get(e=>{this._googleCallback(e)}),window.googleConnectButtonContainer=this.props.container?this.props.container:""}componentWillUnmount(){if("undefined"!=typeof window&&window.googleOnSignInCallbacks){const e=window.googleOnSignInCallbacks.indexOf(this.onSignInCallback);e>=0&&window.googleOnSignInCallbacks.splice(e,1)}delete window.googleConnectButtonContainer}onLoginError(e,t,o){const n=this.props,i=n.onSocialConnectVerified,a=n.requestContext,r=n.showSignupWelcomeLoadingFn,s=n.showResponseMessageModal,l=N({gplus_code:t.code,gplus_id_token:t.id_token,gplus_redirect_uri:D},void 0!==t.first_name?{gplus_first_name:t.first_name}:{}),c={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};if(i&&this.shouldRequireAge())return void i(F.a.GOOGLE,{},N({},l,c));const d=new P.c(a,"web_unauth_gplus_welcome_v2").enabled();a.experiments.flush(),!s&&r&&d&&r(!0),b.a.register(N({},l,c,{recapToken:null})).then(this.handleSignupSuccess,this.handleSignupFailure)}_googleCallback(e){Object(v.a)(this.props.requestContext)||e.signin.render(this.googleButton,{scope:G,clientid:s.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,apppackagename:s.a.GEN.templateConst.settings.GPLUS_APP_PACKAGE_NAME,redirecturi:D,accesstype:"offline",cookiepolicy:"single_host_origin",callback:function(t){this.readyForConnect&&window.googleOnSignInCallbacks&&window.googleOnSignInCallbacks[window.googleOnSignInCallbacks.length-1]&&window.googleOnSignInCallbacks[window.googleOnSignInCallbacks.length-1](t,this.autoLogin,e),this.readyForConnect=!0,this.autoLogin=!1}.bind(this)})}contextLogSignupLoginEvent(e){const t=this.props.viewer;t.isAuth?Object(j.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:3}):Object(j.a)(e,{signup_login_method:3})}login(e){const t={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};return Object(d.a)(e,t,this.props.seoUnauthExperiments,this.props.isAccountSwitch)}logo(e){return i.a.createElement("svg",{height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),i.a.createElement("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),i.a.createElement("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),i.a.createElement("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),i.a.createElement("path",{d:"M20 20h472v472H20V20z"})))}render(){const e=this.props,t=e.inline,o=e.styleOverrides,n=this.state.showGoogleSigninWebview;let a=M.button;t&&(a=N({},a,{width:"48%",display:"inline-block"})),o&&o.button&&(a=N({},a,o.button));const s=N({},M.icon,o&&o.icon||{}),l=N({},M.text,o&&o.text||{}),d=c.a._("Continue with Google");return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{id:"googleConnectButton",buttonRef:e=>{this.googleButton=e},className:"GoogleConnectButton",onClick:this.handleGoogleConnectButtonClick,styleOverrides:a,type:"button"},i.a.createElement("div",{style:s},i.a.createElement("div",{style:M.iconContainer},this.logo(20))),i.a.createElement("span",{style:l},d),this.renderTooltip(this.props.tooltip)),n&&z()&&i.a.createElement(S,{onDismiss:this.handleOnDimisssWindowsPWAWebview,onError:this.handleOnErrorWindowsPWAWebview,onSignInCallback:this.onSignInCallback}))}}W(Y,"defaultProps",{inline:!1});Y.contextTypes={country:g.a.string,hybridTier:g.a.string,pageType:g.a.string};t.b=Object(x.compose)(I.e,Object(a.connect)(e=>({viewer:e.viewer})),A.b,B.withRouter)(Y)},GIJk:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("Qo1m"),r=o("hvnN"),s=o.n(r);const l={alternativesSeparator:{marginBottom:"3px",overflow:"hidden",textAlign:"center",color:"#333",fontWeight:"bold"}};function c({css:e={}},t,o){const n=t.text||a.a._("OR"),r=Object.assign({},l.alternativesSeparator,e);let s="";return t.signupSeparatorContinuous&&(s="AlternativesSeparatorContinuous"),i.a.createElement("p",{className:s,style:r},n)}c.propTypes={css:s.a.object,signupSeparatorContinuous:s.a.bool,text:s.a.string},c.contextTypes={pageType:s.a.string},t.a=c},"M8i/":function(e,t,o){o.d(t,"a",(function(){return d}));var n=o("GyhR"),i=o("ulrk"),a=o("Qo1m"),r=o("dsfX"),s=o("Irlq"),l=o("WH5r"),c=o("+U6O");function d({onClose:e}){const t=a.a._("Your account is suspended for violating our community guidelines. We previously sent you an email explaining why and how to appeal. If you have questions, {{ help_link }}."),o=a.a._("Your account is suspended for violating our community guidelines. If you have questions, {{ help_link }}."),d=t||o;return n.createElement(r.b,{accessibilityCloseLabel:a.a._("close","accessible label for button to close modal"),accessibilityModalLabel:a.a._("Login disabled for suspended account","Modal accessibility label for when a user tries to login with a suspended account"),heading:a.a._("Your account has been suspended","Modal heading for user who have attempted to login with a suspended account"),onDismiss:e,role:"alertdialog",size:"md"},n.createElement(c.b,{paddingX:6,marginBottom:4},n.createElement(c.b,{marginBottom:4},n.createElement(c.J,{inline:!0,leading:"tall"},Object(s.b)(d,{help_link:n.createElement(l.a,{key:"suspended user help_link"})}))),n.createElement(c.b,{marginTop:4},n.createElement(i.a,{color:"red",onClick:e,overrideText:a.a._("Got it","Acknowledge suspended account modal message")}))))}},MDr3:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("D+W/"),r=o("IItM"),s=o("Qo1m"),l=o("ulrk"),c=o("dsfX"),d=o("2Uh4"),u=o("+U6O");function p(e){const t=s.a._("Reset password","Request a password reset email");return i.a.createElement(u.c,{accessibilityLabel:t,color:e.color||"red",inline:e.inline,onClick:()=>{Object(d.a)({usernameOrEmail:e.email,callBack:e.callBack})},text:e.overrideText||t})}var g=o("Irlq");function h({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("Login with Facebook or Google?","Modal accessibility label for when a user has failed login three times"),heading:s.a._("Looks like you’re having trouble logging in","Modal heading for user who have attempted to login three times"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.b,{paddingX:6,marginBottom:4},n.createElement(u.b,null,n.createElement(u.J,null,Object(g.b)(s.a._("We sent an email to {{ email }} to help you get back in.",""),{email:n.createElement(u.J,{inline:!0,bold:!0,key:"emailAddress"},e)})),n.createElement(u.b,{paddingY:3},n.createElement(p,{inline:!0,color:"gray",email:e,callBack:o,overrideText:s.a._("Resend email","Button to allow the user to request a password reset email")}))),n.createElement(u.b,{marginBottom:4},n.createElement(u.J,null,s.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login"))),i,n.createElement(u.b,{marginTop:4},n.createElement(l.a,{onClick:t}))))}function m({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("Login limit reached","Modal accessibility label for users who have been login rate limited"),heading:s.a._("Oops! Too fast","Modal heading for user who have been login rate limited"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.b,{paddingX:6,marginBottom:4},n.createElement(u.b,{marginBottom:4,width:"100%",overflow:"hidden"},n.createElement(u.J,{inline:!0,leading:"tall"},s.a._("It looks like you’re logging in a lot. Log in with Facebook or Google if you’re connected, or reset your password. Or you can wait 30 minutes and try again.","Statement that the users is login limited"))),n.createElement(u.b,{marginBottom:4},n.createElement(u.J,null,s.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login"))),n.createElement(p,{email:e,callBack:o}),i,n.createElement(u.b,{marginTop:4},n.createElement(l.a,{onClick:t,overrideText:s.a._("I’ll wait","Button text acknowledging login rate limiting")}))))}var b=o("1JxL");function _({email:e,loginWith:t,onClose:o,onPasswordResetSent:i,socialButtons:a}){return n.createElement(c.b,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("No matching account","Modal accessibility label for account recovery"),heading:s.a._("Oops! Something went wrong","Modal heading"),onDismiss:o,role:"alertdialog",size:"md"},n.createElement(u.b,{paddingX:6,marginBottom:4},n.createElement(u.b,{marginBottom:6},t===b.a?n.createElement(u.J,null,s.a._("We couldn’t match your Facebook account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login")):n.createElement(u.J,null,s.a._("We couldn’t match your Google account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login"))),n.createElement(p,{email:e,callBack:i}),n.createElement(u.b,{marginTop:2},n.createElement(l.a,{onClick:o}))))}const f="?source=account_recovery";function w({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){const r=s.a._("Password reset email sent","Modal label for confirmation of password reset send");return n.createElement(c.b,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:r,heading:r,onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.b,{paddingX:6,marginBottom:4},n.createElement(u.J,{overflow:"normal"},Object(g.b)(s.a._("We sent instructions to pick a new password to {{ email }}.","Statement that a password reset email has been sent to the user"),{email:n.createElement(u.J,{inline:!0,bold:!0,overflow:"normal",key:"emailAddress"},e)})),n.createElement(u.b,{paddingY:4},n.createElement(p,{inline:!0,color:"gray",email:e,callBack:o,overrideText:s.a._("Resend email","Button to allow the user to request a password reset email")})),n.createElement(u.b,null,n.createElement(u.b,{marginBottom:4},n.createElement(u.J,null,Object(g.b)(s.a._("Didn’t get the email? Try these {{ tips }}","Direction to help center if the password reset email failed"),{tips:n.createElement(u.s,{inline:!0,key:"helpCenterLink",target:"blank",href:a.a.GEN.templateConst.settings.HELP_PASSWORD_RESET_URL+f},n.createElement(u.J,{bold:!0,inline:!0,key:"helpCenter"},s.a._("tips from our Help Center","Link text to go to help center")))}))),n.createElement(u.b,{marginBottom:4},n.createElement(u.J,null,Object(g.b)(s.a._("Not your email address? {{ tryAgain }}","Link to password reset flow for users who make an incorrect password reset request"),{tryAgain:n.createElement(u.s,{inline:!0,key:"passwordResetLink",href:a.a.GEN.templateConst.settings.PASSWORD_RESET_URL},n.createElement(u.J,{bold:!0,inline:!0,key:"tryAgain"},s.a._("Try another","Link text to enter the password reset flow for a different email address/username")))})))),n.createElement(u.b,null,n.createElement(l.a,{color:"red",onClick:t}))))}function E({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityCloseLabel:s.a._("close","accessible label for button to close modal"),accessibilityModalLabel:s.a._("Recover your account","Modal accessibility label for account recovery"),heading:s.a._("We protected your account","Modal heading for user who need to recover their accounts"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.b,{paddingX:6,marginBottom:4},n.createElement(u.b,{marginBottom:4},n.createElement(u.J,{inline:!0,leading:"tall"},s.a._("We noticed some strange activity on your Pinterest account so we reset your password and logged everyone out (including you).","Statement that we detected suspicious activity"))),n.createElement(u.b,{marginBottom:4},n.createElement(u.J,null,s.a._("Reset your password or log in with Facebook or Google to get back into your account","Prompt to take action to reset password or upsell login with Facebook/Google"))),n.createElement(p,{email:e,callBack:o}),i,n.createElement(u.b,{marginTop:4},n.createElement(l.a,{onClick:t}))))}var y=o("M8i/"),k=o("KCDi"),O=o("GCCY"),S=o("i7XF");function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return C})),o.d(t,"b",(function(){return x}));const C={[a.a.API_LIMIT_EXCEEDED_ERROR]:S.b.RATE_LIMITED,[a.a.API_EVENT_BLOCKED_ERROR]:S.b.RATE_LIMITED,[a.a.USER_IN_SAFE_MODE]:S.b.SOFT_BANNED,[a.a.POLICY_VIOLATION_USER]:S.b.SUSPENDED,[a.a.LOGIN_BAD_PASSWORD_ASK_RESET]:S.b.LOGIN_ASSISTANCE,[a.a.LOGIN_HARD_BANNED_USER]:S.b.SOFT_BANNED,[a.a.RESPONSE_CODE_TOO_MANY_REQUESTS]:S.b.RATE_LIMITED};class x extends n.Component{constructor(...e){super(...e),v(this,"state",{showToast:!1}),v(this,"dismissModal",()=>{this.props.updateAccountRecoveryModal(null)}),v(this,"showPasswordResetSent",()=>this.props.updateAccountRecoveryModal(S.b.PASSWORD_RESET_SENT)),v(this,"showLoginWithFailed",e=>{e===b.a?this.props.updateAccountRecoveryModal(S.b.PREVENT_FACEBOOK_REGISTER):e===O.a&&this.props.updateAccountRecoveryModal(S.b.PREVENT_GOOGLE_REGISTER)}),v(this,"toggleToast",()=>this.setState(e=>({showToast:!e.showToast}))),v(this,"renderSocialButtons",()=>n.createElement(u.b,null,n.createElement(b.b,{buttonText:s.a._("Continue with Facebook","Facebook login button text"),container:r.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.props.onLoginWithSuspended,showFallback:!0,preventRegister:this.showLoginWithFailed}),n.createElement(u.b,{marginTop:1},n.createElement(O.b,{container:r.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.props.onLoginWithSuspended,preventRegister:this.showLoginWithFailed,onLoginWithVoluntarilyDeactivated:e=>{this.dismissModal(),this.props.onLoginWithVoluntarilyDeactivated&&this.props.onLoginWithVoluntarilyDeactivated(e)}}))))}render(){const e=this.props,t=e.email,o=e.modalType,i={email:t,onClose:this.dismissModal,onPasswordResetSent:this.showPasswordResetSent,socialButtons:this.renderSocialButtons()};switch(o){case S.b.SUSPENDED:return n.createElement(y.a,{onClose:this.dismissModal});case S.b.LOGIN_ASSISTANCE:return n.createElement(h,i);case S.b.RATE_LIMITED:return n.createElement(m,i);case S.b.SOFT_BANNED:return n.createElement(E,i);case S.b.PREVENT_FACEBOOK_REGISTER:return n.createElement(_,Object.assign({},i,{loginWith:b.a}));case S.b.PREVENT_GOOGLE_REGISTER:return n.createElement(_,Object.assign({},i,{loginWith:O.a}));case S.b.PASSWORD_RESET_SENT:return n.createElement(n.Fragment,null,n.createElement(w,Object.assign({},i,{onPasswordResetSent:this.toggleToast})),this.state.showToast&&n.createElement(u.b,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed"},n.createElement(k.a,{onHide:this.toggleToast,text:s.a._("Email sent!"),duration:3500})));default:return null}}}},MLP8:function(e,t,o){function n(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const o=[];let n,i;for(n=0;n<=t.length;n+=1)o[n]=[n];for(i=0;i<=e.length;i+=1)o[0][i]=i;for(n=1;n<=t.length;n+=1)for(i=1;i<=e.length;i+=1)t.charAt(n-1)===e.charAt(i-1)?o[n][i]=o[n-1][i-1]:o[n][i]=Math.min(o[n-1][i-1]+1,Math.min(o[n][i-1]+1,o[n-1][i]+1));return o[t.length][e.length]}o.d(t,"a",(function(){return n}))},QWmP:function(e,t,o){o.d(t,"a",(function(){return n}));const n=(e,t)=>{(e=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("handleErrorMessage",!0,!0,e),window.dispatchEvent(t)})({message:e,href:t})}},QtSf:function(e,t,o){t.a=(e,t)=>{let o;return t.some(t=>{const n=t(e);return n.errors.length>0&&(o=n.errors[0],!0)}),o}},Ud2L:function(e,t,o){var n=o("GyhR"),i=o("D+W/"),a=o("Qo1m"),r=o("2Uh4"),s=o("Mce2"),l=o("ggpB"),c=o("Irlq"),d=o("+U6O");t.a=({api_error_code:e,errorMessage:t,handleTouch:o,source:u,userSearch:p})=>{const g=e=>((e,t,o)=>n.createElement("button",{style:{background:"transparent",border:"none",verticalAlign:"inherit",padding:0},type:"button",onClick:()=>{Object(l.a)("unauth_password_reset_link_tapped"),Object(r.a)({usernameOrEmail:t,callBack:o})}},n.createElement(d.J,{bold:!0,inline:!0,color:"red",size:"sm",key:"err_text"},e)))(e,p,o),h=(e=>{switch(e){case i.a.API_EVENT_BLOCKED_ERROR:case i.a.API_LIMIT_EXCEEDED_ERROR:case i.a.RESPONSE_CODE_TOO_MANY_REQUESTS:return Object(c.b)(a.a._("You’ve entered a lot of incorrect passwords. To get back into your account, {{ resetPasswordLink }}. Or you can wait 30 minutes and try again.","Error message when login limited"),{resetPasswordLink:g(a.a._("reset your password","Link text for password reset"))});case i.a.LOGIN_HARD_BANNED_USER:case i.a.USER_IN_SAFE_MODE:return Object(c.b)(a.a._("We noticed some strange activity on your account.  {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.","Error message when user is soft banned"),{resetPasswordLink:g(a.a._("Reset your password","Link text for password reset"))});case i.a.INVALID_PASSWORD_GOOGLE_USER:return Object(c.b)(a.a._("Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("set a password.","Link text to set password for user with account with only google auth"))});case i.a.INVALID_PASSWORD_FB_USER:return Object(c.b)(a.a._("Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("set a password.","Link text to set password for user with account with only facebook auth"))});case i.a.INVALID_PASSWORD_ERROR_CODE:return Object(c.b)(a.a._("The password you entered is incorrect. Try again or {{ resetPasswordLink }}"),{resetPasswordLink:g(a.a._("Reset your password","Link text for password reset"))});default:return[t]}})(e);return n.createElement(s.a,{id:"touchableErrorMessage"},h.map((e,t)=>n.createElement(d.J,{inline:!0,color:"red",size:"sm",key:`err_message_${t}`},e)))}},WH5r:function(e,t,o){o.d(t,"a",(function(){return s}));var n=o("GyhR"),i=o.n(n),a=o("Qo1m"),r=o("+U6O");const s=()=>i.a.createElement(r.s,{inline:!0,href:"https://help.pinterest.com/login-request?what_do_you_need_help_with=Getting+into+my+account&tell_more_account_access=Appeal+account+suspension"},a.a._("get in touch with us","link text shown to redirect to help.pinterest.com for appealing a suspension"))},YkTi:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("Ivf5"),r=o("PNko"),s=o.n(r),l=o("Qo1m"),c=o("iJ35"),d=o("VSY/");class u extends n.Component{constructor(...e){var t,o,i;super(...e),i=()=>{const e=this.props,t=e.fullName,o=e.imageSrc;return o?n.createElement("img",{alt:t,src:o,title:Object(d.i)(l.a._("More from {{ fullName }}"),{fullName:t})}):n.createElement("span",{className:"icon"},t[0].toUpperCase())},(o="getContent")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}render(){return n.createElement("div",null,this.getContent())}}var p=o("+U6O"),g=o("Ii6Q"),h=o("NmcB");function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class b extends n.Component{constructor(...e){super(...e),m(this,"state",{isFollowing:this.props.user.explicitly_followed_by_me||!1}),m(this,"handleFollowClick",()=>{const e=this.props,t=e.follow,o=e.unfollow,n=e.user;this.state.isFollowing?(o(n.id),this.setState({isFollowing:!1})):(t(n.id),this.setState({isFollowing:!0})),this.props.logData&&Object(h.a)(101,this.props.logData)})}renderFollowButton(){const e=this.state.isFollowing,t=this.props.isSelf,o=e?l.a._("Unfollow"):l.a._("Follow");return t?i.a.createElement(p.c,{inline:!0,disabled:!0,text:l.a._("That's you!","Text describing that the person's avatar is you")}):i.a.createElement(p.c,{color:e?"gray":"red",inline:!0,onClick:this.handleFollowClick,text:o})}render(){const e=this.props,t=e.className,o=e.showName,n=e.showFollow,a=e.size,r=e.subtitle,l=e.title,d=e.user,g=void 0===d?{}:d,h=g.full_name,m=g.username,b=g.image_key||g.image_medium_url||g.image_small_url;return i.a.createElement("div",{className:s()("Module","User","hasText","thumb",a,t)},i.a.createElement(p.b,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1},i.a.createElement(p.b,{flex:"grow",paddingX:1},i.a.createElement(c.b,{className:"profileSource",to:`/${m}/`},i.a.createElement("div",{className:"thumbImageWrapper"},i.a.createElement(u,{fullName:g.full_name,imageSrc:b})),l&&i.a.createElement("h3",{className:"title"},l),o&&i.a.createElement("h4",{className:"fullname"},h),r&&i.a.createElement("div",{className:"subtitle"},r))),n&&i.a.createElement(p.b,{paddingX:1},this.renderFollowButton())))}}m(b,"defaultProps",{followedByMe:!1,showFollow:!1,showName:!1,size:"small",subtitle:"",viewType:"thumb"});t.a=Object(a.connect)(null,e=>({follow:t=>e(Object(g.a)(t)),unfollow:t=>e(Object(g.b)(t))}))(b)},bvxc:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("Ivf5"),r=o("GIJk"),s=o("D+W/"),l=o("Fpqi"),c=o("Qo1m"),d=o("3nbW"),u=o("cqmR"),p=o("hvnN"),g=o.n(p),h=o("wFAD"),m=o("ePT2"),b=o("QtSf"),_=o("PhUE"),f=o("CBQr"),w=o("Ud2L"),E=o("ggpB"),y=o("rlRx"),k=o("08qL"),O=o("9Y9K"),S=(o("YSek"),o("QWmP")),v=o("k9eC"),C=o("NmcB"),x=o("m3Ge"),L=o("JsRk"),R=o("MDr3"),T=o("1JxL"),P=o("GCCY"),j=o("i7XF"),B=o("ovu7");function A(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){F(e,t,o[t])}))}return e}function F(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const I=s.a.GEN.templateConst.settings.PASSWORD_RESET_URL,N="loginmodal",W="email",M="6LeZIo0UAAAAAKFpimHio-ff_ddIT8f_QzpXG0_1",D="6Ldx7ZkUAAAAAF3SZ05DRL2Kdh911tCa3qFP0-0r",G={emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:k.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},passwordLinkContainer:{float:"left",marginBottom:"8px",marginTop:"4px"},loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"},verticalCenter:{display:"flex",flexDirection:"column",justifyContent:"center"}};class U extends n.Component{constructor(e,t){super(e,t),F(this,"onLoginWithVoluntarilyDeactivated",e=>{this.setState({googleValidationError:e.message})}),F(this,"onLoginWithSuspended",()=>{const e=this.props,t=e.loadingIndicatorCallback,o=e.showLoginWelcomeLoadingFn;t&&t(!1),o&&o(!1),this.setState({accountRecoveryModalType:R.a[s.a.POLICY_VIOLATION_USER],loading:!1})}),F(this,"onloadCallbackV3",()=>{const e=document.getElementsByClassName("grecaptcha-badge")[0];e&&(e.style.visibility="hidden");const t=this;try{window.grecaptcha.ready(()=>{window.grecaptcha.execute(D,{action:"pinterest"}).then(e=>{t.setState({tokenV3:e})})})}catch(o){}window.onloadCallbackV3=null}),F(this,"onloadCallback",()=>{try{window.recaptchaIdOne=window.grecaptcha.render("recaptcha_placeholder_1",{sitekey:M,callback:"verifyCaptcha"})}catch(e){}try{window.recaptchaIdTwo=window.grecaptcha.render("recaptcha_placeholder_2",{sitekey:M,callback:"verifyCaptcha"})}catch(e){}}),F(this,"handleButtonClick",(e,t,o)=>{Object(E.a)("unauth.login.button.clicked");const n=this.props.viewer;let i=u.a.runPhoneValidators(this.props.email,this.context.locale,this._loginFacebookAccountKit.bind(this));if(n.isAuth?Object(C.a)(101,{element:30,login_state:n.isLimitedLogin?2:1,signup_login_method:1}):Object(C.a)(101,{element:30,signup_login_method:1}),this.setState({facebookValidationError:null,googleValidationError:null}),i)if(i=Object(b.a)(this.props.email,this.emailValidators))this.setState({emailValidationError:i}),Object(E.a)(`unauth.login.error.CLIENT_ERROR.malformemail.${N}`);else{this.setState({emailValidationError:null}),i=Object(b.a)(this.props.password,this.passwordValidators);const e=Object(b.a)(this.props.password,this.asciiValidators);i?(this.setState({passwordValidationError:i}),Object(E.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${N}`)):e?(this.setState({passwordValidationError:e}),Object(E.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${N}`),Object(E.a)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${N}`)):(this.setState({passwordValidationError:null}),this.loginUser(W,void 0,t))}}),F(this,"preventRegister",e=>{e===T.a?this.updateAccountRecoveryModal(j.b.PREVENT_FACEBOOK_REGISTER):e===P.a&&this.updateAccountRecoveryModal(j.b.PREVENT_GOOGLE_REGISTER),this.props.triggerAccountRecoveryMode&&this.props.triggerAccountRecoveryMode(e)}),F(this,"updateAccountRecoveryModal",e=>this.setState({accountRecoveryModalType:e})),F(this,"handleLoginFailure",(e,t,o)=>{const n=this.props,i=n.clearPassword,a=n.loadingIndicatorCallback,r=n.showLoginWelcomeLoadingFn,l=n.viewer,d=this.getAuxDataLoginMethod(e);Object(E.a)(`unauth.login.error.LOGIN_FAILURE.${e}`),l.isAuth?Object(C.a)(7535,{login_state:l.isLimitedLogin?2:1,signup_login_method:d}):Object(C.a)(7535,{signup_login_method:d}),a(!1),r&&r(!1);const u=t.http_status===s.a.RESPONSE_CODE_TOO_MANY_REQUESTS?s.a.RESPONSE_CODE_TOO_MANY_REQUESTS:t.api_error_code;if(u===s.a.LOGIN_MFA_REQUIRED)return void j.c.handleLoginMfa(o,t.data,this.props.onLoginWithMfa);if(u===s.a.RESPONSE_CODE_TOO_MANY_REQUESTS&&t.api_error_code===s.a.API_EVENT_BLOCKED_ERROR&&t.message&&"!"!==t.message[t.message.length-1]&&!j.c.isExceedRecaptchaLocalLimit()){if(document.getElementById("recaptcha-jssdk"))this.onloadCallback();else{const e=document.createElement("script");e.id="recaptcha-jssdk",e.src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit";const t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}return void this.setState({passwordValidationError:c.a._("Oops! You logged in too quickly. Please try again with the reCAPTCHA.","Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha"),loading:!1})}const p=j.c.getLoginErrorState(t,"login",this.props.email,w.a,this.updateAccountRecoveryModal);p?(this.setState(A({accountRecoveryModalType:R.a[u]},p,{loading:!1})),i&&p.passwordValidationError&&i()):(c.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(S.a)(c.a._("Sorry! Something went wrong on our end.")),this.setState({loading:!1}))}),F(this,"verifyCaptcha",()=>{const e=window.grecaptcha.getResponse(window.recaptchaIdOne)||window.grecaptcha.getResponse(window.recaptchaIdTwo);j.c.updateRecaptchaTimeStamp(),this.handleButtonClick(void 0,e),j.c.isExceedRecaptchaLocalLimit()||(void 0!==window.recaptchaIdOne&&window.grecaptcha.reset(window.recaptchaIdOne),void 0!==window.recaptchaIdTwo&&window.grecaptcha.reset(window.recaptchaIdTwo))}),F(this,"_loginFacebookAccountKit",e=>{if(u.a.validateResponse(e)){const t={phone_number:this.props.email,fb_auth_code:e.code};Object(E.a)("unauth_phone_only_login_attempt"),this.loginUser(T.a,t)}else this.setState({emailValidationError:c.a._("Enter your email or phone number to try again."),loading:!1})}),F(this,"handleEmailChange",e=>{this.props.onEmailChange&&this.props.onEmailChange(e)}),F(this,"handlePasswordChange",e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.onPasswordChange&&this.props.onPasswordChange(e)}),F(this,"handleBlur",()=>{this.setState({facebookValidationError:null,googleValidationError:null})}),F(this,"handleMagicLinkClick",()=>{this.setState({magicLinkLoading:!0});const e=Object(b.a)(this.props.email,this.emailValidators);if(e)this.setState({emailValidationError:e,magicLinkLoading:!1});else{this.setState({emailValidationError:null}),m.a.create("UserLoginPasswordlessResource",{username_or_email:this.props.email,is_magic_link:!0}).callCreate().then(()=>{Object(x.a)("link_send_success",this.props.email,this.props.password),this.setState({magicLinkLoading:!1}),this.props.toggleMagicLinkConfirmation(!0)},e=>{let t;Object(x.a)("link_send_failure",this.props.email,this.props.password),t=e.message?c.a._("The email you entered does not belong to any account.","Error message shown when login email does not exist."):c.a._("Sorry! Something went wrong on our end.","error message on login modal telling users we had a problem with their request"),this.setState({emailValidationError:t,magicLinkLoading:!1})})}}),F(this,"checkEmailExistsWithCompletion",(e,t,o)=>{m.a.create("EmailExistsResource",{email:e}).callGet({showError:!1}).then(e=>{!1===e.resource_response.data?o():t()})}),F(this,"handleExistingEmail",e=>{this.setState({isExistingEmail:e})}),F(this,"renderPasswordResetLink",()=>{const e=this.props,t=e.email,o=e.viewer,n=this.state,a=n.isExistingEmail,r=n.passwordValidationError;return r&&i.a.isValidElement(r)?null:i.a.createElement("div",{style:G.passwordLinkContainer},i.a.createElement("a",{href:I+(t?`?q=${t}`:""),onClick:()=>{a&&Object(E.a)("unauth_web.login_modal.forgot_password_with_existing_email"),Object(E.a)("login_modal_forget_account"),o.isAuth?Object(C.a)(101,{element:10881,login_state:o.isLimitedLogin?2:1}):Object(C.a)(101,{element:10881})}},c.a._("Forgot your password?","Desktop login modal link for users to recover their account")))}),F(this,"renderRegisterForm",()=>{const e=this.props,t=e.email,o=e.hideEmailField,n=e.inputStyleOverrides,a=e.isAccountSwitch,r=e.loginButtonTextOverride,s=e.magicLinkGroup,l=e.password,d=r||c.a._("Log in");return i.a.createElement(h.a,{buttonText:d,checkEmailExistsWithCompletion:this.checkEmailExistsWithCompletion,disableEmailLogin:this.props.disableEmailLogin,email:t,emailText:c.a._("Email or phone number"),emailValidationError:this.state.emailValidationError,handleMagicLinkClick:this.handleMagicLinkClick,hideEmailField:o,hidePasswordField:this.props.hidePasswordField,hideFacebookButton:this.props.hideFacebookButton,hideGoogleButton:this.props.hideGoogleButton,inputStyleOverrides:n,loading:this.state.loading&&!a,magicLinkLoading:this.state.magicLinkLoading,magicLinkGroup:s,onButtonClick:this.handleButtonClick,onEmailBlur:this.handleBlur.bind(this),onEmailChange:this.handleEmailChange.bind(this),onPasswordChange:this.handlePasswordChange,password:l,passwordText:c.a._("Password"),passwordValidationError:this.state.passwordValidationError,renderPasswordResetLink:this.renderPasswordResetLink,handleExistingEmail:this.handleExistingEmail})}),F(this,"renderOriginalForm",()=>i.a.createElement("div",null,this.renderRegisterForm(),!this.props.hidePasswordField&&(!this.props.hideFacebookButton||!this.props.hideGoogleButton)&&i.a.createElement(r.a,null),this.renderSocialButtons())),F(this,"renderButtons",()=>this.renderOriginalForm()),this.state={accountRecoveryModalType:null,emailValidationError:e.emailValidationError||null,passwordValidationError:e.passwordValidationError||null,facebookValidationError:null,googleValidationError:null,loading:!1,magicLinkLoading:!1,passwordFieldVisible:!1,isExistingEmail:!1,isStopRequest:!1};const o=c.a._("You missed a spot! Don't forget to add your email or phone number."),n=c.a._("Hmm...that doesn't look like an email address or phone number."),a=c.a._("Oh @*&#! No zany characters allowed.");this.emailValidators=[Object(B.q)({message:o}),Object(B.f)({message:n})];const l=c.a._("The password you entered is incorrect.");this.passwordValidators=[Object(B.o)({shortPassStr:l,badPassStyle:l,samePasswordStr:l,blackPassStr:l})],this.asciiValidators=[Object(B.b)({message:a})]}componentDidMount(){j.c.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&!this.props.isAccountSwitch&&(this.props.showResponseMessageModal?this.props.showResponseMessageModal(!1):j.c.handleRedirect(this.props.nextUrlParam)),u.a.setupPhoneAuth(this.context.locale),window.onloadCallback=this.onloadCallback,window.onloadCallbackV3=this.onloadCallbackV3,window.verifyCaptcha=this.verifyCaptcha;const e=this.props.requestContext.seoUnauthExperiments.v2ActivateExperiment("recaptcha_v3_enterprise")||"";if(e.startsWith("enabled")||e.startsWith("employees")){const e=document.createElement("script");e.id="recaptchaV3-src",e.src="https://www.google.com/recaptcha/api.js?onload=onloadCallbackV3&render="+D;const t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}void 0===window.recaptchaCount?window.recaptchaCount=1:window.recaptchaCount+=1}UNSAFE_componentWillReceiveProps(e){const t=e.emailValidationError,o=e.passwordValidationError;let n={};t!==this.props.emailValidationError?n={emailValidationError:t}:o!==this.props.passwordValidationError&&(n={passwordValidationError:o}),this.setState(n)}componentWillUnmount(){void 0!==window.recaptchaCount&&(window.recaptchaCount-=1)}getAuxDataLoginMethod(e){return e===T.a?2:e===P.a?3:e===W?1:""}loginUser(e,t,o){const n=this.props,i=n.container,a=n.hideEmailField,r=n.isAccountSwitch,s=n.requestContext,c=n.showLoginWelcomeLoadingFn,u=n.showResponseMessageModal,p=n.viewer,g=this.state,h=g.isExistingEmail,m=g.tokenV3;if(this.setState({loading:!0}),this.props.loadingIndicatorCallback(!0),!p.isAuth&&(a||h)&&c){const e=new v.c(s,"web_login_welcome_email").enabled();s.experiments.flush(),e&&c(!0)}const b=t||{username_or_email:this.props.email,password:this.props.password},f={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType},w=this.getAuxDataLoginMethod(e);if(p.isAuth?Object(C.a)(7534,{login_state:p.isLimitedLogin?2:1,signup_login_method:w}):Object(C.a)(7534,{signup_login_method:w}),r){new v.c(s,"web_flush_impressions_before_account_switch").enabled()&&l.a.getInstance().pauseImpressionsAndFlush()}Object(d.a)(b,f,this.props.requestContext.seoUnauthExperiments,r,o,m).then((e={})=>{p.isAuth?Object(C.a)(7536,{login_state:p.isLimitedLogin?2:1,signup_login_method:w}):Object(C.a)(7536,{signup_login_method:w}),j.c.storeLoginCredentialsToBrowser(b);let t=this.props.nextUrlParam||j.c.defaultLoginRedirectUrl();if(r&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const o=e.resource_response.data.user;Object(y.b)(o,"email",i),t="/"+o.username}else"/"!==t&&_.b.localStorage.setItem("authAfterLogin",!0),j.c.storeLoginCredentialsToBrowser(b);u?u(!1):j.c.handleRedirect(t)},t=>this.handleLoginFailure(e,t,b))}renderSocialButtons(){const e=this.props,t=e.disablePostSignupNextUrl,o=e.hideFacebookButton,n=e.hideGoogleButton,a=e.isAccountSwitch,r=e.isPersonalizedLoginFlyout,s=e.loadingIndicatorCallback,l=e.nextUrlParam,d=e.onLoginWithMfa,u=e.onSocialConnectVerified,p=e.shouldPreventRegister,g=e.showLoginWelcomeLoadingFn,h=!o&&i.a.createElement(T.b,{buttonText:c.a._("Continue with Facebook"),container:this.props.container,disablePostSignupNextUrl:t,isAccountSwitch:a,loadingIndicatorCallback:s,nextUrlParam:l,onSocialConnectVerified:u,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,tooltip:this.state.facebookValidationError,useGestaltTooltip:!0,preventRegister:p?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal,showLoginWelcomeLoadingFn:g}),m=!n&&i.a.createElement(P.b,{container:this.props.container,disablePostSignupNextUrl:t,isAccountSwitch:a,nextUrlParam:l,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,onSocialConnectVerified:u,tooltip:this.state.googleValidationError,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,preventRegister:p?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal,showLoginWelcomeLoadingFn:g}),b=!o&&!n?"8px":"0px",_=r?A({},G.socialButtonSeparator,{height:b}):G.socialButtonSeparator,f=r?A({},G.socialButtonContainer,{marginTop:"9px"}):G.socialButtonContainer;return i.a.createElement("div",{style:f},h,i.a.createElement("div",{style:_}),m)}render(){const e=this.props.email;return i.a.createElement("div",{style:G.loginContainer},i.a.createElement(R.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:e,onLoginWithMfa:this.props.onLoginWithMfa}),this.renderButtons(),!this.props.hideTermsOfService&&i.a.createElement(f.a,{dark:!0}))}}F(U,"defaultProps",{container:"unknown",isAccountSwitch:!1,isPersonalizedLoginFlyout:!1,shouldPreventRegister:!1});U.contextTypes={isAuthenticated:g.a.bool.isRequired,locale:g.a.string.isRequired,loginState:g.a.number,userAgent:g.a.shape({isMobile:g.a.bool.isRequired}).isRequired,hybridTier:g.a.string,pageType:g.a.string},t.a=Object(O.compose)(Object(a.connect)(e=>({viewer:e.viewer})),L.withRouter)(U)},cqmR:function(e,t,o){var n=o("D+W/"),i=o("n/kK"),a=o("QtSf"),r=o("ovu7");const s={PhoneNumberAsYouTypeParser:null,csrf:Math.floor(0xffffffffffff*Math.random()).toString(16),phoneNumberValidators:[Object(r.q)(),Object(r.p)()],setupPhoneAuth:e=>{const t=s.csrf;window.AccountKit_OnInteractive=function(){AccountKit.init({appId:n.a.GEN.templateConst.settings.FACEBOOK_API_KEY,state:t,version:"v1.1",fbAppEventsEnabled:!0})},((t,o,n)=>{const a=t.getElementsByTagName(o)[0];if(t.getElementById(n))return;const r=t.createElement(o);r.id=n,r.src="https://sdk.accountkit.com/"+i.a.getLocaleString(e)+"/sdk.js",a.parentNode.insertBefore(r,a)})(document,"script","accountkit-jssdk"),(()=>Promise.all([o.e("vendors~PhoneNumberAsYouTypeParserCommon"),o.e("PhoneNumberAsYouTypeParserCommon")]).then(o.bind(null,"Ehfw")))().then(e=>{s.PhoneNumberAsYouTypeParser=e.default})},runPhoneValidators:(e,t,o)=>{const n=Object(a.a)(e,s.phoneNumberValidators);if(!n)try{const n=s._extractCountryCode(t),i=new s.PhoneNumberAsYouTypeParser(n);i.input(e),AccountKit.login("PHONE",{countryCode:s._extractPhoneCountryCode(i),phoneNumber:s._extractPhoneNumber(i)},o)}catch(i){return!0}return n},validateResponse:e=>e&&"PARTIALLY_AUTHENTICATED"===e.status&&e.state===s.csrf,_extractCountryCode:e=>e.slice(-2).toUpperCase()||"US",_extractPhoneCountryCode:e=>e.country_phone_code?"+"+e.country_phone_code:e.country&&e.country_metadata.length>0?"+"+e.country_metadata[0]:"+1",_extractPhoneNumber:e=>e.national_number};t.a=s},hKcJ:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("hvnN"),r=o.n(a),s=o("+U6O");const l={tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}};class c extends n.Component{constructor(e,t){super(e,t),this.state={tooltipIsOpen:!!e.message}}UNSAFE_componentWillReceiveProps(e){e.message!==this.props.message&&this.setState({tooltipIsOpen:!!e.message})}render(){const e=this.props.message;return this.state.tooltipIsOpen?i.a.createElement(s.j,{anchor:this.props.anchor,color:"darkGray",idealDirection:"right",onDismiss:()=>this.setState({tooltipIsOpen:!0}),shouldFocus:!1,size:"md"},i.a.createElement(s.b,{column:12,padding:3},this.props.children?i.a.createElement("span",{style:l.text},this.props.children):i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e},style:l.tooltipText}))):null}}c.propTypes={anchor:r.a.shape(),message:r.a.string,children:r.a.element},t.a=c},hrsr:function(e,t,o){o.d(t,"a",(function(){return p})),o.d(t,"e",(function(){return g})),o.d(t,"b",(function(){return h})),o.d(t,"c",(function(){return m})),o.d(t,"d",(function(){return b})),o.d(t,"f",(function(){return _}));var n=o("RdRb"),i=o("G8/I");const a="postmessage",r="profile email",s="694505692171-31closf3bcmlt59aeulg2j81ej68j6hk.apps.googleusercontent.com",l="com.pinterest",c="offline",d="single_host_origin",u=()=>Object(i.c)("https://apis.google.com/js/client:platform.js",i.a.GPLUS_ONE);function p(e){const t={scope:r,client_id:s,app_package_name:l,access_type:c,cookie_policy:d},o=function(t){e&&e(t)};return new Promise((e,n)=>{u().then(()=>{o("google_script_load"),window.gapi.auth2?(o("google_script_init_onuse"),window.gapi.auth2.init(t).then(t=>{o("google_init_success"),e(t)},({error:e})=>{o("google_init_error"),n(`init_onuse_${e}`)})):(o("google_script_init_exists"),window.gapi.load("auth2",{callback:()=>{o("google_auth2_load_complete"),window.gapi.auth2.init(t).then(t=>{o("google_init_success"),e(t)},({error:e})=>{o("google_init_error"),n(`init_exists_${e}`)})},onerror:({error:e})=>{o("google_auth2_script_load_error"),n(e)},timeout:15e3,ontimeout:()=>{o("google_auth2_script_load_timeout"),n("timeout")}}))})})}function g(e,t){return function(e,t){return new Promise((o,i)=>{Object(n.b)()?i():(t("init_google_button_v4"),t("google_button_init"),p(t).then(()=>{t("google_sdk_load"),window.gapi.signin.render(e,{scope:r,clientid:s,apppackagename:l,redirecturi:a,accesstype:c,cookiepolicy:d,callback:e=>{t("callback_response");const n=e.status,i=n.signed_in?{data:{gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at,gplus_autologin:!0},signupOptions:{gplus_code:e.code,gplus_id_token:e.id_token,gplus_redirect_uri:a}}:{};n.signed_in?t("google_auth_data_found"):t("gplus_user_not_logged_in"),o(i)}})},e=>{t("google_auth2_sdk_init_error"),i(e)}))})}(e,t)}function h(e,t){return function(e,t,o){return new Promise((i,r)=>{t&&Object(n.b)()?r():u().then(()=>{window.gapi.signin.render(e,{scope:o,clientid:s,apppackagename:l,redirecturi:a,accesstype:c,cookiepolicy:d,callback:e=>{const o=e.status,n=o.signed_in?{data:{gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at,gplus_autologin:t||!1},signupOptions:{gplus_code:e.code,gplus_id_token:e.id_token,gplus_redirect_uri:a}}:{};(o.signed_in||t)&&i(n)}})})})}(e,t,r)}function m(e,t,o,i=!1){return function(e,t,o,i=!1){return new Promise((s,l)=>{i&&Object(n.b)()?l():(o("google_button_init"),p(o).then(()=>{o("google_sdk_load"),t.signin2.render(e,{scope:r,onsuccess:e=>{o("google_button_success");const t=e.getAuthResponse(!0),n={data:{gplus_id_token:t.id_token,gplus_access_token:t.access_token,gplus_expires_at:t.expires_at,gplus_autologin:i||!1},signupOptions:{gplus_code:"",gplus_id_token:t.id_token,gplus_redirect_uri:a}};s(n)},onfailure:()=>{o("google_button_failure"),l("gapi_signin2_render_error")}})},e=>{o("google_auth2_sdk_init_error"),l(e)}))})}(e,t,o,i)}function b(e,t,o=!1){return function(e,t,o=!1){return new Promise((e,i)=>{o&&Object(n.b)()?i():(t("google_button_init"),p(t).then(n=>{t("google_sdk_load");const a=n.currentUser.get();a&&a.Zi||i("gplus_user_not_found");const r=a.getAuthResponse(!0);if(r){t("google_auth_data_found");const n={data:{gplus_id_token:r.id_token,gplus_access_token:r.access_token,gplus_expires_at:r.expires_at,gplus_autologin:o||!1}};e(n)}i("gplus_user_not_logged_in")},e=>{t("google_auth2_sdk_init_error"),i(e)}))})}(0,t,o)}function _(e,t){return new Promise((e,o)=>{Object(n.b)()?o():(t("google_button_init"),function(e){const t={scope:r,client_id:s,app_package_name:l,access_type:c,cookie_policy:d};return new Promise((o,n)=>{e("google_script_fetch"),Object(i.c)("https://apis.google.com/js/platform.js",i.a.GPLUS_ONE).then(()=>{e("google_script_load"),window.gapi.load("auth2",{callback:()=>{e("google_auth2_load");const i=window.gapi.auth2.init(t);i.then(()=>{e("google_init_success"),o(i)},({error:t})=>{e("google_init_error"),n(`init_exists_${t}`)})},onerror:({error:t})=>{e("google_auth2_script_load_error"),n(t)},timeout:15e3,ontimeout:()=>{e("google_auth2_script_load_timeout"),n("timeout")}})})})}(t).then(n=>{t("google_sdk_load");const i=n.currentUser.get();i&&i.Zi||o("gplus_user_not_found");const a=i.getAuthResponse(!0);if(a){t("google_auth_data_found");const o={data:{gplus_id_token:a.id_token,gplus_access_token:a.access_token,gplus_expires_at:a.expires_at,gplus_autologin:!0}};e(o)}t("google_auth_data_not_found"),o("gplus_user_not_logged_in")},e=>{t("google_auth2_sdk_init_error"),o(e)}))})}},ivDc:function(e,t,o){var n=o("GyhR"),i=o("AIe5"),a=o("+U6O");function r(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}t.a=class extends n.Component{render(){const e=this.props,t=e.description,o=e.error,s=e.id,l=e.label,c=e.required,d=void 0!==c&&c,u=e.onLabelTouch,p=r(e,["description","error","id","label","required","onLabelTouch"]);return n.createElement(i.a,{description:t,error:o,id:s,label:l,required:d,onLabelTouch:u},n.createElement(a.L,Object.assign({},p,{hasError:!!o,id:s,ref:e=>{this.textfield=e?e.textfield:null}})))}}},jDCj:function(e,t,o){var n=o("GyhR"),i=o.n(n),a=o("ivDc"),r=o("hKcJ"),s=o("Qo1m"),l=o("hvnN"),c=o.n(l),d=o("tQ9o"),u=o("08qL"),p=o("+U6O");function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){h(e,t,o[t])}))}return e}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const m={input:{backgroundColor:"#fff",border:"solid 1px #ccc",WebkitBoxShadow:"none",boxShadow:"none",position:"relative",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",borderRadius:"3px",fontWeight:"bold",padding:"10px",WebkitBoxSizing:"border-box",boxSizing:"border-box",width:"100%",color:"#333",fontSize:"14px"},fieldset:{position:"relative"},errorIcon:{position:"absolute",right:"14px",top:"14px"},tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"},suggestedEmailSpan:{whiteSpace:"nowrap"},suggestedEmailLink:{display:"inline-block",font:"inherit",fontWeight:"bold",fontSize:"14",color:"#fff",cursor:"pointer",textDecoration:"underline",verticalAlign:"top",outline:"none",outlineOffset:"0"},fieldTitle:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",color:"#333",float:"left",fontFamily:u.b,fontSize:"16px",fontStyle:"normal",fontWeight:"bold",margin:"15px 0px 5px 3px"},suggestedEmailTooltip:{width:"match-content"}};class b extends n.Component{constructor(e,t){super(e,t),h(this,"renderErrorIcon",e=>{if(e)return i.a.createElement("div",{className:"InputField__errorIcon",style:m.errorIcon},i.a.createElement(p.m,{accessibilityLabel:s.a._("Remove","Accessible label for error icon"),color:"red",icon:"remove",inline:!0,size:14}))}),h(this,"renderTooltip",(e,t)=>{if(e&&t)return this.props.useGestaltTooltip?i.a.createElement(r.a,{anchor:this._input,message:e}):i.a.createElement(d.a,{message:e})}),h(this,"renderGestaltInputField",()=>{const e=this.props,t=e.autoComplete,o=e.disabled,n=e.domainError,r=e.id,s=e.inputRef,l=e.name,c=e.onBlur,d=e.onChange,u=e.onFocus,g=e.placeholder,h=e.type,m=e.updateEmail,b=e.useExperimentalTextfield,_=e.value,f=this.props.hasError||this.props.tooltip?this.props.tooltip:"";return b?i.a.createElement(a.a,{disabled:o,error:n||f,id:r,name:l,onBlur:c,onChange:({event:e,value:t})=>{d(e)},onFocus:u,placeholder:g,ref:e=>{this._gestaltInput=e,s&&s(e)},type:h,onLabelTouch:m,value:_}):i.a.createElement(p.L,{autoComplete:t,disabled:o,errorMessage:f,id:r,name:l,onBlur:c,onChange:({event:e,value:t})=>{d(e)},onFocus:u,placeholder:g,ref:e=>{this._gestaltInput=e,s&&s(e)},type:h,updateEmail:m,value:_})}),this.state={initialFocus:this.props.focused||!1,gainFocus:!1}}componentDidMount(){this.state.initialFocus&&this.focusInput()}UNSAFE_componentWillReceiveProps(e){const t=this.props,o=t.domainError,n=t.type;e.hasError&&!1===this.props.hasError?this.setState({gainFocus:!0}):this.setState({gainFocus:!1}),o&&n&&"email"===n&&this.setState({shouldTooltipOpen:!0})}componentDidUpdate(){this.state.gainFocus&&this.focusInput()}focusInput(){this._input&&this._input.focus(),this._gestaltInput&&this._gestaltInput.textfield&&this._gestaltInput.textfield.focus()}renderVanillaTextInputField(e,t){return i.a.createElement("div",null,i.a.createElement("input",{"aria-label":this.props.accessibilityLabel||this.props.placeholder,autoComplete:this.props.autoComplete,className:e,name:this.props.name,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onChange:this.props.onChange,onClick:this.props.onClick,placeholder:this.props.placeholder,ref:e=>{this._input=e,this.props.inputRef&&this.props.inputRef(e)},style:t,type:this.props.type,value:this.props.value}),this.renderErrorIcon(this.props.hasError),this.renderTooltip(this.props.tooltip,this.props.hasError))}render(){let e=m.input;this.props.inputStyleOverrides&&(e=g({},e,this.props.inputStyleOverrides));let t=m.fieldset;this.props.fieldsetStyleOverrides&&(t=g({},t,this.props.fieldsetStyleOverrides));let o="";return"gray"===this.props.placeholderColor?o="UnauthTextInputField__gray":"darkGray"===this.props.placeholderColor&&(o="UnauthTextInputField__darkGray"),i.a.createElement("fieldset",{className:this.props.classNames,style:t},this.props.inputFieldTitle?i.a.createElement("div",{style:m.fieldTitle},this.props.inputFieldTitle):null,this.props.useGestalt?this.renderGestaltInputField():this.renderVanillaTextInputField(o,e))}}b.propTypes={accessibilityLabel:c.a.string,autoComplete:c.a.oneOf(["on","off","username","new-password","current-password"]),classNames:c.a.arrayOf(c.a.string),disabled:c.a.bool,domainError:c.a.node,fieldsetStyleOverrides:c.a.object,focused:c.a.bool,hasError:c.a.bool,id:c.a.string.isRequired,inputStyleOverrides:c.a.object,inputFieldTitle:c.a.string,inputRef:c.a.func,name:c.a.string.isRequired,onFocus:c.a.func,onBlur:c.a.func,onChange:c.a.func,onClick:c.a.func,placeholder:c.a.string,placeholderColor:c.a.oneOf(["gray","darkGray"]),tooltip:c.a.node,type:c.a.oneOf(["url","text","password","email","number"]).isRequired,updateEmail:c.a.func,useGestalt:c.a.bool,useGestaltTooltip:c.a.bool,useExperimentalTextfield:c.a.bool,value:c.a.string},b.defaultProps={autoComplete:"on",hasError:!1},t.a=b},m3Ge:function(e,t,o){o.d(t,"a",(function(){return i}));var n=o("ggpB");const i=(e,t,o)=>{Object(n.c)(`unauth.magic_link_login.${e}`,{has_email_data:!!t,has_password_data:!!o})}},tQ9o:function(e,t,o){o.d(t,"a",(function(){return d}));var n=o("GyhR"),i=o.n(n),a=o("hvnN"),r=o.n(a);function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){l(e,t,o[t])}))}return e}function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const c={invisibleWrapper:{top:"0px",width:"215px"},message:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:"left",maxWidth:"215px",display:"inline-block",float:"left"},suggestionTooltipMessage:{boxShadow:"none",background:"#E2780D",color:"#fff",fontSize:"14px",WebkitBoxShadow:"none"},text:{overflowWrap:"break-word",wordWrap:"break-word"}};function d(e,t){let o="Tooltip_message";e.isSuggestionTooltip&&(o="Tooltip_suggestionMessage");const n=s({},c.invisibleWrapper,e.customWrapperStyles),a=e.isSuggestionTooltip?s({},c.message,c.suggestionTooltipMessage):c.message;return i.a.createElement("div",{className:"Tooltip_wrapper","data-test-id":"tooltip",style:n},i.a.createElement("div",{className:o,style:a},e.children?i.a.createElement("span",{style:c.text},e.children):i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.message},style:c.text})),i.a.createElement("div",null))}d.propTypes={message:r.a.string,customWrapperStyles:r.a.shape({}),isSuggestionTooltip:r.a.bool,children:r.a.element},d.contextTypes={message:r.a.string}},ulrk:function(e,t,o){o.d(t,"a",(function(){return s}));var n=o("GyhR"),i=o.n(n),a=o("Qo1m"),r=o("+U6O");function s({color:e,onClick:t,overrideText:o}){const n=o||a.a._("Got it","Acknowledge protected account modal message");return i.a.createElement(r.c,{accessibilityLabel:n,color:e||"gray",onClick:t,text:n})}},wFAD:function(e,t,o){var n=o("GyhR"),i=o("+aUF"),a=["gmail.com","hotmail.com","hotmail.com.ar","yahoo.com.ar","live.com.ar","outlook.com","live.com","bigpond.com","yahoo.com","icloud.com","yahoo.com.au","yahoo.com.br","bol.com.br","yahoo.ca","hotmail.ca","web.de","gmx.de","t-online.de","hotmail.de","hotmail.es","yahoo.es","hotmail.fr","orange.fr","yahoo.fr","live.fr","free.fr","laposte.net","wanadoo.fr","outlook.fr","hotmail.co.uk","rediffmail.com","yahoo.co.in","yahoo.in","libero.it","hotmail.it","alice.it","yahoo.co.jp","ezweb.ne.jp","docomo.ne.jp","i.softbank.jp","softbank.ne.jp","live.com.mx","outlook.es","aol.com","outlook.com","comcast.net"],r=o("Qo1m"),s=o("MLP8"),l=o("jDCj"),c=o("ggpB"),d=o("9Y9K"),u=o("Irlq"),p=o("m3Ge"),g=o("cEhz"),h=o("2YES"),m=o("+U6O");function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){_(e,t,o[t])}))}return e}function _(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const f={captcha:{marginTop:"16px",transform:"scale(0.88)",transformOrigin:"0 0"},signupButton:{width:"100%"},wrapperVisible:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",display:"flex",opacity:1,alignItems:"center",justifyContent:"space-between",height:"100%"},wrapperHidden:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",pointerEvents:"none",display:"none",opacity:0}};t.a=Object(d.compose)(h.e,g.b)(class extends n.Component{constructor(...e){super(...e),_(this,"state",{domainError:"",newEmail:"",showAgeInput:this.props.showAgeInput}),_(this,"updateEmail",()=>{const e=this.props,t=e.onEmailChange,o=e.onTypoSuggestionClick;this.state.newEmail&&(t({target:{value:this.state.newEmail}}),o(),Object(c.a)("unauth.email_domain_typo_suggestion.clicked"))}),_(this,"handleEmailBlur",()=>{const e=this.props,t=e.checkEmailExistsWithCompletion,o=e.email,n=e.handleExistingEmail,i=e.isSignupForm,r=e.onEmailBlur,l=this.state.showAgeInput;r&&r(),o&&o.length>0&&t&&t(o,()=>{i&&l&&this.setState({showAgeInput:!1}),n&&n(!0)},()=>{i&&!l&&this.setState({showAgeInput:!0}),n&&n(!1)});const c=o&&-1!==o.indexOf("@")?o.split("@"):[];if(o&&o!==this.state.newEmail||this.setState({domainError:""}),o&&c&&o.length<60){if(2===c.length){const e=c[1],t=e&&-1!==e.indexOf(".")?e.split("."):[];if(t.length>=2&&"gmail"===t[0]&&"com"!==t.slice(1).join(".")){const e=c[0]+"@gmail.com";this.setEmailTypoSuggestion(e)}}const e=c[1]&&a.includes(c[1])?null:c[1]&&a.map(e=>{const t=Object(s.a)(e,c[1]);return 2===t||1===t?e:null}).filter(e=>"string"==typeof e);if(e&&e.length){const t=e[0]?`${c[0]}@${e[0]}`:"";this.setEmailTypoSuggestion(t)}}}),_(this,"renderDefaultLoginButton",(e,t)=>{const o=this.props,a=o.email,r=o.buttonText,s=o.buttonTextLabel,l=o.password;return n.createElement("div",{"data-test-id":"registerFormSubmitButton",onClick:t?()=>Object(p.a)(`login_click_${e?"disabled":"enabled"}`,a,l):()=>{}},n.createElement(i.a,{accessibilityLabel:s,className:"red SignupButton",disabled:e,styleOverrides:f.signupButton,type:"submit"},n.createElement("div",null,r)))}),_(this,"renderMagicLinkButton",e=>{const t=this.props,o=t.buttonTextLabel,a=t.email,s=t.handleMagicLinkClick,l=t.magicLinkLoading,c=t.password;return n.createElement("div",{onClick:()=>Object(p.a)(`passwordless_click_${e?"disabled":"enabled"}`,a,c)},n.createElement(i.a,{accessibilityLabel:o,className:"red SignupButton",disabled:e,loading:l,styleOverrides:f.signupButton,onClick:s},n.createElement(m.b,null,r.a._("Log in without password","text on button allowing users to get an email to login"))))})}static getDerivedStateFromProps(e,t){return e.email===t.newEmail?{domainError:"",newEmail:""}:null}setEmailTypoSuggestion(e){const t=Object(u.b)(r.a._("Did you mean {{ newEmail }}?"),{newEmail:n.createElement(m.J,{bold:!0,inline:!0,color:"red",size:"sm",key:"err_text"},e)});this.setState({domainError:t,newEmail:e}),this.props.email===e?this.setState({domainError:""}):Object(c.a)("unauth.email_domain_typo_suggestion.shown")}renderLoginButtons(){const e=this.props,t=e.email,o=e.magicLinkGroup,i=this.props.disableEmailLogin||!1,a=""!==this.props.password,r=this.renderDefaultLoginButton(i||!a,!0),s=this.renderMagicLinkButton(a||""===t);return o&&o.startsWith("enabled_login_primary")?n.createElement(m.b,null,r,s):o&&o.startsWith("enabled_magic_link_primary")?n.createElement(m.b,null,s,r):o&&o.startsWith("enabled_inactive_login")?r:this.renderDefaultLoginButton(i)}render(){const e=this.props,t=e.age,o=e.ageValidationError,i=e.disableEmailLogin,a=e.email,s=e.emailFieldHasError,c=e.emailLabel,d=e.emailText,u=e.emailValidationError,p=e.hideEmailField,g=e.hideFacebookButton,h=e.hideGoogleButton,_=e.hidePasswordField,w=e.inputStyleOverrides,E=e.onAgeBlur,y=e.onAgeChange,k=e.onButtonClick,O=e.onEmailChange,S=e.onPasswordChange,v=e.password,C=e.passwordFieldVisible,x=e.passwordText,L=e.passwordValidationError,R=e.renderPasswordResetLink,T=e.suppressFocus;let P=f.wrapperVisible;!1===C&&(P=f.wrapperHidden);let j=u;return j||!_&&!i||(g||h?!g&&h?j=r.a._("Your account is connected to Facebook - use the Facebook button to log in","Customized desktop login for users with Facebook"):g&&!h&&(j=r.a._("Your account is connected to Google - use the Google button to log in","Customized desktop login for users with Google")):j=r.a._("Your account is connected to Facebook and Google - use the buttons to log in","Customized desktop login for users with FB and Google")),n.createElement("form",{"data-test-id":"registerForm",method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),k(e)}},!p&&n.createElement(m.b,{"data-test-id":"emailInputField"},n.createElement(l.a,{accessibilityLabel:c,autoComplete:"username",fieldsetStyleOverrides:{marginBottom:"7px"},focused:!T,hasError:!!u||s,domainError:this.state.domainError,id:"email",inputStyleOverrides:w,name:"id",onBlur:this.handleEmailBlur,onChange:O,placeholder:d,tooltip:j,type:"email",value:a,updateEmail:this.state.domainError?this.updateEmail:null,useExperimentalTextfield:!0,useGestalt:!0})),!_&&n.createElement(n.Fragment,null,n.createElement(m.b,{"data-test-id":"passwordInputField"},n.createElement(l.a,{autoComplete:"new-password",disabled:i,hasError:!!L,id:"password",inputStyleOverrides:b({},w,P),name:"password",onChange:S,placeholder:x,tooltip:L,type:"password",value:v,useExperimentalTextfield:!1,useGestalt:!0})),R?R():null),!_&&this.state.showAgeInput?n.createElement(m.b,{"data-test-id":"ageInputField"},n.createElement(l.a,{accessibilityLabel:"age",autoComplete:"off",dataTestId:"ageInputField",fieldsetStyleOverrides:{marginTop:"7px"},hasError:!!o,id:"age",inputStyleOverrides:b({},w),name:"age",onBlur:E,onChange:y,placeholder:r.a._("Age"),tooltip:o,type:"text",value:t,useExperimentalTextfield:!0,useGestalt:!0})):null,window.recaptchaCount>0?n.createElement("div",{id:`recaptcha_placeholder_${window.recaptchaCount}`,className:"g-recaptcha",style:f.captcha}):null,!_&&this.renderLoginButtons())}})}}]);
//# sourceMappingURL=pjs-BusinessAccountLoginPageDesktop~FullPageSignup~LoginModal~LoginPageDesktop~LoginPageSterling~Persona~91a2a2d5-b36a355c1a9b505328f0.mjs.map
